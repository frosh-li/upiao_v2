(window["webpackJsonp"] = window["webpackJsonp"] || []).push([[2],{

/***/ "./js/blocks/charts.js":
/*!*****************************!*\
  !*** ./js/blocks/charts.js ***!
  \*****************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

eval("/* WEBPACK VAR INJECTION */(function($) {var __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;!(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__,__webpack_require__(/*! api */ \"./js/api.js\"),__webpack_require__(/*! ui */ \"./js/ui.js\"),__webpack_require__(/*! backbone */ \"./libs/backbone-min.js\")], __WEBPACK_AMD_DEFINE_RESULT__ = (function(require,API,ui,Backbone){\n/*define(['require','api','ui','backbone','echarts'],function(require,API,ui,Backbone,echart){*/\n    var navView,\n        overFlag = false,\n        echart,\n        sys,listType,sub,curids=\"\",curEvtType,\n        charType=\"bar\",\n        ALARM_COLOR = {\n            \"0\":\"green\",\n            \"1\":\"#f76363\",\n            \"2\":\"#ff975e\",\n            \"3\":\"#ffee2c\"\n        },\n        ALARM_SYMBOL = {\n            '0':'image://images/chart-normal.png',\n            '1':'image://images/chart-caution.png',\n            '2':'image://images/chart-alert.png',\n            '3':'image://images/chart-notice.png'\n        };\n\n    var chart_extobj = {\n        data:null,\n        navPlugin:null,\n        el:$(\".chart-wrap\"),\n        chart:null,\n        chartOption:{},\n        chartType:'line',\n        origindata:null,\n        chartName:\"\",\n        initialize:function(data){\n            var _this = this;\n            _this.listenTo(Backbone.Events,\"listdata:update stationdata:get listdata:update:fail listdata:get listdata:get:fail\",function(data){\n                _this.updateChart(data);\n            });\n\n            _this.listenTo(Backbone.Events,\"curstation:change\",function(data){\n                if(typeof navData == 'undefined' || !navData || !navData.ids.length || !data){\n                    _this.origindata = {};\n                    _this.origindata.list = [];\n                    _this.updateChart();\n                }\n            });\n        },\n        clear:function(){\n\n        },\n        getLevel:function(value,range){\n\n        },\n        updateChart:function(data){\n            var _this = this;\n            _this.origindata = data||_this.origindata;\n\n                var col = _this.getFieldValue();\n                var ctype = \"station\";\n                //window.location.hash.indexOf(\"station\") > -1 ? \"station\":(window.location.hash.indexOf(\"station\")>-1)\n                var hash = window.location.hash;\n\n                var values = [];\n                var xAixs = [];\n                if(!_this.origindata.list){\n                    _this.origindata.list = [];\n                }\n                for(var i = 0 ; i < _this.origindata.list.length; i++){\n                    var cdata =  _this.origindata.list[i];\n                        if(hash.indexOf('station') > -1 || hash.indexOf(\"queryStation\") > -1){\n                            xAixs.push(cdata.site_name+\"-\"+cdata.sid);\n                        }else if(hash.indexOf(\"group\") > -1 || hash.indexOf(\"queryGroup\") > -1){\n                            xAixs.push(cdata.site_name+\"-\"+cdata.sid+\"\\n\"+\"组\"+cdata.gid);\n                        }else if(hash.indexOf(\"battery\") > -1 || hash.indexOf(\"queryBattery\") > -1){\n                            xAixs.push(cdata.site_name+\"-\"+cdata.sid+\"\\n\"+\"组\"+cdata.gid+\"-\"+cdata.bid);\n                        }\n                        var status = cdata[col.substring(0,3)+\"Col\"] || 0;\n                        if(col == \"Dev_R\" || col==\"Dev_T\" || col==\"Dev_U\"){\n                            status = cdata[col.replace(\"_\",\"\")+\"Col\"];\n                        }\n\n                        values.push({\n                            value:cdata[col],\n                            symbol:ALARM_SYMBOL[status],\n                            symbolSize:14,\n                            lineStyle:{\n                                normal:{\n                                    color: 'yellow',\n                                    width:2\n                                }\n                            },\n                            smooth:true,\n                            itemStyle:{\n                                // color:ALARM_COLOR[status],\n                                normal:{\n                                    color:ALARM_COLOR[status]\n                                }\n                            }\n                        });\n                    //}\n                }\n                if(values){\n\n                    __webpack_require__.e(/*! AMD require */ 20).then(function() { var __WEBPACK_AMD_REQUIRE_ARRAY__ = [__webpack_require__(/*! charts */ \"./libs/echarts.min.js\")]; (function(chart){\n                        echart = chart;\n                        _this.createOption(charType,values,xAixs).render();\n                        overFlag = true;\n                    }).apply(null, __WEBPACK_AMD_REQUIRE_ARRAY__);}).catch(__webpack_require__.oe)\n                }else{\n                    __webpack_require__.e(/*! AMD require */ 20).then(function() { var __WEBPACK_AMD_REQUIRE_ARRAY__ = [__webpack_require__(/*! charts */ \"./libs/echarts.min.js\")]; (function(chart){\n                        echart = chart;\n                        _this.createOption(charType,values,xAixs).render();\n                        overFlag = true;\n                    }).apply(null, __WEBPACK_AMD_REQUIRE_ARRAY__);}).catch(__webpack_require__.oe)\n                }\n        },\n        onChageField:function($el){\n\n            overFlag=false;\n            if($el){\n                this.currentFieldElement = $el;\n            }\n            this.updateChart();\n            // API.getChart({id:curids,field:this.getFieldValue($el)},curEvtType,listType);\n        },\n        getFieldValue:function($el){\n            // var el = $el;\n            if(!this.currentFieldElement){\n                this.currentFieldElement = $($(\".chart-wrap .switch-btn:visible\")[0]);\n            }\n            if($el){\n                this.currentFieldElement = $el;\n            }\n            \n            $(\".chart-wrap h4\").text(this.currentFieldElement.text());\n            \n            this.chartName = this.currentFieldElement.text();\n            $('.chart-wrap .switch-btn').removeClass('active');\n            $(this.currentFieldElement).addClass('active');\n            return this.currentFieldElement.attr('field');\n        },\n        createOption:function(type,data,xAixs){\n            var _this = this,\n                legendData = [],\n                xAxis = [{\n                    type : 'category',\n                    data:xAixs?xAixs:[\"1\",\"2\",\"3\",\"4\",\"5\",\"6\",\"7\",\"8\",\"9\",\"10\",\"11\",\"12\",\"13\",\"14\",\"15\",\"16\",\"17\",\"18\",\"19\",\"20\"]\n                }],\n                yAxis = [{\n                    type : 'value',\n                }],\n                grid = {\n                    //x:50,y:20,x2:50,y2:40,borderWidth:0\n                },\n                barColor = {\n                    normal:'green',\n                    notice:'#ffee2c',\n                    alert:'#ff975e',\n                    caution:'#f86464'\n                },\n                seriesLineCommonOption = {\n                    symbolSize:8,\n                    color:\"green\"\n                },\n                seriesBarCommonOption = {\n                    symbolSize:8\n                },\n                series = [];\n\n            //if(data){\n                series.push($.extend(true,seriesBarCommonOption,{\n                    type:type,\n                    data:data,\n                    barMaxWidth:40\n                }));\n\n                _this.chartOption = {\n                    series:[\n                        {\n                            name:_this.chartName,\n                            type:type,\n                            data:data,\n                            barMaxWidth:30,\n                            symbolSize:8,\n                            lineStyle:{\n                                normal:{\n                                    color:\"#000\"\n                                }\n                            },\n                            smooth:true\n                        }\n                    ],\n                    xAxis:xAxis,\n                    yAxis:yAxis,\n                    grid:grid,\n                    tooltip : {\n                        trigger: 'axis',\n                        axisPointer : {            // 坐标轴指示器，坐标轴触发有效\n                            type : 'shadow'        // 默认为直线，可选为：'line' | 'shadow'\n                        },\n                        formatter:\"{b}<br/>当前值:{c}\"\n                    },\n                    toolbox: {\n                        show : true\n                    }\n                }\n            //}\n\n            return this;\n        },\n        switchChartType :function(type) {\n            charType = charType=='line'?'bar':'line';\n            return this;\n        },\n        render:function(){\n            ui.resizeChartBox();\n            if(!this.chart){\n                this.chart = echart.init($('#chart')[0])\n            }\n\n            this.chart.setOption(this.chartOption);\n        }\n    }\n\n    $(window).resize(function(){\n        if(navView && navView.chart){\n            navView.chart.resize();\n        }\n    })\n\n    return {\n        init:function(_sys,_listType,_sub){\n\n            sys = _sys;\n            listType = _listType;\n            sub = sub;\n            curids=\"\";\n\n\n            $(\".down\").show();\n            navView = new (Backbone.View.extend(chart_extobj))();\n\n            $(\".chart-wrap\").off(\"click\");\n            $(\".chart-wrap\").on(\"click\",\".switch-btn\",function(e){\n\n                if($(this).hasClass('disabled')){\n                    e.preventDefault();\n                    return;\n                }\n                navView.onChageField($(this));\n            })\n            $(\".chart-wrap\").on(\"click\",\".shift-btn\",function(){\n\n                navView.switchChartType($(this));\n                navView.onChageField();\n            })\n\n            return this;\n        },\n        isOver:function(value){\n            return true;\n            if(typeof value == 'undefined'){\n                return !!overFlag;\n            }else{\n                overFlag = !!value;\n            }\n        },\n        destory:function(){\n            navView.stopListening();\n            $(\".down\").hide();\n        }\n    };\n}).apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__),\n\t\t\t\t__WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__))\n\n/* WEBPACK VAR INJECTION */}.call(this, __webpack_require__(/*! ./libs/jquery.min.js */ \"./libs/jquery.min.js\")))\n\n//# sourceURL=webpack:///./js/blocks/charts.js?");

/***/ }),

/***/ "./js/blocks/list.js":
/*!***************************!*\
  !*** ./js/blocks/list.js ***!
  \***************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

eval("/* WEBPACK VAR INJECTION */(function($) {var __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;!(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__,__webpack_require__(/*! api */ \"./js/api.js\"),__webpack_require__(/*! blocks/nav */ \"./js/blocks/nav.js\"),__webpack_require__(/*! stationsinfoDialog */ \"./js/dialog-stationsinfo.js\"),__webpack_require__(/*! context */ \"./js/context_model.js\"),__webpack_require__(/*! ui */ \"./js/ui.js\"),__webpack_require__(/*! common */ \"./js/common.js\"),__webpack_require__(/*! table */ \"./libs/jquery.dataTables.js\"),__webpack_require__(/*! fixedHeader */ \"./libs/dataTables.fixedHeader.min.js\")], __WEBPACK_AMD_DEFINE_RESULT__ = (function(require,API,nav,stationInfoDialog,context,ui,common){\n    var listView = null,\n        pageView = null,\n        _listType,_sub,_sys,\n        overFlag = false,\n        dataTableDefaultOption = {\n            \"paging\": false,\n            \"searching\": true,\n            \"order\": [ ],\n            \"autoWidth\": true,\n            \"scrollCollapse\":true,\n            \"language\": {\n                \"lengthMenu\": \"显示 _MENU_ 条\",\n                \"paginate\":{\n                    \"first\":\"首页\",\n                    \"last\":\"末页\",\n                    \"next\":\"下一页\",\n                    \"previous\":\"上一页\",\n                    'info': '第 _PAGE_ 页 / 总 _PAGES_ 页'\n                },\n                \"zeroRecords\": \"暂无数据，请查看左侧数形结构是否已勾选或检查网络连接\"\n\n            },\n            \"zeroRecords\": \"暂无数据，请查看左侧数形结构是否已勾选或检查网络连接\",\n                \"dom\":\"irtlp\",\n            \"scroller\": {\n                \"rowHeight\": 'auto'\n            },\n            \"fixedHeadere\": {\n                header:true\n            },\n            \"fnDrawCallback\": function ( oSettings ) {\n                /* Need to redo the counters if filtered or sorted */\n                // if ( oSettings.bSorted || oSettings.bFiltered ) {\n                //     for ( var i=0, iLen=oSettings.aiDisplay.length ; i<iLen ; i++ ) {\n                //         $('td:eq(0)', oSettings.aoData[ oSettings.aiDisplay[i] ].nTr ).html('<label class=\"index\">'+ (i+1)+'</label>' );\n                //     }\n                // }\n            },\n            \"info\":false\n        },\n        listConfig = {\n            defaultConfig:{\n                extObj : {\n                    data:null,\n                    el:'#list',\n                    \"listPlugin\":[],\n                    events:{\n                        \"click .dataTable tr\":\"selectRow\",\n                        \"click .show-info\":\"openStationInfoDialog\",\n                        \"mouseover .dataTable tr\":\"inRow\",\n                        \"mouseout .dataTable tr\":\"inRow\"\n                    },\n                    initialize:function(data){\n                        var _this = this;\n                        //_this.destroy();\n                        _this.listPlugin=[];\n                        _this.captureEvt();\n                        _this.curPage = 1;\n                        _this.totalpage = 1;\n                    },\n                    checkAllRows: function(){\n                        return;\n                        var _this = this;\n                        setTimeout(function(){\n                            var allRows = $('.dataTable tr', _this.el);\n\n                            for(var i = 0 ; i < allRows.length; i++){\n                                _this.changeRowClass($(allRows[i]),'selected')\n                            }\n                            _this.triggerSelectEvent();\n                        },0)\n\n\n                    },\n                    captureEvt:function(){\n\n                        var _this = this;\n                        $(\".mnext\").click(function(){\n                            console.log('to next page');\n                            if(_this.curPage >= _this.totalpage){\n                                return;\n                            }\n                            _this.curPage++;\n                            _this.fetchData();\n                        });\n                        $(\".mprev\").click(function(){\n                            if(_this.curPage == 1){\n                                return;\n                            }\n                            _this.curPage--;\n                            console.log(_this.curPage)\n                            _this.fetchData();\n                        });\n                        _this.listenTo(Backbone.Events,\"listdata:update stationdata:get\",function(data){\n                            console.log('listdata update', data);\n                            if(data.types){\n                                _this.types = data.types;\n                            }\n                            if(!$(_this.el).length || !$(_this.el).is(\":visible\")){\n                                return;\n                            }\n                            var page = data.page,\n                                totals = data.totals || 0,\n                                pageSize = data.pageSize || 10;\n                            _this.data = data.list||data||_this.data;\n                            $(\"#totaldatas\").text(totals);\n                            $(\"#currentpage\").text(_this.curPage);\n                            $(\"#totalpage\").text(Math.ceil(totals/(pageSize||10)));\n                            $('#ctotals').text((data && data.list && data.list.length) || 0);\n                            _this.totalpage = Math.ceil(totals/(pageSize||10));\n                            if(_this.curPage == 1){\n                            //    $(\".mprev\").hide();\n                            }else{\n                                $(\".mprev\").show();\n                            }\n                            if(_this.data.length < 10){\n                            //    $(\".mnext\").hide();\n                            }else{\n                                $(\".mnext\").show();\n                            }\n                            var ctype = /qurey/.test(window.location.href) ? 1 : 0;\n                            _this.render(ctype);\n                            _this.renderChart();\n                            console.log('render over');\n                            setTimeout(function(){\n                                var roleid = JSON.parse(localStorage.getItem('userinfo')).role;\n                                var canedit = JSON.parse(localStorage.getItem('userinfo')).canedit;\n                                if(roleid == 2 && canedit != 1){\n                                    console.log('start to hide',$(\".list-edit-btn\"));\n                                    $(\".list-edit-btn\").hide();\n                                    $(\".list-del-btn\").hide();\n                                    $(\"#listBtns li.undis\").hide();\n                                }\n                            },100);\n                            overFlag = true;\n                        });\n\n                        _this.listenTo(Backbone.Events,\"search:done\",function(){\n                            _this.curPage = 1;\n                            _this.fetchData();\n                            Backbone.Events.trigger(\"curstation:change\",{});\n                        });\n                        _this.listenTo(Backbone.Events,\"export:done\",function(){\n                            console.log(_this.downloadUrl, window.location.hash);\n                            if(!_this.downloadUrl){\n                                return;\n                            }\n                            console.log(_this.downloadUrl, window.location.hash);\n                            var navData = nav.getSites();\n                            var ids;\n\n                            if(this.ids && this.ids.sid){\n                                ids = this.ids.sid;\n                            }else{\n                                ids = navData.ids.join(\",\");\n                            }\n                            var hash = window.location.hash;\n                            if(window.location.hash.indexOf(\"/qurey/\") > -1){\n                                var startTime = $(\"#beginTime\").val();\n                                var endTime = $(\"#endTime\").val();\n                                if(startTime && endTime){\n                                    startTime = +new Date(startTime);\n                                    endTime = +new Date(endTime);\n                                }\n\n                                if(hash.indexOf(\"Group\") > -1){\n                                    navData = nav.getGroups();\n                                    ids = navData.ids.join(\",\");\n                                }else if(hash.indexOf(\"Battery\") > -1){\n\n                                        var batteryId = nav.getBatterys();\n                                        ids = batteryId?batteryId.ids.join(','):'';\n                                }\n\n                                if(this.downloadUrl.indexOf(\"?\") > -1){\n                                    var durl = _this.downloadUrl + \"&isdownload=1&start=\"+startTime+\"&end=\"+endTime+\"&id=\"+ids;\n                                }else{\n                                    var durl = _this.downloadUrl + \"?isdownload=1&start=\"+startTime+\"&end=\"+endTime+\"&id=\"+ids;\n                                }\n\n\n                                window.location = durl;\n                                //query页面\n                            }else if(window.location.hash.indexOf(\"/report/\") > -1){\n                                //报表导出\n                                var startTime = $(\"#beginTime\").val();\n                                var endTime = $(\"#endTime\").val();\n                                if(startTime && endTime){\n                                    startTime = +new Date(startTime);\n                                    endTime = +new Date(endTime);\n                                }\n                                var type = $(\"#cationCategory\").val();\n                                if(this.downloadUrl.indexOf(\"?\") > -1){\n                                    var durl = _this.downloadUrl + \"&isdownload=1&start=\"+startTime+\"&end=\"+endTime+\"&id=\"+ids;\n                                }else{\n                                    var durl = _this.downloadUrl + \"?isdownload=1&start=\"+startTime+\"&end=\"+endTime+\"&id=\"+ids;\n                                }\n\n\n                                window.location = durl;\n                            }\n                            // _this.refresh();\n                        });\n                        _this.listenTo(Backbone.Events,\"listdata:refresh\",function(){\n                            Backbone.Events.trigger(\"curstation:change\",{});\n                            _this.refresh();\n                        });\n                        _this.listenTo(Backbone.Events,\"listdata:update:fail stationdata:get:fail\",function(data){\n                            if(data.response.code == \"-1\"){\n                                overFlag = true;\n                                _this.data = [];\n                                var ctype = /qurey/.test(window.location.href) ? 1 : 0;\n                                _this.render(ctype);\n                            }\n                        });\n                        _this.listenTo(Backbone.Events,\"listitem:delete\",function(data){\n                            alert(\"删除成功\");\n                            _this.refresh();\n                        });\n\n                        _this.listenTo(Backbone.Events,\"curstation:change\",function(data){\n                            _this.ids = null;\n                            if(!$(_this.el).length || !$(_this.el).is(\":visible\")){\n                                return;\n                            }\n                            var navData = _this.getNavData();\n                            console.log('nav data change', navData);\n                            if(/manage\\/battery/.test(window.location.href)){\n                                _this.fetchData();\n                                return;\n                            }\n                            if(typeof navData == 'undefined' || !navData || !navData.ids.length){\n                                _this.data = [];\n                                var ctype = /qurey/.test(window.location.href) ? 1 : 0;\n                                _this.render(ctype);\n                                // _this.render();\n                            }else{\n                                _this.fetchData();\n                            }\n                        });\n\n\n                        _this.extEvent && _this.extEvent();\n                    },\n                    openStationInfoDialog:function(){\n                        stationInfoDialog.show();\n                    },\n                    getCols:function(type){\n                        var customCols = common.cookie.getCookie(type+'Cols'),allCols = context.getListCols(type),retCols=[],width=0;\n                        if(customCols){\n                            customCols = customCols.split(',');\n                            retCols = common.filterArray(allCols,customCols,'data');\n                        }else{\n                            retCols = allCols;\n                        }\n                        $.each(retCols,function(i,col){\n                            width+=parseInt(col.width)||0;\n                        })\n                        return {data:retCols,width:width};\n                    },\n                    inRow:function(evt){\n                        var _this = this;\n                        _this.changeRowClass($(evt.currentTarget),'highlight');\n                    },\n                    changeRowClass:function($tr,className){\n                        var _this = this,\n                            trIndex = $tr.index(),\n                            $tbodys = $(\"tbody\",_this.el),\n                            data = _this.getRowData($tr);\n\n                        // console.log(trIndex, data);\n                        if(!data || !data.data){\n                            return this;\n                        }\n\n                        $tbodys.each(function(i,tbody){\n                            var $tbody = $(tbody);\n                            $tbody.find(\"tr\").eq(trIndex).toggleClass(className);\n                        })\n\n                        return this;\n                    },\n                    selectRow:function(evt){\n                        var _this = this;\n                        _this.changeRowClass($(evt.currentTarget),'selected').triggerSelectEvent();\n                    },\n                    destroy:function(){\n                        this.remove();\n                        this.destoryPlugin();\n                        this.clearTables();\n                        $('#dataItem').off('click');\n                    },\n                    triggerSelectEvent:function(){\n                        //整理数据发送选择行\n                        var _this = this,\n                            selectedData = _this.listPlugin[0]?_this.listPlugin[0].rows('.selected').data():[],\n                            ids = [];\n                        $.each(selectedData,function(i,d){\n                            ids.push(d.sn_key);\n                        });\n                        Backbone.Events.trigger('row:select',ids);\n                    },\n                    getRowData:function(tr){\n                        var ret = {};\n                        $.each(this.listPlugin,function(i,p){\n                            ret.data = p.row(tr).data();\n                            if(ret.data){\n                                ret.index = p.row(tr).index();\n                                return false;\n                            }\n                        })\n                        return ret;\n                    },\n                    resetScrollBar:function(){},\n                    refresh:function(){\n                        //this.destoryPlugin();\n                        this.curPage = 1;\n                        this.fetchData();\n                    },\n                    updateList:function(){\n                        var _this = this;\n                        var _listdata = [].concat(_this.data),\n                            _lisiLen = _listdata.length;\n                        _this.listPlugin[0].rows().remove();\n                        /*_this.listPlugin[0].rows().every(function(rowIdx, tableLoop, rowLoop){\n                            if(_.isEqual(this.data(),_listdata[rowIdx])){\n                                return;\n                            }\n                            if(_listdata.length){\n                                this.data(_listdata.splice(0,1)[0]);\n                            }else{//删除\n                                this.remove().draw();\n                            }\n                        });*/\n                        if(_listdata.length){\n                            _this.listPlugin[0].rows.add(_listdata).draw();\n                        }\n\n                        if(_this.listPlugin[0].fixedColumns){\n                            _this.listPlugin[0].fixedColumns().update();\n                            _this.listPlugin[0].fixedColumns().relayout();\n                        }\n                        _this.listPlugin[0].draw();\n\n                        _this.checkAllRows();\n\n                    },\n                    fetchData:function(_param){\n                        var _param = _param || {};\n                        _param.page=this.curPage;\n                        API.getStationRealTimeData(_param);\n                    },\n                    getParam:function(){\n                        var curstation = context.getCurStations(),\n                            listType = context.getListType();\n\n                        return {\n                            listType:listType\n                        };\n                    },\n                    getColumnDefs:function(){\n                        return [\n                            {\n                                targets:0,\n                                render:function(data, type, row){\n                                    return '<label class=\"show-info\">'+ data +'</label>';\n                                }\n                            }\n                        ]\n                    },\n                    changeListBottom:function(type){\n                        //TODO:列表底部元素展示隐藏\n                    },\n                    destoryPlugin:function(){\n                        this.clearTables();\n                        this.listPlugin = [];\n                        return this;\n                    },\n                    clearTables:function(){\n                        try{\n                            if ( $.fn.dataTable.isDataTable( '#auto table' )){\n                                this.listPlugin[0].clear();\n                                this.listPlugin[0].destroy();\n                            }\n                            $(\"#list\").html($(\"#defaultListTpl\").html())\n                        }catch(e){}\n                    },\n                    render:function(){},\n                    renderChart:function(){},\n                    onAddStation:function(){}\n                }\n            },\n            station:{\n                extObj:{\n                    getNavData:function(){\n                        return nav.getSites();\n                    },\n                    selectedIds:null,\n                    events:{\n                        \"click .show_station_detail\":\"show_station_detail\"\n                    },\n                    extEvent:function(){\n                        var _this = this;\n                        _this.listenTo(Backbone.Events,\"stationColsChange\",function(data){\n                            console.log('station col change');\n                            _this.destoryPlugin();\n                            _this.render();\n                        });\n                    },\n                    show_station_detail:function(e){\n                        var id = [$(e.currentTarget).attr('id')];\n                        console.log('station pop clicked');\n\n                        console.log('id',id)\n                        if(id < 0){\n                            alert('请选择站点');\n                            return;\n                        }\n                        for(var i = 0 ; i < id.length ; i++){\n                            id[i] = id[i];\n                        }\n\n                        stationInfoDialog.show(id.join(\",\"));\n                    },\n                    fetchData:function(){\n                        var _param = {page:this.curPage};\n                        var navData = nav.getSites();\n                        var ids;\n\n                        if(this.ids && this.ids.sid){\n                            ids = this.ids.sid;\n                        }else{\n                            ids = navData.ids.join(\",\");\n                        }\n                        // _param.page = this.curPage;\n                        $.extend(_param,{id:ids});\n                        this.selectedIds = ids;\n                        API.getStationRealTimeData(_param);\n                    },\n                    renderChart:function(){\n                        console.log('chart data', this.data);\n                        var wraps = $(\"#down .btn-wrap .btn-bg\");\n                        var ele = null;\n                        for(var i = 0 ; i < wraps.length ; i++){\n                            if($(wraps[i]).css('display') == \"block\"){\n                                console.log('yes block');\n                                ele = $(wraps[i]).find('.active').attr('field');\n                                break;\n                            }\n                        }\n                        console.log(ele);\n                    },\n                    render:function(ctype){\n                        var _this = this,colums = _this.getCols(ctype == 1 ? 'qurey_station':\"station\");\n                        console.log(ctype);\n                        //_this.destoryPlugin();\n                        if(_this.listPlugin && _this.listPlugin[0]){\n                            _this.updateList();\n                        }else{\n                            __webpack_require__.e(/*! AMD require */ 18).then(function() { var __WEBPACK_AMD_REQUIRE_ARRAY__ = [__webpack_require__(/*! fixedColumn */ \"./libs/dataTables.fixedColumns.min.js\")]; (function(){\n                                if(colums.width+580>$(\"#list\").width()){\n                                    dataTableDefaultOption.fixedColumns = {leftColumns:2};\n                                }else{\n\n                                    try{\n                                        delete colums.data[colums.data.length-1].width;\n                                    }catch(e){}\n                                }\n                                console.log(ui.getListWidth());\n                                _this.listPlugin.push($('#auto table').DataTable( $.extend(true,{\n                                    \"data\": _this.data,\n                                    \"scrollX\":ui.getListWidth(),\n                                    \"scrollY\":ui.getListHeight(),\n                                    \"columns\": [\n                                        { \"data\": \"site_name\", \"title\":\"站名\",width:150,\"sClass\":\"site_name_left\",render:function(data,type,itemData){\n                                            return \"<div class='show_station_detail' style='color:blue;cursor:pointer;' id='\"+itemData.sn_key+\"'>\"+data+\"</div>\"\n                                        }},\n                                        { \"data\": \"sid\",\"title\":\"站号\",width:50 },\n\n                                    ].concat(colums.data)\n                                },dataTableDefaultOption)));\n                                _this.checkAllRows();\n\n                                //_this.resetScrollBar();\n                            }).apply(null, __WEBPACK_AMD_REQUIRE_ARRAY__);}).catch(__webpack_require__.oe)\n                        }\n                        //this.clearTables();\n                        ui.resizeAutoListWidth();\n\n                        return this;\n                    }\n                }\n            },\n            battery:{\n                extObj:{\n\n                    prevIds:[],\n                    curStation:'',\n\n                    //el:$('#dataItem'),\n                    onNext:function(){\n                        this.nextStation();\n                        this._fetch();\n                    },\n                    onPrev:function(){\n                        this.prevStation();\n                        this._fetch();\n                    },\n                    nextStation:function(){\n                        if(!this.stations || !this.stations.ids.length){return}\n                        $(\"#page\").show();\n                        this.curStation && this.prevIds.push(this.curStation);\n                        this.curStation = this.stations.ids.shift();\n                    },\n                    prevStation:function(){\n                        if(!this.prevIds.length){return}\n                        $(\"#page\").show();\n                        this.curStation && this.stations.ids.unshift(this.curStation);\n                        this.curStation = this.prevIds.pop();\n                    },\n                    updatePageView:function(){\n                        $(\"#page .prev,#page .next\").hide();\n                        if(this.prevIds.length>0){\n                            $(\"#page .prev\").show();\n                        }\n                        if(this.stations.ids.length>0){\n                            $(\"#page .next\").show();\n                        }\n                    },\n\n                    getBatterys:function(){\n\n                        var stations = this.stations,\n                            curStation = this.curStation;\n\n                        this.stations.ids = this.stations.ids.sort(function(a,b){\n                            return a-b;\n                        })\n                        console.log('get batterys', stations, curStation);\n\n                        var batteryId = nav.getBatterys(curStation);\n                        console.log('batteryid', batteryId, curStation);\n                        if(curStation){\n                            console.log('重新显示分页')\n                            $(\"#page .cur\").html('当前站点：'+stations.map[curStation].title);\n                            $('#page').show();\n                            this.updatePageView();\n                        }\n                        return batteryId?batteryId.ids.join(','):'';\n                    },\n                    updateStations:function(){\n\n                        this.stations = nav.getTrueSites();\n                        console.log('stations',this.stations)\n                        this.prevIds = [];\n                        this.curStation = this.stations.ids[0];\n                        return this;\n                    },\n                    refresh:function(){\n                        this.fetchData();\n                    },\n                    getNavData:function(){\n                        this.stations = nav.getTrueSites();\n                        console.log(this.stations);\n                        this.curStation=this.stations.ids[0];\n                        this.getBatterys();\n                        this.fetchData();\n                    },\n                    fetchData:function(){\n                        this.updateStations();\n                        if(!this.curStation){\n                            this.curStation = this.stations.ids[0];\n                        }\n                         if(this.curStation && this.curStation == this.stations[0]){\n                             return;\n                         }\n                        this.nextStation();\n                        this._fetch();\n                    },\n                    _fetch:function(){\n                        var _this = this,_param = {};\n                        $.extend(_param,{\n                            id:this.getBatterys(this.curStation)\n                        });\n                        console.log('_param battery'+ $.toJSON(_param));\n                        if(!_param.id){\n                            _this.data=[];\n                            if(_this.listPlugin && _this.listPlugin[0]){\n                                _this.updateList();\n                            }else{\n                                _this.render();\n                            }\n                            return;\n                        }\n                        $('#page').show();\n                        API.getBatterysRealTimeData(_param);\n                    },\n                    extEvent:function(){\n                        var _this = this;\n                        _this.listenTo(Backbone.Events,\"batteryColsChange\",function(data){\n                            console.log('battery cols change')\n                            _this.destoryPlugin();\n                            _this.render();\n                        });\n                        $('#dataItem').on('click','#page .prev',function(){_this.onPrev()});\n                        $('#dataItem').on('click','#page .next',function(){_this.onNext()});\n                    },\n                    render:function(ctype){\n                        var _this = this,colums = _this.getCols(ctype == 1 ?'qurey_battery':'battery');\n                        console.log('battery data length', this.data.length);\n                        if(this.data.length == 0){\n                            $(\"#page\").hide();\n                        }else{\n                            $(\"#page\").show();\n                        }\n                        //this.destoryPlugin();\n                        if(_this.listPlugin && _this.listPlugin[0]){\n                            console.log('just update list');\n                            _this.updateList();\n                        }else{\n                            console.log('colums.width', colums.width);\n                            console.log('list.width',$('#list').width());\n                            __webpack_require__.e(/*! AMD require */ 18).then(function() { var __WEBPACK_AMD_REQUIRE_ARRAY__ = [__webpack_require__(/*! fixedColumn */ \"./libs/dataTables.fixedColumns.min.js\")]; (function(){\n                                if(colums.width + 450>$(\"#list\").width()){\n                                    console.log('width >')\n                                    dataTableDefaultOption.fixedColumns = {leftColumns:4};\n                                }else{\n                                    try{\n                                        delete colums.data[colums.data.length-1].width;\n                                    }catch(e){}\n                                }\n                                _this.listPlugin.push($('#auto table').DataTable( $.extend(true,{\n                                    \"data\": _this.data,\n                                    \"scrollX\":ui.getListWidth(),\n                                    \"scrollY\":ui.getListHeight(),\n                                    \"leftColumns\":4,\n                                    \"columns\": [\n                                        { \"data\": \"site_name\",title:\"站名\",width:120,\"sClass\":\"site_name_left\"},\n                                        { \"data\": \"sid\",title:\"站号\",width:50 },\n                                        { \"data\": \"gid\",title:\"组号\",width:50 },\n                                        { \"data\": \"bid\",title:\"电池号\",width:50  }\n                                    ].concat(colums.data)\n                                },dataTableDefaultOption)));\n                                _this.checkAllRows();\n                            }).apply(null, __WEBPACK_AMD_REQUIRE_ARRAY__);}).catch(__webpack_require__.oe)\n                        }\n                        return this;\n                    }\n                }\n            },\n            group:{\n                extObj:{\n                    getNavData:function(){\n                        return nav.getGroups();\n                    },\n                    fetchData:function(){\n                        var _param = {page:this.curPage};\n                        var navData = nav.getGroups();\n\n                        $.extend(_param,{id:navData.ids.join(\",\")});\n                        API.getGroupsData(_param);\n                    },\n                    extEvent:function(){\n                        var _this = this;\n                        _this.listenTo(Backbone.Events,\"groupColsChange\",function(data){\n                            _this.destoryPlugin();\n                            _this.render();\n                        });\n                    },\n                    render:function(ctype){\n                        var _this = this,colums = _this.getCols(ctype == 1?'qurey_group':'group');\n                        //_this.destoryPlugin();\n                        if(_this.listPlugin && _this.listPlugin[0]){\n                            _this.updateList();\n                        }else{\n                            __webpack_require__.e(/*! AMD require */ 18).then(function() { var __WEBPACK_AMD_REQUIRE_ARRAY__ = [__webpack_require__(/*! fixedColumn */ \"./libs/dataTables.fixedColumns.min.js\")]; (function(){\n                                if(colums.width+530>$(\"#list\").width()){\n                                    dataTableDefaultOption.fixedColumns = {leftColumns:3};\n                                }else{\n                                    try{\n                                        delete colums.data[colums.data.length-1].width;\n                                    }catch(e){}\n                                }\n                            _this.listPlugin.push($('#auto table').DataTable( $.extend(true,{},dataTableDefaultOption,{\n                                    \"data\": _this.data,\n                                    \"scrollX\":ui.getListWidth(),\n                                    \"scrollY\":ui.getListHeight(),\n                                    \"columns\": [\n                                        { \"data\": \"site_name\",title:\"站名\",width:120 ,\"sClass\":\"site_name_left\"},\n                                        { \"data\": \"sid\",title:\"站号\",width:50 },\n                                        { \"data\": \"gid\",title:\"组号\",width:50 }\n                                    ].concat(colums.data)\n                            })));\n                                _this.checkAllRows();\n                            }).apply(null, __WEBPACK_AMD_REQUIRE_ARRAY__);}).catch(__webpack_require__.oe)\n\n                        }\n\n                        return this;\n                    }\n                }\n            },\n            caution:{\n                extObj:{\n                    getNavData:function(){\n                        return nav.getSites();\n                    },\n                    fetchData:function(_param){\n                        var _param = {page:this.curPage};\n                        var navData = nav.getSites();\n\n                        $.extend(_param,{id:navData.ids.join(\",\"), type:0,});\n                        API.getCautionsData(_param);\n                    },\n                    events:{\n                        \"click .resolveBtn\":\"resove\",\n                        \"click .show_station_detail\": 'show_station_detail'\n                    },\n                    show_station_detail:function(e){\n                        var id = [$(e.currentTarget).attr('id')];\n                        console.log('station pop clicked');\n\n                        console.log('id',id)\n                        if(id < 0){\n                            alert('请选择站点');\n                            return;\n                        }\n                        for(var i = 0 ; i < id.length ; i++){\n                            id[i] = id[i];\n                        }\n\n                        stationInfoDialog.show(id.join(\",\"));\n                    },\n                    resove:function(e){\n                        ui.showUnsolveDialog({\n                          id:$(e.currentTarget).attr('pid'),\n                          suggestion:$(e.currentTarget).attr('suggestion'),\n                          type:$(e.currentTarget).attr('type'),\n                          sn_key:$(e.currentTarget).attr('sn_key'),\n                          code:$(e.currentTarget).attr('code'),\n                          desc:$(e.currentTarget).attr('desc'),\n                          realtime: true\n                        });\n                    },\n                    updateAtype: function(){\n                        console.log('atypes',this.types);\n                        for(var i = 0 ; i < this.types.length; i++){\n                            var obj = this.types[i];\n                            if(obj.atype == \"R\"){\n                                $(\"#ared\").html(obj.count+\"条\");\n                            }else if(obj.atype == \"O\"){\n                                $(\"#aoo\").html(obj.count+\"条\");\n                            }else if(obj.atype == \"Y\"){\n                                $(\"#ayellow\").html(obj.count+\"条\");\n                            }\n                        }\n                    },\n                    render:function(){\n                        //this.destoryPlugin();\n                        var _this = this;\n                        //ui.resizeAutoListWidth();\n                        if(_this.listPlugin && _this.listPlugin[0]){\n                            _this.updateList();\n                            _this.updateAtype()\n                        }else{\n                            _this.updateAtype()\n                            this.listPlugin.push($('#auto table').DataTable( $.extend(true,{},dataTableDefaultOption,{\n                                \"data\": this.data,\n                                \"paging\":false,\n                                \"scrollX\":ui.getListHeight(),\n                                //\"scrollY\":ui.getListHeight(),\n                                \"columns\": [\n\n                                    { \"data\": \"site_name\", \"title\":\"站名\",width:150,\"sClass\":\"site_name_left\",render:function(data,type,itemData){\n                                            return \"<div class='show_station_detail' style='color:blue;cursor:pointer;' id='\"+(itemData.sn_key.substring(0,10)+\"0000\")+\"'>\"+data+\"</div>\"\n                                    }},\n                                    { \"data\": \"sn_key\",title:\"站号\",width:100, render:function(data, type,itemData){\n                                        return itemData.sid;\n                                    }},\n                                    { \"data\": \"sn_key\",title:\"组号\",width:100, render:function(data, type,itemData){\n                                        if(itemData.type == \"battery\" || itemData.type == \"group\"){\n                                            return itemData.sn_key.substring(10,12);\n                                        }else{\n                                            return \"\";\n                                        }\n\n                                    }  },//组序列号\n                                    { \"data\": \"sn_key\",title:\"电池号\",width:100, render:function(data, type,itemData){\n                                        if(itemData.type == \"battery\")\n                                            return itemData.sn_key.substring(12,14);\n                                        else{\n                                            return \"\";\n                                        }\n                                    }},\n                                    { \"data\": \"time\",title:\"时间\" ,width:200},\n                                    { \"data\": \"desc\",title:\"警情内容\",width:200,render:function(data, type, itemData){\n                                        var desc = itemData.desc;\n                                        var color=\"\";\n                                        if(desc.indexOf(\"橙\") > -1){\n                                            color=\"#e7691d\"\n                                        }else if(desc.indexOf(\"黄\") > -1){\n                                            color=\"#fabd05\"\n                                        }else{\n                                            color=\"#f20f0f\"\n                                        }\n                                        return \"<div style='color:\"+color+\"'>\"+data+\"</div>\";\n                                    }},\n                                    { \"data\": \"current\",title:\"数值\",width:80,render:function(data, type, itemData){\n                                        var desc = itemData.desc;\n                                        var color=\"\";\n                                        if(desc.indexOf(\"橙\") > -1){\n                                            color=\"#e7691d\"\n                                        }else if(desc.indexOf(\"黄\") > -1){\n                                            color=\"#fabd05\"\n                                        }else{\n                                            color=\"#f20f0f\"\n                                        }\n                                        return \"<div style='font-weight:bold;color:\"+color+\"'>\"+data+\"</div>\";\n                                    }},\n                                    { \"data\": \"climit\",title:\"参考值\",width:80},\n                                    // { \"data\": \"markup\",title:\"操作记录\",width:400,render:function(data){\n                                    //     var a = data == null ? \"\": data;\n                                    //\n                                    //     return '<div style=\"text-align:left;\">'+a+'</div>';\n                                    // }},\n                                    {\n                                        \"data\": \"id\",\n                                        title:\"操作\",\n                                        width:100,\n                                        render: function (data,type,itemData) {\n                                            return _.template('<a class=\"resolveBtn\" pid=\"<%=id%>\" suggestion=\"<%=suggest%>\" sn_key=\"<%=sn_key%>\" type=\"<%=type%>\" code=\"<%=code%>\" desc=\"<%=desc%>\">忽略</a>')({\n                                                id:data,\n                                                suggest:itemData.suggest,\n                                                sn_key: itemData.sn_key,\n                                                type: itemData.type,\n                                                code: itemData.code,\n                                                desc: itemData.desc\n                                            });\n                                        }\n                                    },\n                                    //{ \"data\": \"alarm_process_and_memo\",title:\"处理过程、时间、管理员\" }\n                                ]\n                            })));\n                        }\n\n                        // _this.checkAllRows();\n                        return this;\n                    }\n                }\n            },\n            newstations:{\n                extObj:{\n                    getNavData:function(){\n                        return nav.getSites();\n                    },\n                    fetchData:function(_param){\n                        var _param = {page:this.curPage};\n\n                        API.getNewStationData(_param);\n                    },\n                    events:{\n                        \"click .resolveBtn\":\"resove\"\n                    },\n                    showStationOptionEditDialog:function(data){\n                        __webpack_require__.e(/*! AMD require */ 19).then(function() { var __WEBPACK_AMD_REQUIRE_ARRAY__ = [__webpack_require__(/*! dialogstationEdit */ \"./js/dialog-stationEdit.js\")]; (function(dialog){\n                            dialog && dialog.show(null,data);\n                        }).apply(null, __WEBPACK_AMD_REQUIRE_ARRAY__);}).catch(__webpack_require__.oe)\n                    },\n                    resove:function(e){\n                        var target=$(e.currentTarget);\n                        this.showStationOptionEditDialog({\n                            sid:target.attr('sid'),\n                            sn_key:target.attr('sn_key'),\n                            Groups:target.attr('Groups'),\n                            GroBats:target.attr(\"GroBats\"),\n                            CurSensor:target.attr(\"CurSensor\")\n                        });\n\n\n                        // ui.showUnsolveDialog({id:$(e.currentTarget).attr('pid'),suggestion:$(e.currentTarget).attr('suggestion')});\n                    },\n                    updateAtype: function(){\n                        console.log('atypes',this.types);\n                        for(var i = 0 ; i < this.types.length; i++){\n                            var obj = this.types[i];\n                            if(obj.atype == \"R\"){\n                                $(\"#ared\").html(obj.count+\"条\");\n                            }else if(obj.atype == \"O\"){\n                                $(\"#aoo\").html(obj.count+\"条\");\n                            }else if(obj.atype == \"Y\"){\n                                $(\"#ayellow\").html(obj.count+\"条\");\n                            }\n                        }\n                    },\n                    render:function(){\n                        //this.destoryPlugin();\n                        var _this = this;\n                        //ui.resizeAutoListWidth();\n                        if(_this.listPlugin && _this.listPlugin[0]){\n                            _this.updateList();\n\n                        }else{\n\n                            this.listPlugin.push($('#auto table').DataTable( $.extend(true,{},dataTableDefaultOption,{\n                                \"data\": this.data,\n                                \"paging\":false,\n                                \"scrollX\":ui.getListHeight(),\n                                //\"scrollY\":ui.getListHeight(),\n                                \"columns\": [\n\n                                    { \"data\": \"sn_key\",title:\"物理地址\"},\n                                    { \"data\": \"CurSensor\",title:\"电流传感安装状态\"},\n                                    { \"data\": \"sid\",title:\"站号\"},\n                                    { \"data\": \"Groups\",title:\"组数\"},\n                                    { \"data\": \"GroBats\",title:\"电池数\"},\n                                    { \"data\": \"record_time\",title:\"时间\"},//组序列号\n\n                                    {\n                                        \"data\": \"id\",\n                                        title:\"操作\",\n                                        width:150,\n                                        render: function (data,type,itemData) {\n                                            return _.template('<a class=\"resolveBtn\" sn_key=\"<%=sn_key%>\" GroBats=\"<%=GroBats%>\" sid=\"<%=sid%>\" Groups=\"<%=Groups%>\" CurSensor=\"<%=CurSensor%>\" >添加</a>')(itemData);\n                                        }\n                                    },\n                                    //{ \"data\": \"alarm_process_and_memo\",title:\"处理过程、时间、管理员\" }\n                                ]\n                            })));\n                        }\n\n                        // _this.checkAllRows();\n                        return this;\n                    }\n                }\n            },\n            ignores:{\n                extObj:{\n                    getNavData:function(){\n                        return nav.getSites();\n                    },\n                    fetchData:function(_param){\n                        var _param = {page:this.curPage};\n                        var navData = nav.getSites();\n                        var ids;\n\n                        if(this.ids && this.ids.sid){\n                            ids = this.ids.sid;\n                        }else{\n                            ids = navData.ids.join(\",\");\n                        }\n\n                        $.extend(_param,{id:ids});\n                        \n                        API.getIgnoresData(_param);\n                    },\n                    events:{\n                        \"click .resolveBtn\":\"resove\"\n                    },\n                    showStationOptionEditDialog:function(data){\n                        __webpack_require__.e(/*! AMD require */ 19).then(function() { var __WEBPACK_AMD_REQUIRE_ARRAY__ = [__webpack_require__(/*! dialogstationEdit */ \"./js/dialog-stationEdit.js\")]; (function(dialog){\n                            dialog && dialog.show(null,data);\n                        }).apply(null, __WEBPACK_AMD_REQUIRE_ARRAY__);}).catch(__webpack_require__.oe)\n                    },\n                    resove:function(e){\n                        if(confirm(\"是否确定取消忽略\")){\n                            API.deleteIgnore({\n                                sn_key:$(e.currentTarget).attr('sn_key'),\n                                code:$(e.currentTarget).attr('code'),\n                                type: $(e.currentTarget).attr('type'),\n                            });\n                            this.refresh();\n                        }\n                    },\n                    render:function(){\n                        var _this = this;\n                        if(_this.listPlugin && _this.listPlugin[0]){\n                            _this.updateList();\n\n                        }else{\n\n                            this.listPlugin.push($('#auto table').DataTable( $.extend(true,{},dataTableDefaultOption,{\n                                \"data\": this.data,\n                                \"paging\":false,\n                                \"scrollX\":ui.getListHeight(),\n                                //\"scrollY\":ui.getListHeight(),\n                                \"columns\": [\n\n                                    { \"data\": \"site_name\",title:\"站名\"},\n                                    { \"data\": \"sid\",title:\"站号\"},\n                                    { \"data\": \"desc\",title:\"警情描述\"},\n                                    { \"data\": \"updateTime\",title:\"时间\"},\n                                    { \"data\": \"markup\",title:\"备注\"},\n                                    { \"data\": \"operator\",title:\"操作人\"},\n                                    {\n                                        \"data\": \"id\",\n                                        title:\"取消忽略\",\n                                        width:150,\n                                        render: function (data,type,itemData) {\n                                            return _.template('<a class=\"resolveBtn\" sn_key=\"<%=sn_key%>\" code=\"<%=code%>\" type=\"<%=type%>\">取消忽略</a>')(itemData);\n                                        }\n                                    },\n                                ]\n                            })));\n                        }\n                        return this;\n                    }\n                }\n            },\n            // 系统报警\n            systemAlarm:{\n                extObj:{\n                    getNavData:function(){\n                        return nav.getSites();\n                    },\n                    fetchData:function(_param){\n                        var _param = {page:this.curPage};\n                        API.getSystemAlarm(_param);\n                    },\n\n                    render:function(){\n                        //this.destoryPlugin();\n                        var _this = this;\n                        //ui.resizeAutoListWidth();\n                        if(_this.listPlugin && _this.listPlugin[0]){\n                            _this.updateList();\n\n                        }else{\n\n                            this.listPlugin.push($('#auto table').DataTable( $.extend(true,{},dataTableDefaultOption,{\n                                \"data\": this.data,\n                                \"paging\":false,\n                                \"scrollX\":ui.getListHeight(),\n                                //\"scrollY\":ui.getListHeight(),\n                                \"columns\": [\n                                    { \"data\": \"site_name\",title:\"站名\"},\n                                    { \"data\": \"sid\",title:\"站号\"},\n                                    { \"data\": \"station\",title:\"物理地址\"},\n                                    { \"data\": \"record_time\",title:\"时间\"},//组序列号\n                                    { \"data\": \"desc\", title:'故障描述'},\n                                    { \"data\": \"tips\", title:'建议处理方式'}\n                                ]\n                            })));\n                        }\n\n                        // _this.checkAllRows();\n                        return this;\n                    }\n                }\n            },\n\n\n            \"stationInfo_stationSituation\":{\n                extObj:{\n                    events:{\n                        \"click .list-edit-btn\":\"onEdit\",\n                        \"click .list-edit-text\":\"onEdit\",\n                        \"click .list-del-btn\":\"onDel\",\n                        \"click .list-validate-btn\":\"onValidate\",\n                        \"click .list-send-btn\": \"onSendBtn\",\n                        \"mouseover .dataTable tr\":\"inRow\",\n                        \"mouseout .dataTable tr\":\"inRow\"\n                    },\n                    onSendBtn: function(e){\n                        ui.showSendDataDialog($(e.currentTarget).attr('pid'));\n                    },\n                    onEdit:function(e){\n                        ui.showStationEditDialog($(e.currentTarget).attr('pid'));\n                    },\n                    onDel:function(e){\n                        if(confirm(\"是否确定删除此站点\")){\n                            API.deleteStation({\n                                id:$(e.currentTarget).attr('pid')\n                            });\n                            this.refresh();\n                        }\n                    },\n                    onValidate:function(e){\n                        API.checkStation({\n                            id:$(e.currentTarget).attr('pid'),\n                            serial_number:$(e.currentTarget).attr('sn')\n                        });\n                    },\n                    extEvent:function(){\n                        var _this = this;\n                        this.listenTo(Backbone.Events,\"stationdata:delete\",function(data){\n                            alert(\"删除成功\");\n                            _this.refresh();\n                        });\n                        this.listenTo(Backbone.Events,\"station:check\",function(data){\n                            common.loadTips.close();\n                            alert(\"校验成功\");\n\n                            _this.refresh();\n                        });\n                        this.listenTo(Backbone.Events,\"station:check:fail\",function(data){\n                            common.loadTips.close();\n                            alert('校验失败');\n\n                            // _this.refresh();\n                        });\n                    },\n                    getNavData:function(){\n                        return nav.getSites();\n                    },\n                    fetchData:function(_param){\n                        _param = _param || {};\n                        var navData = nav.getSites();\n                        var ids;\n\n                        if(this.ids && this.ids.sid){\n                            ids = this.ids.sid;\n                        }else{\n                            ids = navData.ids.join(\",\");\n                        }\n\n                        $.extend(_param,{id:ids});\n                        API.getStationsInfo(_param);\n                    },\n                    render:function(){\n                        var _this = this;\n                        _this.destoryPlugin();\n\n                        __webpack_require__.e(/*! AMD require */ 18).then(function() { var __WEBPACK_AMD_REQUIRE_ARRAY__ = [__webpack_require__(/*! fixedColumn */ \"./libs/dataTables.fixedColumns.min.js\")]; (function() {\n                            _this.listPlugin.push($('#auto table').DataTable( $.extend(true,{\n                                \"data\": _this.data,\n                                \"language\": {\n                                    \"emptyTable\": \"站点数据为空\"\n                                },\n                                \"scrollX\": ui.getListHeight(),\n                                \"scrollY\": ui.getListHeight(),\n                                \"fixedColumns\": {leftColumns: 2},\n                                \"columns\": [\n\n                                    { \"data\": \"sid\",title:\"站号\",width:80  },\n                                    {\n                                        \"data\": \"site_name\",\n                                        title:\"站点简称\",\n                                        width:100 ,\n                                        render: function (data,type,itemData) {\n                                            var tpl='';\n                                            tpl = '<div class=\"list-edit-text\" pid=\"'+itemData.id+'\">'+itemData.site_name+'</div>';\n\n                                            return tpl;\n                                        }\n                                    },\n                                    { \"data\": \"serial_number\",title:\"物理地址\",width:100},\n\n                                    {\n                                        \"data\": \"site_name\",\n                                        title:\"站点全称\",\n                                        width:100 ,\n                                        render: function (data,type,itemData) {\n                                            var tpl='';\n                                            tpl = '<div class=\"list-edit-text\" pid=\"'+itemData.id+'\">'+itemData.StationFullChineseName+'</div>';\n\n                                            return tpl;\n                                        }\n                                    },\n\n                                    { \"data\": \"site_location\",title:\"站点地址\",width:100  },\n                                    { \"data\": \"site_property\",title:\"站点性质\",width:150  },\n                                    { \"data\": \"areaname\",title:\"隶属区域\",width:150  },\n                                    { \"data\": \"fix_phone\",title:\"固定电话\"},\n                                    { \"data\": \"functionary\",title:\"负责人\",width:120,render:function(data,_,allData){\n                                        var html = [];\n                                        if(allData.functionary_sms == 1){\n                                            html.push('<span>')\n                                            html.push('<img src=\"/images/sms.png\">');\n                                            html.push(\"</span>\");\n                                        }\n\n\n                                        if(allData.functionary_mail){\n                                            html.push('<span>')\n                                            html.push('<img src=\"/images/email.png\">');\n                                            html.push(\"</span>\");\n                                        }\n\n                                        return \"<span>\"+data+\"</span>\"+html.join(\"\");\n                                    }},\n                                    { \"data\": \"functionary_phone\",title:\"负责人电话\",width:120},\n                                    { \"data\": \"device_owner\",title:\"设备负责人\",width:120},\n                                    { \"data\": \"device_owner_phone\",title:\"设备负责人电话\",width:120},\n\n                                    { \"data\": \"emergency_person\",title:\"紧急联系人姓名\",width:120 },\n                                    { \"data\": \"emergency_phone\",title:\"紧急联系人手机\",width:120  },\n                                    { \"data\": \"area_owner\",title:\"区域主管\",width:120,render:function(data,_,allData){\n                                        var html = [];\n                                        if(allData.area_owner_sms == 1){\n                                            html.push('<span>')\n                                            html.push('<img src=\"/images/sms.png\">');\n                                            html.push(\"</span>\");\n                                        }\n\n\n                                        if(allData.area_owner_mail){\n                                            html.push('<span>')\n                                            html.push('<img src=\"/images/email.png\">');\n                                            html.push(\"</span>\");\n                                        }\n\n                                        return \"<span>\"+data+\"</span>\"+html.join(\"\");\n                                    }},\n                                    { \"data\": \"area_owner_phone\",title:\"区域主管电话\",width:120},\n                                    { \"data\": \"parent_owner\",title:\"上级主管\",width:120,render:function(data,_,allData){\n                                        var html = [];\n                                        if(allData.parent_owner_sms == 1){\n                                            html.push('<span>')\n                                            html.push('<img src=\"/images/sms.png\">');\n                                            html.push(\"</span>\");\n                                        }\n\n\n                                        if(allData.parent_owner_mail){\n                                            html.push('<span>')\n                                            html.push('<img src=\"/images/email.png\">');\n                                            html.push(\"</span>\");\n                                        }\n\n                                        return \"<span>\"+data+\"</span>\"+html.join(\"\");\n                                    }},\n                                    { \"data\": \"parent_owner_phone\",title:\"上级主管电话\"},\n                                    { \"data\": \"groups\",title:\"电池组数\",width:100  },\n                                    { \"data\": \"batteries\",title:\"每组电池数\",width:80  },\n                                    { \"data\": \"postal_code\",title:\"邮政编码\",width:80  },\n                                    { \"data\": \"site_latitude\",title:\"站点纬度\",width:80  },\n                                    { \"data\": \"site_longitude\",title:\"站点经度\",width:80  },\n                                    { \"data\": \"ipaddress\",title:\"IP地址\",width:100  },\n                                    { \"data\": \"ipaddress_method\",title:\"控制器IP地址或方式\",width:150  },\n                                    { \"data\": \"site_control_type\",title:\"站点控制器型号\",width:100  },\n                                    { \"data\": \"bms_install_date\",title:\"BMS系统安装日期\",width:150  },\n                                    { \"data\": \"group_collect_type\",title:\"组电流采集器型号\",width:150  },\n                                    { \"data\": \"group_collect_num\",title:\"组电流采集器数量\",width:150  },\n                                    { \"data\": \"inductor_brand\",title:\"互感器品牌\",width:150  },\n                                    { \"data\": \"group_collect_install_type\",title:\"组电流采集器安装模式\",width:150  },\n                                    { \"data\": \"battery_collect_type\",title:\"电池数据采集器型号\",width:150  },\n                                    { \"data\": \"battery_collect_num\",title:\"电池数据采集器数量\",width:150  },\n                                    { \"data\": \"humiture_type\",title:\"环境温湿度方式\",width:150  },\n                                    { \"data\": \"has_light\",title:\"灯光报警\",width:80},\n                                    { \"data\": \"has_speaker\",title:\"声音报警\",width:80},\n                                    { \"data\": \"has_sms\",title:\"短信\",width:80},\n                                    { \"data\": \"has_smart_control\",title:\"智能控制\",width:80},\n                                    { \"data\": \"has_group_TH_control\",title:\"温湿度传感器\",width:150},\n                                    { \"data\": \"has_group_HO_control\",title:\"氢氧气传感器\",width:150},\n                                    { \"data\": \"device_mac\",title:\"网口MAC\",width:150},\n                                    { \"data\": \"remark\",title:\"备注\",width:150 },\n                                    {\n                                        data:\"id\",\n                                        render: function (data,type,itemData) {\n                                            var tpl='';\n                                            var sendBtnHtml = \"\";\n                                            var roleid = JSON.parse(localStorage.getItem('userinfo')).role;\n                                            if(roleid == 1){\n                                                sendBtnHtml = $(\"#sendSocketBtn\").html();\n                                            }\n                                            if(itemData.is_checked == \"1\"){\n                                                tpl = '<div style=\"width:240px\">'+$(\"#validateSuccess\").html()+sendBtnHtml+$(\"#editBtn\").html()+$(\"#delBtn\").html()+'</div>';\n                                            }else{\n                                                tpl = '<div style=\"width:240px\">'+$(\"#validateBtn\").html()+$(\"#editBtn\").html()+$(\"#delBtn\").html()+'</div>';\n                                            }\n                                            return _.template(tpl)({\n                                                id:data,\n                                                sn:itemData.serial_number\n                                            });\n                                        }\n                                    }\n                                ]\n                            },dataTableDefaultOption)));\n                            _this.checkAllRows();\n                        }).apply(null, __WEBPACK_AMD_REQUIRE_ARRAY__);}).catch(__webpack_require__.oe)\n                        return this;\n                    }\n                }\n            },\n            \"stationInfo_batterys\":{\n                extObj:{\n                    events:{\n                        \"click .list-edit-btn\":\"onEdit\",\n                        \"mouseover .dataTable tr\":\"inRow\",\n                        \"mouseout .dataTable tr\":\"inRow\"\n                    },\n                    onEdit:function(e){\n                        ui.showBatteryEditDialog($(e.currentTarget).attr('pid'));\n                    },\n\n                    getNavData:function(){\n                        return nav.getSites();\n                    },\n                    fetchData:function(_param){\n                        _param = _param || {};\n                        var navData = nav.getSites();\n                        var ids;\n\n                        if(this.ids && this.ids.sid){\n                            ids = this.ids.sid;\n                        }else{\n                            ids = navData.ids.join(\",\");\n                        }\n\n                        $.extend(_param,{id:ids});\n                        API.getBatteryInfosData(_param);\n                    },\n                    render:function(){\n                        var _this = this;\n                        _this.destoryPlugin();\n                        __webpack_require__.e(/*! AMD require */ 18).then(function() { var __WEBPACK_AMD_REQUIRE_ARRAY__ = [__webpack_require__(/*! fixedColumn */ \"./libs/dataTables.fixedColumns.min.js\")]; (function() {\n                            _this.listPlugin.push($('#auto table').DataTable( $.extend(true,{\n                                \"data\": _this.data,\n                                \"language\": {\n                                    \"emptyTable\": \"电池数据为空\"\n                                },\n                                \"scrollX\": ui.getListHeight(),\n                                \"scrollY\": ui.getListHeight(),\n                                \"fixedColumns\": {leftColumns: 2},\n                                \"columns\": [\n\n                                    { \"data\": \"sid\",title:\"站号\",width:100  },\n                                    { \"data\": \"site_name\",title:\"站点简称\",width:100  },\n                                    { \"data\": \"battery_factory\",title:\"生产厂家\",width:150  },\n                                    { \"data\": \"battery_num\",title:\"电池型号\",width:150  },\n                                    { \"data\": \"battery_date\",title:\"生产日期\",width:150  },\n                                    { \"data\": \"battery_voltage\",title:\"标称电压（V）\",width:150  },\n                                    { \"data\": \"battery_oum\",title:\"标称内阻（mΩ）\",width:150  },\n                                    { \"data\": \"battery_dianrong\",title:\"电池标称容量（Ah）\",width:150  },\n                                    { \"data\": \"battery_float_voltage\",title:\"浮充标准电压（V）\",width:150  },\n                                    { \"data\": \"battery_max_current\",title:\"最大充电电流（A）\",width:150  },\n                                    { \"data\": \"battery_max_discharge_current\",title:\"最大放电电流（A）\",width:150  },\n                                    { \"data\": \"battery_float_up\",title:\"浮充电压上限（V）\",width:150  },\n                                    { \"data\": \"battery_float_dow\",title:\"电池浮充电压下限（V）\",width:150  },\n                                    { \"data\": \"battery_discharge_down\",title:\"放电电压下限（V）\",width:150  },\n                                    { \"data\": \"battery_scrap_date\",title:\"强制报废日期\",width:150  },\n                                    { \"data\": \"battery_life\",title:\"设计寿命（年）\",width:150  },\n                                    { \"data\": \"battery_column_type\",title:\"电池级柱类型\",width:150  },\n                                    { \"data\": \"battery_temperature\",title:\"温度要求（℃）\",width:150  },\n                                    { \"data\": \"battery_humidity\",title:\"湿度要求（%）\",width:150  },\n                                    { \"data\": \"battery_type\",title:\"电池种类\",width:150  },\n                                    { \"data\": \"battery_factory_phone\",title:\"电池厂家联系电话\",width:150  },\n                                    { \"data\": \"remark\",title:\"备注\",width:150 },\n                                    {\n                                        data:\"id\",\n                                        render: function (data) {\n                                            return _.template('<div style=\"width:160px\">'+$(\"#editBtn\").html()+'</div>')({\n                                                id:data\n                                            });\n                                        }\n                                    }\n                                ]\n                            },dataTableDefaultOption)));\n                            _this.checkAllRows();\n                        }).apply(null, __WEBPACK_AMD_REQUIRE_ARRAY__);}).catch(__webpack_require__.oe)\n                        return this;\n                    }\n                }\n            },\n            //UPS信息表\n            \"stationInfo_upsInfo\":{\n                extObj:{\n                    events:{\n                        \"click .list-edit-btn\":\"onEdit\",\n                        \"click .list-del-btn\":\"onDel\",\n                        \"mouseover .dataTable tr\":\"inRow\",\n                        \"mouseout .dataTable tr\":\"inRow\"\n                    },\n                    onEdit:function(e){\n                        ui.showUPSEditDialog($(e.currentTarget).attr('pid'));\n                    },\n                    onDel:function(e){\n                        if(confirm(\"是否确定删除此UPS数据\")){\n                            API.deleteUps({\n                                id:$(e.currentTarget).attr('pid')\n                            });\n                        }\n                    },\n                    getNavData:function(){\n                        return nav.getSites();\n                    },\n                    fetchData:function(_param){\n                        _param = _param || {};\n                        var navData = nav.getSites();\n                        var ids;\n\n                        if(this.ids && this.ids.sid){\n                            ids = this.ids.sid;\n                        }else{\n                            ids = navData.ids.join(\",\");\n                        }\n\n                        $.extend(_param,{id:ids});\n                        API.getUpsInfosData(_param);\n                    },\n                    render:function(){\n                        var _this = this;\n                        _this.destoryPlugin();\n                        $('#auto').width('100%');\n                        __webpack_require__.e(/*! AMD require */ 18).then(function() { var __WEBPACK_AMD_REQUIRE_ARRAY__ = [__webpack_require__(/*! fixedColumn */ \"./libs/dataTables.fixedColumns.min.js\")]; (function() {\n                            _this.listPlugin.push($('#auto table').DataTable( $.extend(true,{\n                                \"data\": _this.data,\n                                \"language\": {\n                                    \"emptyTable\": \"UPS数据为空\"\n                                },\n                                \"scrollX\": ui.getListHeight(),\n                                \"scrollY\": ui.getListHeight(),\n                                \"fixedColumns\": {leftColumns: 2},\n                                \"columns\": [\n                                    { \"data\": \"sid\",title:\"站号\",width:80 },\n                                    { \"data\": \"site_name\",title:\"站名\",width:250 },\n\n                                    { \"data\": \"ups_factory\",title:\"生产厂家\",width:250 },\n                                    { \"data\": \"ups_type\",title:\"型号\",width:100 },\n                                    { \"data\": \"ups_create_date\",title:\"生产日期\",width:150 },\n                                    { \"data\": \"ups_install_date\",title:\"安装日期\",width:150 },\n                                    { \"data\": \"ups_power\",title:\"功率/容量（W/H）\",width:150 },\n                                    { \"data\": \"ups_power_in\",title:\"输入功率（W/A）\",width:150 },\n                                    { \"data\": \"ups_power_out\",title:\"输出功率（W/A）\",width:150 },\n                                    { \"data\": \"ups_battery_vol\",title:\"外接电池电压（V）\",width:150 },\n                                    { \"data\": \"ups_battery_current\",title:\"外接电池电流（A）\",width:150 },\n                                    { \"data\": \"ac_protect\",title:\"AC过流保护（V/A）\",width:150 },\n                                    { \"data\": \"dc_protect\",title:\"DC过流保护（V/A）\",width:150 },\n                                    { \"data\": \"on_net\",title:\"联网检测\",width:150 },\n                                    { \"data\": \"alarm_content\",title:\"报警内容\",width:150 },\n                                    { \"data\": \"discharge_protect\",title:\"放电保护值（%）\",width:150 },\n                                    { \"data\": \"redundancy_num\",title:\"冗余数量(台)\",width:150 },\n                                    { \"data\": \"floting_charge\",title:\"浮充电压（V）\",width:150 },\n                                    { \"data\": \"ups_vdc\",title:\"电压范围(V)\",width:150 },\n                                    { \"data\": \"ups_reserve_hour\",title:\"额定候备时间（W/H）\",width:250 },\n                                    { \"data\": \"ups_charge_mode\",title:\"充电方式\",width:100 },\n                                    { \"data\": \"ups_max_charge\",title:\"最大充电电流（A）\",width:150 },\n                                    { \"data\": \"ups_max_discharge\",title:\"最大放电电流（A）\",width:150 },\n                                    { \"data\": \"ups_period_days\",title:\"规定维护周期（天）\",width:150 },\n                                    { \"data\": \"ups_discharge_time\",title:\"维护放电时长（分钟）\",width:150 },\n                                    { \"data\": \"ups_discharge_capacity\",title:\"维护放电容量（%）\",width:150 },\n                                    { \"data\": \"ups_maintain_date\",title:\"维护到期日\",width:150 },\n                                    { \"data\": \"ups_vender_phone\",title:\"厂家联系电话\",width:120 },\n                                    { \"data\": \"ups_service\",title:\"服务商名称\",width:120 },\n                                    { \"data\": \"ups_vender\",title:\"联系人\",width:120 },\n                                    { \"data\": \"ups_service_phone\",title:\"服务商电话\",width:100 },\n                                    { \"data\": \"remark\",title:\"备注\",width:150 },\n                                    {\n                                        data:\"id\",\n                                        render: function (data) {\n                                            return _.template('<div style=\"width:80px\">'+$(\"#editBtn\").html()/*+$(\"#delBtn\").html()*/+'</div>')({\n                                                id:data\n                                            });\n                                        }\n                                    }\n                                ]\n                            },dataTableDefaultOption)));\n                            _this.checkAllRows();\n                        }).apply(null, __WEBPACK_AMD_REQUIRE_ARRAY__);}).catch(__webpack_require__.oe)\n                        return this;\n                    }\n                }\n            },\n            //BMS信息表\n            \"stationInfo_monitorSeller\":{\n                extObj:{\n                    events:{\n                        \"click .list-edit-btn\":\"onEdit\",\n                        \"click .list-del-btn\":\"onDel\",\n                        \"mouseover .dataTable tr\":\"inRow\",\n                        \"mouseout .dataTable tr\":\"inRow\"\n                    },\n                    onEdit:function(e){\n                        ui.showBMSEditDialog($(e.currentTarget).attr('pid'));\n                    },\n                    onDel:function(e){\n                        if(confirm(\"是否确定删除此UPS数据\")){\n                            API.deleteBMS({\n                                id:$(e.currentTarget).attr('pid')\n                            });\n                        }\n                    },\n                    fetchData:function(){\n                        API.getBMSInfosData();\n                    },\n                    render:function(){\n                        var _this = this;\n                        _this.destoryPlugin();\n                        $('#auto').width('100%');\n                        __webpack_require__.e(/*! AMD require */ 18).then(function() { var __WEBPACK_AMD_REQUIRE_ARRAY__ = [__webpack_require__(/*! fixedColumn */ \"./libs/dataTables.fixedColumns.min.js\")]; (function() {\n                            _this.listPlugin.push($('#auto table').DataTable( $.extend(true,{\n                                \"data\": _this.data,\n                                \"scrollX\":ui.getListHeight(),\n                                \"scrollY\":ui.getListHeight(),\n                                \"fixedColumns\": {leftColumns: 1},\n                                \"columns\": [\n\n                                    {data:'bms_company',title:'生产厂家',width:200},\n                                    {data:'bms_device_addr',title:'厂家地址',width:200},\n                                    {data:'bms_postcode',title:'邮编',width:200},\n                                    {data:'bms_url',title:'支持网址',width:200},\n                                    {data:'bms_tel',title:'支持固话',width:200},\n                                    {data:'bms_phone',title:'手机',width:200},\n                                    {data:'bms_service_phone',title:'服务商电话',width:200},\n                                    {data:'bms_service_name',title:'服务商名称',width:200},\n                                    {data:'bms_service_contact',title:'服务商联系人',width:200},\n                                    {data:'bms_service_url',title:'服务商地址',width:300},\n                                    {data:'bms_version',title:'软件版本号',width:150},\n                                    {data:'bms_update_mark',title:'软件升级记录',width:170},\n                                    {data:'bms_mark',title:'备注',width:300},\n                                    {\n                                        data:\"id\",\n                                        render: function (data) {\n                                            var roleid = JSON.parse(localStorage.getItem('userinfo')).role;\n                                            if(roleid != 1){\n                                                return \"\";\n                                            }else{\n                                                return _.template('<div style=\"width:160px\">'+$(\"#editBtn\").html()+$(\"#delBtn\").html()+'</div>')({\n                                                    id:data\n                                                });\n                                            }\n\n                                        }\n                                    }\n                                ]\n                            },dataTableDefaultOption)));\n                            _this.checkAllRows();\n                        }).apply(null, __WEBPACK_AMD_REQUIRE_ARRAY__);}).catch(__webpack_require__.oe)\n                        return this;\n                    }\n                }\n            },\n            //用户单位信息信息表\n            \"stationInfo_institutions\":{\n                extObj:{\n                    events:{\n                        \"click .list-edit-btn\":\"onEdit\",\n                        \"click .list-del-btn\":\"onDel\",\n                        \"mouseover .dataTable tr\":\"inRow\",\n                        \"mouseout .dataTable tr\":\"inRow\"\n                    },\n                    onEdit:function(e){\n                        ui.showCompanyEditDialog($(e.currentTarget).attr('pid'));\n                    },\n                    onDel:function(e){\n                        if(confirm(\"是否确定删除此UPS数据\")){\n                            API.deleteCompany({\n                                id:$(e.currentTarget).attr('pid')\n                            });\n                        }\n                    },\n                    fetchData:function(){\n                        API.getCompanyInfosData();\n                    },\n                    render:function(){\n                        var _this = this;\n                        _this.destoryPlugin();\n                        $('#auto').width('100%');\n                        __webpack_require__.e(/*! AMD require */ 18).then(function() { var __WEBPACK_AMD_REQUIRE_ARRAY__ = [__webpack_require__(/*! fixedColumn */ \"./libs/dataTables.fixedColumns.min.js\")]; (function() {\n                            _this.listPlugin.push($('#auto table').DataTable( $.extend(true,{\n                                \"data\": _this.data,\n                                \"scrollX\":ui.getListHeight(),\n                                \"scrollY\":ui.getListHeight(),\n                                \"fixedColumns\": {leftColumns: 1},\n                                \"columns\": [\n\n                                    {data:'company_name',title:'单位名称',width:150},\n                                    {data:'company_address',title:'单位地址',width:300},\n                                    {data:'area_name',title:'管辖'},\n                                    {data:'parent_area',title:'隶属',width:100,},\n                                    {data:'supervisor_name',title:'主管领导姓名',width:80},\n                                    {data:'supervisor_phone',title:'主管领导电话',width:100},\n                                    {data:'owner',title:'部门负责人',width:80},\n                                    {data:'owner_phone',title:'部门负责人电话',width:100},\n                                    {data:'longitude',title:'经度',width:80},\n                                    {data:'latitude',title:'纬度',width:80},\n                                    {data:'station_num',title:'所辖站点个数',width:80},\n                                    {data:'area_level',title:'隶属层级',width:100},\n                                    {data:'network_type',title:'联网方式',width:100},\n                                    {data:'bandwidth',title:'网络带宽',width:100},\n                                    {data:'ipaddr',title:'IP地址',width:100},\n                                    {data:'computer_brand',title:'上位机品牌',width:100},\n                                    {data:'computer_os',title:'上位机操作系统',width:100},\n                                    {data:'computer_conf',title:'主机配置',width:100},\n                                    {data:'browser_name',title:'浏览器名称',width:100},\n                                    {data:'server_capacity',title:'服务器容量',width:100},\n                                    {data:'server_type',title:'服务器型号',width:100},\n                                    {data:'cloud_address',title:'云空间地址',width:100},\n                                    {data:'backup_period',title:'数据备份周期',width:100},\n                                    {data:'backup_type',title:'数据备份方式',width:100},\n                                    {data:'supervisor_depname',title:'监控部门名称',width:100},\n                                    {data:'monitor_name1',title:'监控部门负责人',width:100},\n                                    {data:'monitor_phone1',title:'监控部门负责人电话',width:100},\n                                    {data:'monitor_name2',title:'其他联系人',width:100},\n                                    {data:'monitor_phone2',title:'其他联系人电话',width:100},\n                                    {data:'monitor_name3',title:'其他联系人',width:100},\n                                    {data:'monitor_phone3',title:'其他联系人电话',width:100},\n                                    {data:'monitor_tel1',title:'监控部门固定电话1',width:100},\n                                    {data:'monitor_tel2',title:'监控部门固定电话2',width:100},\n\n                                    {data:'duty_status',title:'值守状态/班次',width:80},\n                                    {data:'manage',title:'管理员',width:80},\n                                    {data:'viewer',title:'观察员',width:80},\n\n                                    { \"data\": \"remark\",title:\"备注\",width:150 },\n                                    {\n                                        data:\"id\",\n                                        render: function (data) {\n                                            return _.template('<div style=\"width:160px\">'+$(\"#editBtn\").html()+$(\"#delBtn\").html()+'</div>')({\n                                                id:data\n                                            });\n                                        }\n                                    }\n                                ]\n                            },dataTableDefaultOption)));\n                            _this.checkAllRows();\n                        }).apply(null, __WEBPACK_AMD_REQUIRE_ARRAY__);}).catch(__webpack_require__.oe)\n                        return this;\n                    }\n                }\n            },\n            \"manager_role\":{\n                extObj:{\n                    fetchData:function(_param){\n                        API.getRolesData(_param);\n                    },\n                    render:function(){\n                        this.destoryPlugin();\n                        this.clearTables();\n                        $(\"#addRole\").hide();\n                        $('#lock').hide();\n                        $('#auto').width('100%');\n                        this.listPlugin.push($('#auto table').DataTable( $.extend(true,{\n                         \"data\": this.data,\n                         \"scrollX\":ui.getListWidth(),\n                         \"columns\": [\n                            {\"data\": \"\", title: \"序号\"},\n                            {\"data\": \"id\", title: \"编号\"},\n                            {\"data\": \"rolename\", title: \"角色名称\"}\n                         ]\n                         },dataTableDefaultOption)));\n                        return this;\n                    }\n                }\n            },\n            //人员列表\n            \"manager_personal\":{\n                extObj:{\n                    events:{\n                        \"click .list-edit-btn\":\"onEdit\",\n                        \"click .list-del-btn\":\"onDel\"\n                    },\n                    onEdit:function(e){\n                        ui.showPersonalEditDialog($(e.currentTarget).attr('pid'));\n                    },\n                    onDel:function(e){\n                        if(confirm(\"是否确定删除此人员\")){\n                            API.deletePersonal({\n                                id:$(e.currentTarget).attr('pid')\n                            });\n                        }\n                    },\n                    fetchData:function(_param){\n                        API.getPersonalsData(_param);\n                    },\n                    render:function(){\n                        var _this = this;\n                        this.destoryPlugin();\n                        //this.clearTables();\n                        $('#lock').hide();\n                        __webpack_require__.e(/*! AMD require */ 18).then(function() { var __WEBPACK_AMD_REQUIRE_ARRAY__ = [__webpack_require__(/*! fixedColumn */ \"./libs/dataTables.fixedColumns.min.js\")]; (function() {\n                            _this.listPlugin.push($('#auto table').DataTable($.extend(true, {}, dataTableDefaultOption, {\n                                \"data\": _this.data,\n                                \"scrollX\": ui.getListHeight(),\n                                \"scrollY\": ui.getListHeight(),\n                                \"fixedColumns\": {leftColumns: 1},\n                                \"columns\": [\n                                    {\"data\": \"unit\", title: \"单位名称\"},\n                                    {\"data\": \"name\", title: \"姓名\"},\n                                    {\"data\": \"username\", title: \"登陆名\"},\n                                    {\"data\": \"phone\", title: \"联系电话\"},\n                                    {\"data\": \"backup_phone\", title: \"备用电话\"},\n                                    {\"data\": \"email\", title: \"邮箱\"},\n                                    {\"data\": \"postname\", title: \"职位\"},\n                                    {\"data\": \"duty_num\", title: \"班次\"},\n                                    {\"data\": \"location\", title: \"住址\"},\n                                    {\"data\": \"areaname\", title: \"管理范围\", render:function(data){\n                                        var a = data.split(\" \");\n                                        if(a.length > 1)\n                                            a.shift();\n                                        return \"<div>\"+a.join(\" \")+\"</div>\";\n                                    }},\n                                    {\"data\": \"rolename\", title: \"角色\"},\n\n                                    {\n                                        data:\"id\",\n                                        render: function (data) {\n                                            return _.template('<div style=\"width:160px\">'+$(\"#editBtn\").html()+$(\"#delBtn\").html()+'</div>')({\n                                                id:data\n                                            });\n                                        }\n                                    }\n                                ]\n                            })));\n                            _this.checkAllRows();\n                        }).apply(null, __WEBPACK_AMD_REQUIRE_ARRAY__);}).catch(__webpack_require__.oe)\n                        return this;\n                    }\n                }\n            },\n            \"message\":{\n                extObj:{\n                    events:{\n                        \"click .list-edit-btn\":\"onEdit\",\n                        \"click .list-del-btn\":\"onDel\",\n                        \"change .changed\": \"onChange\",\n                        \"mouseover .dataTable tr\":\"inRow\",\n                        \"mouseout .dataTable tr\":\"inRow\"\n                    },\n                    onChange: function(e){\n                        var field = $(e.currentTarget).attr('field');\n                        var id = $(e.currentTarget).attr(\"dataid\");\n                        var val = $(e.currentTarget).val();\n                        console.log(field,id,val);\n                        API.updateMessage({id:id, field:field,val:val});\n                    },\n                    fetchData:function(_param){\n                        API.getMessagesData(_param);\n                    },\n                    render:function(){\n                        var _this = this;\n                        this.destoryPlugin();\n                        //this.clearTables();\n                        $('#lock').hide();\n                        __webpack_require__.e(/*! AMD require */ 18).then(function() { var __WEBPACK_AMD_REQUIRE_ARRAY__ = [__webpack_require__(/*! fixedColumn */ \"./libs/dataTables.fixedColumns.min.js\")]; (function() {\n                            _this.listPlugin.push($('#auto table').DataTable($.extend(true, {}, dataTableDefaultOption, {\n                                \"data\": _this.data,\n                                \"scrollX\": ui.getListHeight(),\n                                \"scrollY\": ui.getListHeight(),\n                                \"fixedColumns\": {leftColumns: 1},\n                                \"columns\": [\n                                    {\"data\": \"id\", title: \"ID\"},\n                                    {\"data\": \"desc\", title: \"描述\", width:200},\n                                    {\"data\": \"en\", title: \"编码\"},\n                                    {\"data\": \"ignore\", title: \"是否可忽略\", width:100,render: function(data,_,allDate){\n                                            var html = [];\n                                            html.push('<select class=\"changed\" field=\"ignore\" dataid='+allDate.id+'>');\n                                            if(data == '1'){\n                                                html.push('<option value=1 selected>是</option>');\n                                                html.push('<option value=0>否</option>');\n                                            }else{\n                                                html.push('<option value=1>是</option>');\n                                                html.push('<option value=0 selected>否</option>');\n                                            }\n                                            html.push('</select>');\n                                            return html.join(\"\");\n                                        }},\n                                    {\"data\": \"send_email\", title: \"是否发送邮件\",width:100,\n                                        render: function(data,_,allDate){\n                                            var html = [];\n                                            html.push('<select class=\"changed\" field=\"send_email\" dataid='+allDate.id+'>');\n                                            if(data == '1'){\n                                                html.push('<option value=1 selected>是</option>');\n                                                html.push('<option value=0>否</option>');\n                                            }else{\n                                                html.push('<option value=1>是</option>');\n                                                html.push('<option value=0 selected>否</option>');\n                                            }\n                                            html.push('</select>');\n                                            return html.join(\"\");\n                                        }\n                                    },\n                                    {\"data\": \"send_msg\", title: \"是否发送短信\",width:100,render: function(data,_,allDate){\n                                            var html = [];\n                                            html.push('<select class=\"changed\" field=\"send_msg\" dataid='+allDate.id+'>');\n                                            if(data == '1'){\n                                                html.push('<option value=1 selected>是</option>');\n                                                html.push('<option value=0>否</option>');\n                                            }else{\n                                                html.push('<option value=1>是</option>');\n                                                html.push('<option value=0 selected>否</option>');\n                                            }\n                                            html.push('</select>');\n                                            return html.join(\"\");\n                                        }},\n                                ]\n                            })));\n                        }).apply(null, __WEBPACK_AMD_REQUIRE_ARRAY__);}).catch(__webpack_require__.oe)\n                        return this;\n                    }\n                }\n            },\n            //站参数\n            \"optionSetting_stationOption\":{\n                extObj:{\n                    events:{\n                        \"click .list-edit-btn\":\"onEdit\",\n                        \"mouseover .dataTable tr\":\"inRow\",\n                        \"mouseout .dataTable tr\":\"inRow\"\n                    },\n                    onEdit:function(e){\n                        var roleid = JSON.parse(localStorage.getItem(\"userinfo\")).role;\n                        if(roleid == 1){\n                            ui.showStationOptionEditDialog($(e.currentTarget).attr('pid'));\n                        }else{\n                            alert('您无编辑权限')\n                        }\n                    },\n                    fetchData:function(_param){\n                        var _param = {};\n                        var navData = nav.getSites();\n                        var ids;\n\n                        if(this.ids && this.ids.sid){\n                            ids = this.ids.sid;\n                        }else{\n                            ids = navData.ids.join(\",\");\n                        }\n                        console.log(navData);\n                        $.extend(_param,{id:ids});\n                        API.getSationOptionsData(_param);\n                    },\n                    render:function(){\n                        var _this = this;\n                        this.destoryPlugin();\n                        //this.clearTables();\n                        $('#lock').hide();\n                        __webpack_require__.e(/*! AMD require */ 18).then(function() { var __WEBPACK_AMD_REQUIRE_ARRAY__ = [__webpack_require__(/*! fixedColumn */ \"./libs/dataTables.fixedColumns.min.js\")]; (function() {\n                            _this.listPlugin.push($('#auto table').DataTable($.extend(true, {}, dataTableDefaultOption, {\n                                \"data\": _this.data,\n                                \"scrollX\": ui.getListHeight(),\n                                \"scrollY\": ui.getListHeight(),\n                                \"fixedColumns\": {leftColumns: 3},\n                                \"columns\": [\n                                    {\"data\": \"sn_key\", title: \"物理地址\",width:100},\n                                    {\"data\": \"site_name\", title: \"站名称\",width:100},\n                                    {\"data\": \"sid\", title: \"站号\",width:100},\n                                    {\"data\": \"Groups\", title: \"站内组数\",width:100},\n                                    {\"data\": \"GroBats\", title: \"每组电池数\",width:100},\n                                    {\"data\": \"CurSensor\", title: \"电流传感安装状态\",width:100},\n                                    {\"data\": \"Time_MR\", title: \"内阻测量间隔\",width:100},\n                                    {\"data\": \"SampleInt\", title: \"数据间隔\",width:100},\n                                    {\"data\": \"MaxTem_R\", title: \"高温报警_红\",width:100},\n                                    {\"data\": \"MaxTem_O\", title: \"高温报警_橙\",width:100},\n                                    {\"data\": \"MaxTem_Y\", title: \"高温报警_黄\",width:100},\n                                    {\"data\": \"MinTem_R\", title: \"低温报警_红\",width:100},\n                                    {\"data\": \"MinTem_O\", title: \"低温报警_橙\",width:100},\n                                    {\"data\": \"MinTem_Y\", title: \"低温报警_黄\",width:100},\n                                    {\"data\": \"MaxHum_R\", title: \"高湿报警_红\",width:100},\n                                    {\"data\": \"MaxHum_O\", title: \"高湿报警_橙\",width:100},\n                                    {\"data\": \"MaxHum_Y\", title: \"高湿报警_黄\",width:100},\n                                    {\"data\": \"MinHum_R\", title: \"低湿报警_红\",width:100},\n                                    {\"data\": \"MinHum_O\", title: \"低湿报警_橙\",width:100},\n                                    {\"data\": \"MinHum_Y\", title: \"低湿报警_黄\",width:100},\n                                    {\"data\": \"CurRange\", title: \"站电流量程\",width:100},\n                                    {\"data\": \"KI\", title: \"站电流系数\",width:100},\n                                    {\"data\": \"ZeroCurADC\", title: \"站电流零位\",width:100},\n                                    {\"data\": \"DisChaLim_R\", title: \"放电报警_红\",width:100},\n                                    {\"data\": \"DisChaLim_O\", title: \"放电报警_橙\",width:100},\n                                    {\"data\": \"DisChaLim_Y\", title: \"放电报警_黄\",width:100},\n                                    {\"data\": \"ChaLim_R\", title: \"充电报警_红\",width:100},\n                                    {\"data\": \"ChaLim_O\", title: \"充电报警_橙\",width:100},\n                                    {\"data\": \"ChaLim_Y\", title: \"充电报警_黄\",width:100},\n                                    {\"data\": \"HiVolLim_R\", title: \"高压报警_红\",width:100},\n                                    {\"data\": \"HiVolLim_O\", title: \"高压报警_橙\",width:100},\n                                    {\"data\": \"HiVolLim_Y\", title: \"高压报警_黄\",width:100},\n                                    {\"data\": \"LoVolLim_R\", title: \"低压报警_红\",width:100},\n                                    {\"data\": \"LoVolLim_O\", title: \"低压报警_橙\",width:100},\n                                    {\"data\": \"LoVolLim_Y\", title: \"低压报警_黄\",width:100},\n                                    {\"data\": \"ChaCriterion\", title: \"站充放电判据\",width:100},\n\n\n                                    {\n                                        data:\"sn_key\",\n                                        render: function (data) {\n                                            var roleid = JSON.parse(localStorage.getItem('userinfo')).role;\n\n                                            if(roleid!=1){\n                                                return \"\";\n                                            }\n                                            return _.template($(\"#editBtn\").html())({\n                                                id:data\n                                            });\n                                        }\n                                    }\n                                ]\n                            })));\n                        }).apply(null, __WEBPACK_AMD_REQUIRE_ARRAY__);}).catch(__webpack_require__.oe)\n                        return this;\n                    }\n                }\n            },\n            \"optionSetting_groupOption\":{\n                extObj:{\n                    events:{\n                        \"click .list-edit-btn\":\"onEdit\",\n                        \"mouseover .dataTable tr\":\"inRow\",\n                        \"mouseout .dataTable tr\":\"inRow\"\n                    },\n                    onEdit:function(e){\n                        var roleid = JSON.parse(localStorage.getItem(\"userinfo\")).role;\n                        if(roleid == 1){\n                            ui.showGroupOptionEditDialog($(e.currentTarget).attr('pid'));\n                        }else{\n                            alert('您无编辑权限')\n                        }\n                    },\n                    fetchData:function(_param){\n                        _param = _param || {};\n                        var navData = nav.getSites();\n                        var ids;\n\n                        if(this.ids && this.ids.sid){\n                            ids = this.ids.sid;\n                        }else{\n                            ids = navData.ids.join(\",\");\n                        }\n                        console.log(navData);\n                        $.extend(_param,{id:ids});\n                        API.getGroupOptionData(_param);\n                    },\n                    render:function(){\n                        var _this = this;\n                        this.destoryPlugin();\n                        //this.clearTables();\n                        $('#lock').hide();\n                        __webpack_require__.e(/*! AMD require */ 18).then(function() { var __WEBPACK_AMD_REQUIRE_ARRAY__ = [__webpack_require__(/*! fixedColumn */ \"./libs/dataTables.fixedColumns.min.js\")]; (function() {\n                            _this.listPlugin.push($('#auto table').DataTable($.extend(true, {}, dataTableDefaultOption, {\n                                \"data\": _this.data,\n                                \"scrollX\": ui.getListHeight(),\n                                \"scrollY\": ui.getListHeight(),\n                                \"fixedColumns\": {leftColumns: 2},\n                                \"columns\": [\n\n                                    {\"data\": \"site_name\", title: \"站名称\",width:100},\n                                    {\"data\": \"sid\", title: \"站号\",width:100},\n                                    {\"data\": \"GroBatNum\", title: \"每组电池数\",width:100},\n                                    {\"data\": \"CurRange\", title: \"组电流量程\",width:100},\n                                    {\"data\": \"KI\", title: \"组电流系数\",width:100},\n                                    {\"data\": \"ZeroCurADC\", title: \"组电流零位\",width:100},\n                                    {\"data\": \"DisChaLim_R\", title: \"组放电电流超上限_红\",width:100},\n                                    {\"data\": \"DisChaLim_O\", title: \"组放电电流将达上限_橙\",width:100},\n                                    {\"data\": \"DisChaLim_Y\", title: \"组放电电流偏高_黄\",width:100},\n                                    {\"data\": \"ChaLim_R\", title: \"组充电电流超上限_红\",width:100},\n                                    {\"data\": \"ChaLim_O\", title: \"组充电电流将达上限_橙\",width:100},\n                                    {\"data\": \"ChaLim_Y\", title: \"组充电电流偏高_黄\",width:100},\n                                    {\"data\": \"MaxTem_R\", title: \"组温度超上限_红\",width:100},\n                                    {\"data\": \"MaxTem_O\", title: \"组温度将达上限_橙\",width:100},\n                                    {\"data\": \"MaxTem_Y\", title: \"组温度偏高_黄\",width:100},\n                                    {\"data\": \"MinTem_R\", title: \"组温度超下限_红\",width:100},\n                                    {\"data\": \"MinTem_O\", title: \"组温度将达下限_橙\",width:100},\n                                    {\"data\": \"MinTem_Y\", title: \"组温度偏低_黄\",width:100},\n                                    {\"data\": \"ChaCriterion\", title: \"组充放电判据\",width:100},\n                                    {\n                                        data:\"sn_key\",\n                                        render: function (data) {\n                                            var roleid = JSON.parse(localStorage.getItem('userinfo')).role;\n\n                                            if(roleid!=1){\n                                                return \"\";\n                                            }\n                                            return _.template($(\"#editBtn\").html())({\n                                                id:data\n                                            });\n                                        }\n                                    }\n                                ]\n                            })));\n                        }).apply(null, __WEBPACK_AMD_REQUIRE_ARRAY__);}).catch(__webpack_require__.oe)\n                        return this;\n                    }\n                }\n            },\n            //电池参数\n            \"optionSetting_batteryOption\":{\n                extObj:{\n                    events:{\n                        \"click .list-edit-btn\":\"onEdit\",\n                        \"mouseover .dataTable tr\":\"inRow\",\n                        \"mouseout .dataTable tr\":\"inRow\"\n                    },\n                    onEdit:function(e){\n                        var roleid = JSON.parse(localStorage.getItem(\"userinfo\")).role;\n                        if(roleid == 1){\n                            ui.showBatteryOptionEditDialog($(e.currentTarget).attr('pid'));\n                        }else{\n                            alert('您无编辑权限')\n                        }\n                    },\n                    fetchData:function(_param){\n                        _param = _param || {};\n                        var navData = nav.getSites();\n                        var ids;\n\n                        if(this.ids && this.ids.sid){\n                            ids = this.ids.sid;\n                        }else{\n                            ids = navData.ids.join(\",\");\n                        }\n                        console.log(navData);\n                        $.extend(_param,{id:ids});\n                        API.getBatteryOptionsData(_param);\n                    },\n                    render:function(){\n                        var _this = this;\n                        this.destoryPlugin();\n                        $('#auto').width('100%');\n                        __webpack_require__.e(/*! AMD require */ 18).then(function() { var __WEBPACK_AMD_REQUIRE_ARRAY__ = [__webpack_require__(/*! fixedColumn */ \"./libs/dataTables.fixedColumns.min.js\")]; (function() {\n                            _this.listPlugin.push($('#auto table').DataTable($.extend(true, {}, dataTableDefaultOption, {\n                                \"data\": _this.data,\n                                \"scrollX\": ui.getListHeight(),\n                                \"scrollY\": ui.getListHeight(),\n                                \"fixedColumns\": {leftColumns: 2},\n                                \"columns\": [\n                                    {\"data\": \"site_name\", title: \"站名称\",width:100},\n                                    {\"data\": \"sid\", title: \"站号\",width:100},\n                                    {\"data\": \"KV\", title: \"电压系数\",width:100},\n                                    {\"data\": \"KT\", title: \"温度系数\",width:100},\n                                    {\"data\": \"KI\", title: \"激励电流系数\",width:100},\n                                    {\"data\": \"T0\", title: \"T0校准温度\",width:100},\n                                    {\"data\": \"ADC_T0\", title: \"T0温度码\",width:100},\n                                    {\"data\": \"T1\", title: \"T1校准温度\",width:100},\n                                    {\"data\": \"ADC_T1\", title: \"T1温度码\",width:100},\n                                    {\"data\": \"MaxU_R\", title: \"电池电压超上限_红\",width:100},\n                                    {\"data\": \"MaxU_O\", title: \"电池电压将达上限_橙\",width:100},\n                                    {\"data\": \"MaxU_Y\", title: \"电池电压偏高_黄\",width:100},\n                                    {\"data\": \"MinU_R\", title: \"电池电压超下限_红\",width:100},\n                                    {\"data\": \"MinU_O\", title: \"电池电压将达下限_橙\",width:100},\n                                    {\"data\": \"MinU_Y\", title: \"电池电压偏低_黄\",width:100},\n                                    {\"data\": \"MaxT_R\", title: \"电池温度超上限_红\",width:100},\n                                    {\"data\": \"MaxT_O\", title: \"电池温度将达上限_橙\",width:100},\n                                    {\"data\": \"MaxT_Y\", title: \"电池温度偏高_黄\",width:100},\n                                    {\"data\": \"MinT_R\", title: \"电池温度超下限_红\",width:100},\n                                    {\"data\": \"MinT_O\", title: \"电池温度将达下限_橙\",width:100},\n                                    {\"data\": \"MinT_Y\", title: \"电池温度偏低_黄\",width:100},\n                                    {\"data\": \"MaxR_R\", title: \"电池内阻超上限_红\",width:100},\n                                    {\"data\": \"MaxR_O\", title: \"电池内阻将达上限_橙\",width:100},\n                                    {\"data\": \"MaxR_Y\", title: \"电池内阻偏高_黄\",width:100},\n                                    {\"data\": \"MaxDevU_R\", title: \"电池电压偏差_红\",width:100},\n                                    {\"data\": \"MaxDevU_O\", title: \"电池电压偏差_橙\",width:100},\n                                    {\"data\": \"MaxDevU_Y\", title: \"电池电压偏差_黄\",width:100},\n                                    {\"data\": \"MaxDevT_R\", title: \"电池温度偏差_红\",width:100},\n                                    {\"data\": \"MaxDevT_O\", title: \"电池温度偏差_橙\",width:100},\n                                    {\"data\": \"MaxDevT_Y\", title: \"电池温度偏差_黄\",width:100},\n                                    {\"data\": \"MaxDevR_R\", title: \"电池内阻偏差_红\",width:100},\n                                    {\"data\": \"MaxDevR_O\", title: \"电池内阻偏差_橙\",width:100},\n                                    {\"data\": \"MaxDevR_Y\", title: \"电池内阻偏差_黄\",width:100},\n                                    {\n                                        data:\"sn_key\",\n                                        render: function (data) {\n                                            var roleid = JSON.parse(localStorage.getItem('userinfo')).role;\n\n                                            if(roleid!=1){\n                                                return \"\";\n                                            }\n                                            return _.template($(\"#editBtn\").html())({\n                                                id:data\n                                            });\n                                        }\n                                    }\n                                ]\n                            })));\n                        }).apply(null, __WEBPACK_AMD_REQUIRE_ARRAY__);}).catch(__webpack_require__.oe)\n                        return this;\n                    }\n                }\n            },\n            //门限\n            \"limitationSetting\":{\n                extObj:{\n                    events:{\n                        \"click .list-edit-btn\":\"onEdit\",\n                        \"mouseover .dataTable tr\":\"inRow\",\n                        \"mouseout .dataTable tr\":\"inRow\"\n                    },\n                    onEdit:function(e){\n                        ui.showLimitationEditDialog($(e.currentTarget).attr('pid'));\n                    },\n                    fetchData:function(_param){\n                        API.getStationsInfo(_param);\n                    },\n                    render:function() {\n                        var _this = this;\n                        _this.destoryPlugin();\n                        __webpack_require__.e(/*! AMD require */ 18).then(function() { var __WEBPACK_AMD_REQUIRE_ARRAY__ = [__webpack_require__(/*! fixedColumn */ \"./libs/dataTables.fixedColumns.min.js\")]; (function () {\n                            _this.listPlugin.push($('#auto table').DataTable($.extend(true, {\n                                \"data\": _this.data,\n                                \"language\": {\n                                    \"emptyTable\": \"站点数据为空\"\n                                },\n                                \"scrollX\": ui.getListHeight(),\n                                \"scrollY\": ui.getListHeight(),\n                                \"fixedColumns\": {leftColumns: 1},\n                                \"columns\": [\n\n                                    {\"data\": \"sid\", title: \"站号\", width: 100},\n                                    {\"data\": \"site_name\", title: \"站点简称\", width: 200},\n                                    {\"data\": \"serial_number\", title: \"物理地址\", width: 250},\n                                    {\n                                        data: \"serial_number\",\n                                        render: function (data) {\n                                            return _.template('<div style=\"width:80px; margin:0px auto\">'+$(\"#editBtn\").html()+'</div>')({\n                                                id: data\n                                            });\n                                        }\n                                    }\n                                ]\n                            }, dataTableDefaultOption)));\n\n                        }).apply(null, __WEBPACK_AMD_REQUIRE_ARRAY__);}).catch(__webpack_require__.oe)\n                    }\n                }\n            },\n            //外控设备\n            \"equipmentSetting\":{\n                extObj:{\n                    events:{\n                        \"click .list-edit-btn\":\"onEdit\",\n                        \"click .list-del-btn\":\"onDel\",\n                        \"mouseover .dataTable tr\":\"inRow\",\n                        \"mouseout .dataTable tr\":\"inRow\"\n                    },\n                    onEdit:function(e){\n                        ui.showStationdeviceEditDialog($(e.currentTarget).attr('pid'));\n                    },\n                    onDel:function(e){\n                        if(confirm(\"是否确定删除此外控设备\")){\n                            API.deleteStationdevice({\n                                id:$(e.currentTarget).attr('pid')\n                            });\n                        }\n                    },\n                    fetchData:function(_param){\n                        API.getStationdeviceInfos(_param);\n                    },\n                    render:function() {\n                        var _this = this;\n                        _this.destoryPlugin();\n                        __webpack_require__.e(/*! AMD require */ 18).then(function() { var __WEBPACK_AMD_REQUIRE_ARRAY__ = [__webpack_require__(/*! fixedColumn */ \"./libs/dataTables.fixedColumns.min.js\")]; (function () {\n                            _this.listPlugin.push($('#auto table').DataTable($.extend(true, {\n                                \"data\": _this.data,\n                                \"language\": {\n                                    \"emptyTable\": \"站点数据为空\"\n                                },\n                                \"scrollX\": ui.getListHeight(),\n                                \"scrollY\": ui.getListHeight(),\n                                \"fixedColumns\": {leftColumns: 1},\n                                \"columns\": [\n\n                                    {\"data\": \"sid\", title: \"站号\", width: 100},\n                                    {\"data\": \"Device_name\", title: \"名称\", width: 100},\n                                    {\"data\": \"Device_fun\", title: \"功能\", width: 100},\n                                    {\"data\": \"Device_Factory_Name\", title: \"生产厂家\", width: 100},\n                                    {\"data\": \"Device_Factory_Address\", title: \"厂家地址\", width: 200},\n                                    {\"data\": \"Device_Factory_PostCode\", title: \"厂家邮编\", width: 100},\n                                    {\"data\": \"Device_Factory_website\", title: \"技术支持网址\", width: 150},\n                                    {\"data\": \"Device_Factory_Technology_cable_phone\", title: \"技术支持固话\", width: 100},\n                                    {\"data\": \"Device_Factory_Technology_cellphone\", title: \"技术支持手机\", width: 100},\n                                    {\n                                        data: \"id\",\n                                        render: function (data) {\n                                            return _.template('<div style=\"width:160px; margin:0px auto\">'+$(\"#editBtn\").html()+$(\"#clearBtn\").html()+'</div>')({\n                                                id: data\n                                            });\n                                        }\n                                    }\n                                ]\n                            }, dataTableDefaultOption)));\n\n                        }).apply(null, __WEBPACK_AMD_REQUIRE_ARRAY__);}).catch(__webpack_require__.oe)\n                    }\n                }\n            },\n            //报表：报警历史\n            \"reportCaution\":{\n                extObj:{\n                    fetchData:function(){\n                        var type = $(\"#cationCategory\").val();\n                        var param = {page:this.curPage,start:$('#beginTime').val()?+new Date($('#beginTime').val()):\"\", end: $('#endTime').val()?+new Date($('#endTime').val()):\"\"};\n                        if(type > 0){\n                            param.type = type;\n                        }\n                        API.getGerneralalarmlog(param);\n                    },\n                    downloadUrl:\"/api/index.php/gerneralalarm\",\n                    render:function() {\n                        var _this = this;\n                        _this.destoryPlugin();\n                        _this.listPlugin.push($('#auto table').DataTable($.extend(true, {\n                            \"data\": _this.data,\n                            \"language\": {\n                                \"emptyTable\": \"报表数据为空\"\n                            },\n                            \"scrollX\": ui.getListHeight(),\n                            \"scrollY\": ui.getListHeight(),\n                            \"columns\": [\n                                { \"data\": \"alarm_sn\",title:\"序号\" },\n                                { \"data\": \"alram_equipment\",title:\"站名\" ,render:function(data,type,itemData){\n                                    var color = ['red', 'green', '#f90']\n                                    return '<span style=\"color:white;background-color:'+color[itemData.alarm_emergency_level -1]+'\">'+itemData.alram_equipment+'</span>';\n                                }},\n                                { \"data\": \"alarm_para1_name\",title:\"站号\" },\n                                { \"data\": \"alarm_para2_name\",title:\"组号\" },//组序列号\n                                { \"data\": \"alarm_para3_name\",title:\"电池号\" },\n                                { \"data\": \"alarm_occur_time\",title:\"时间\" },\n                                { \"data\": \"alarm_content\",title:\"警情内容\" },\n                                { \"data\": \"alarm_para1_value\",title:\"数值\" },\n                                { \"data\": \"alarm_suggestion\",title:\"建议处理方式\" },\n                                // {\n                                //     \"data\": \"alarm_sn\",\n                                //     title:\"处理连接\",\n                                //     render: function (data,type,itemData) {\n                                //         return _.template('<a class=\"resolveBtn\" pid=\"<%=id%>\" suggestion=\"<%=suggestion%}\">未处理</a>')({\n                                //             id:data,\n                                //             suggestion:itemData.alarm_suggestion\n                                //         });\n                                //     }\n                                // },\n                                //{ \"data\": \"alarm_process_and_memo\",title:\"处理过程、时间、管理员\" }\n                            ]\n                        }, dataTableDefaultOption)));\n                    }\n                }\n            },\n            //报表：电池使用年限\n            \"batteryLife\":{\n                extObj:{\n                    fetchData:function(_param){\n\n                        var param = {page:this.curPage,start:$('#beginTime').val()?+new Date($('#beginTime').val()):\"\", end: $('#endTime').val()?+new Date($('#endTime').val()):\"\"};\n                        API.getByearlog(param);\n                    },\n                    downloadUrl:\"/api/index.php/report/byearlog\",\n                    render:function() {\n                        var _this = this;\n                        _this.destoryPlugin();\n                        _this.listPlugin.push($('#auto table').DataTable($.extend(true, {\n                            \"data\": _this.data,\n                            \"language\": {\n                                \"emptyTable\": \"报表数据为空\"\n                            },\n                            \"scrollX\": ui.getListHeight(),\n                            \"scrollY\": ui.getListHeight(),\n                            \"columns\": [\n\n                                {\"data\": \"brand\", title: \"品牌\", width: 100},\n                                {\"data\": \"battery_date\", title: \"生产日期\", width: 100},\n                                {\"data\": \"battery_install_date\", title: \"电池安装日期\", width: 100},\n                                {\"data\": \"U\", title: \"电池的电压\", width: 100},\n                                {\"data\": \"battery_oum\", title: \"出厂标称内阻\", width: 200},\n                                {\"data\": \"R\", title: \"电池的内阻\", width: 100},\n                                {\"data\": \"battery_scrap_date\", title: \"强制报废日期\"}\n                            ]\n                        }, dataTableDefaultOption)));\n                    }\n                }\n            } ,\n            //报表：偏离趋势报表\n            \"deviationTrend\":{\n                extObj:{\n                    fetchData:function(_param){\n                        var param = {page:this.curPage, start:$('#beginTime').val()?+new Date($('#beginTime').val()):\"\", end: $('#endTime').val()?+new Date($('#endTime').val()):\"\"};\n\n                        API.getDeviationTrend(param);\n                    },\n                    downloadUrl:\"/api/index.php/report/deviationTrend\",\n                    render:function() {\n                        var _this = this;\n                        _this.destoryPlugin();\n                        _this.listPlugin.push($('#auto table').DataTable($.extend(true, {\n                            \"data\": _this.data,\n                            \"language\": {\n                                \"emptyTable\": \"报表数据为空\"\n                            },\n                            \"scrollX\": ui.getListHeight(),\n                            \"scrollY\": ui.getListHeight(),\n                            \"columns\": [\n\n                                {\"data\": \"site_name\", title: \"站名\", width: 100},\n                                {\"data\": \"sid\", title: \"站号\", width: 100},\n                                {\"data\": \"record_time\", title: \"时间\", width: 100},\n                                {\"data\": \"avgU\", title: \"电压均值\", width: 100,render:function(data){\n                                    if(!data){\n                                        return \"\";\n                                    }\n                                    return parseFloat(data).toFixed(2);\n                                }},\n                                {\"data\": \"avgT\", title: \"温度均值\", width: 100,render:function(data){\n                                    if(!data){\n                                        return \"\";\n                                    }\n                                    return parseFloat(data).toFixed(2);\n                                }},\n                                {\"data\": \"avgR\", title: \"内阻均值\", width: 100,render:function(data){\n                                    if(!data){\n                                        return \"\";\n                                    }\n                                    return parseFloat(data).toFixed(2);\n                                }},\n                                {\"data\": \"avgU\", title: \"电压偏离度(%)\",render:function(data){\n                                    if(!data){\n                                        return \"\";\n                                    }\n                                    return (Math.abs(0.3-data)/0.3*100).toFixed(2);\n                                }},\n                                {\"data\": \"avgT\", title: \"温度偏离度(%)\",render:function(data){\n                                    if(!data){\n                                        return \"\";\n                                    }\n                                    return (Math.abs(3-data)/3*100).toFixed(2);\n                                }},\n                                {\"data\": \"avgR\", title: \"内阻偏离度(%)\",render:function(data){\n                                    if(!data){\n                                        return \"\";\n                                    }\n                                    return (Math.abs(5-data)/5*100).toFixed(2);\n                                }}\n                            ]\n                        }, dataTableDefaultOption)));\n                    }\n                }\n            } ,\n            //报表：充放电统计表\n            \"chargeOrDischarge\":{\n                extObj:{\n                    fetchData:function(_param){\n                        var param = {page:this.curPage,start:$('#beginTime').val()?+new Date($('#beginTime').val()):\"\", end: $('#endTime').val()?+new Date($('#endTime').val()):\"\"};\n                        API.getChargeOrDischarge(_param);\n                    },\n                    render:function() {\n                        var _this = this;\n                        _this.destoryPlugin();\n                        _this.listPlugin.push($('#auto table').DataTable($.extend(true, {\n                            \"data\": _this.data,\n                            \"language\": {\n                                \"emptyTable\": \"报表数据为空\"\n                            },\n                            \"scrollX\": ui.getListHeight(),\n                            \"scrollY\": ui.getListHeight(),\n                            \"columns\": [\n                                {\"data\": \"time\", title: \"序号\", width: 100},\n                                {\"data\": \"record_time\", title: \"记录时间\", width: 200},\n                                {\"data\": \"sid\", title: \"站点id\",width:100},\n                                {\"data\": \"site_name\", title: \"站点名称\", width: 300},\n                                {\"data\": \"BBbCharge\", title: \"充电状态\", width: 100, render: function(data){\n                                    return data == 1 ?'是':'否'\n                                }},\n                                {\"data\": \"BCbDisCharge\", title: \"放电状态\", render: function(data){\n                                    return data == 1 ?'是':'否'\n                                }},\n                            ]\n                        }, dataTableDefaultOption)));\n                    }\n                }\n            } ,\n            // 报表：UI日志：设置\n            \"reportUilog_options\":{\n                extObj:{\n                    fetchData:function(_param){\n                        API.getUserlog({page:this.curPage,type:'2', start:$('#beginTime').val()?+new Date($('#beginTime').val()):\"\", end: $('#endTime').val()?+new Date($('#endTime').val()):\"\"})\n                    },\n                    render:function() {\n                        var _this = this;\n                        _this.destoryPlugin();\n                        _this.listPlugin.push($('#auto table').DataTable($.extend(true, {\n                            \"data\": _this.data,\n                            \"language\": {\n                                \"emptyTable\": \"UI日志数据为空\"\n                            },\n                            \"scrollX\": ui.getListHeight(),\n                            \"scrollY\": ui.getListHeight(),\n                            \"columns\": [\n                                {\"data\": \"username\", title: \"用户\", width: 100},\n                                {\"data\": \"content\", title: \"操作内容\",render:function(_,__,data){\n                                    if(!data.newvalue){\n                                        return data.content;\n                                    }\n                                    var json = JSON.parse(data.newvalue);\n                                    if(json.site_name){\n                                        var site = json.site_name;\n                                        site = unescape(site.replace(/(u[a-z0-9]{4,4})/g,\"%$1\"));\n                                        console.log(site);\n                                        return data.content+\"(站名:\"+site+\")\";\n                                    }else{\n                                        return data.content\n                                    }\n                                }},\n                                {\"data\": \"modify_time\", title: \"操作时间\", width: 150}\n                            ]\n                        }, dataTableDefaultOption)));\n                    },\n                    downloadUrl:\"/api/index.php/userlog?type=2\"\n                }\n            }\n        };\n    //报表：UI日志：用户登录登出\n    listConfig.reportUilog_user = $.extend(true,{},listConfig.reportUilog_options,{\n        extObj:{\n            fetchData:function(_param){\n                API.getUserlog({page:this.curPage,type:'1', start:$('#beginTime').val()?+new Date($('#beginTime').val()):\"\", end: $('#endTime').val()?+new Date($('#endTime').val()):\"\"})\n            },\n            downloadUrl:\"/api/index.php/userlog?type=1\"\n        }\n    })\n    //报表：UI日志：其他\n    listConfig.reportUilog_other = $.extend(true,{},listConfig.reportUilog_options,{\n        extObj:{\n            fetchData:function(_param){\n                API.getUserlog({page:this.curPage,type:'3', start:$('#beginTime').val()?+new Date($('#beginTime').val()):\"\", end: $('#endTime').val()?+new Date($('#endTime').val()):\"\"})\n            },\n            downloadUrl:\"/api/index.php/userlog?type=3\"\n        }\n    })\n\n\n    //查询：UI日志：设置\n    listConfig.uilog_options = $.extend(true,{},listConfig.reportUilog_options,{\n        extObj:{\n            getNavData:function(){\n                return nav.getSites();\n            },\n            fetchData:function(_param){\n                API.getUserlog({page:this.curPage,type:'2', start:$('#beginTime').val()?+new Date($('#beginTime').val()):\"\", end: $('#endTime').val()?+new Date($('#endTime').val()):\"\"})\n            },\n            downloadUrl:\"/api/index.php/userlog?type=2\"\n        }\n    })\n    //查询：UI日志：用户登录登出\n    listConfig.uilog_user = $.extend(true,{},listConfig.reportUilog_user,{\n        extObj:{\n            fetchData:function(_param){\n                API.getUserlog({page:this.curPage,type:'1', start:$('#beginTime').val()?+new Date($('#beginTime').val()):\"\", end: $('#endTime').val()?+new Date($('#endTime').val()):\"\"})\n            },\n            downloadUrl:\"/api/index.php/userlog?type=1\"\n        }\n    })\n    //查询：UI日志：其他\n    listConfig.uilog_other = $.extend(true,{},listConfig.reportUilog_other,{\n        extObj:{\n            fetchData:function(_param){\n                API.getUserlog({page:this.curPage,type:'3', start:$('#beginTime').val()?+new Date($('#beginTime').val()):\"\", end: $('#endTime').val()?+new Date($('#endTime').val()):\"\"})\n            },\n            downloadUrl:\"/api/index.php/userlog?type=3\"\n        }\n    })\n    //查询：运行日志\n    listConfig.runlog = $.extend(true,{},listConfig.reportUilog_other,{\n        extObj:{\n            fetchData:function(_param){\n                API.getRunlog({page:this.curPage,start:$('#beginTime').val()?+new Date($('#beginTime').val()):\"\", end: $('#endTime').val()?+new Date($('#endTime').val()):\"\"})\n        },\n        render:function() {\n                var _this = this;\n                _this.destoryPlugin();\n                _this.listPlugin.push($('#auto table').DataTable($.extend(true, {\n                    \"data\": _this.data,\n                    \"language\": {\n                        \"emptyTable\": \"运行日志数据为空\"\n                    },\n                    \"scrollX\": ui.getListHeight(),\n                    \"scrollY\": ui.getListHeight(),\n                    \"columns\": [\n                        {\"data\": \"content\", title: \"内容\",align:\"left\",render:function(_,__,data){\n                            if(!data.newvalue){\n                                return data.content;\n                            }\n                            var json = JSON.parse(data.newvalue);\n                            if(json.site_name){\n                                var site = json.site_name;\n                                site = unescape(site.replace(/(u[a-z0-9]{4,4})/g,\"%$1\"));\n                                console.log(site);\n                                return data.content+\"(站名:\"+site+\")\";\n                            }else{\n                                return data.content\n                            }\n                        }},\n                        {\"data\": \"modify_time\", title: \"时间\", width: 150}\n                    ]\n                }, dataTableDefaultOption)));\n            }\n        }\n    })\n    //查询：站\n    listConfig.qureyStation = $.extend(true,{},listConfig.station,{\n        extObj:{\n            extEvent:function(){\n                var _this = this;\n                _this.listenTo(Backbone.Events,\"qurey_stationColsChange\",function(data){\n                    console.log('query station col change');\n                    _this.destoryPlugin();\n                    _this.render(1);\n                });\n            },\n            fetchData:function(){\n                var _param = {};\n                var navData = nav.getSites();\n                var ids;\n\n                if(this.ids && this.ids.sid){\n                    ids = this.ids.sid;\n                }else{\n                    ids = navData.ids.join(\",\");\n                }\n\n                $.extend(_param,{id:ids});\n                if($('#beginTime').val() == \"\"){\n                    alert('请选择时间');\n                    return;\n                }\n                if($('#startTime').val() == \"\"){\n                    alert('请选择时间');\n                    return;\n                }\n                API.getStationHistoryData({id:ids,page:this.curPage,start:$('#beginTime').val()?+new Date($('#beginTime').val()):\"\", end: $('#endTime').val()?+new Date($('#endTime').val()):\"\"})\n            },\n            downloadUrl:\"/api/index.php/query/\",\n\n        }\n    })\n    //查询：组\n    listConfig.qureyGroup = $.extend(true,{},listConfig.group,{\n        extObj:{\n            extEvent:function(){\n                var _this = this;\n                _this.listenTo(Backbone.Events,\"qurey_groupColsChange\",function(data){\n                    _this.destoryPlugin();\n                    _this.render(1);\n                });\n            },\n            fetchData:function(_param){\n                var _param = {};\n                // var navData = nav.getSites();\n                var ids;\n\n                var navData = nav.getGroups();\n\n                if($('#beginTime').val() == \"\"){\n                    alert('请选择时间');\n                    return;\n                }\n                if($('#startTime').val() == \"\"){\n                    alert('请选择时间');\n                    return;\n                }\n                API.getGroupHistoryData({id:navData.ids.join(\",\"),page:this.curPage,start:$('#beginTime').val()?+new Date($('#beginTime').val()):\"\", end: $('#endTime').val()?+new Date($('#endTime').val()):\"\"})\n            },\n            downloadUrl:\"/api/index.php/query/groupmodule\",\n        }\n    })\n    //查询：电池\n    listConfig.qureyBattery = $.extend(true,{},listConfig.battery,{\n\n        extObj:{\n            extEvent:function(){\n                var _this = this;\n                _this.listenTo(Backbone.Events,\"qurey_batteryColsChange\",function(data){\n                    _this.destoryPlugin();\n                    _this.render(1);\n                });\n            },\n            _fetch: function(_param){\n                var _param = {};\n                var navData = nav.getBatteryIds();\n                var ids;\n\n                if(this.ids && this.ids.sid){\n                    ids = this.ids.sid;\n                }else{\n                    ids = navData.ids.join(\",\");\n                }\n\n                if($('#beginTime').val() == \"\"){\n                    alert('请选择时间');\n                    return;\n                }\n                if($('#startTime').val() == \"\"){\n                    alert('请选择时间');\n                    return;\n                }\n                console.log('get batteryhistory');\n                API.getBatteryHistoryData({id:ids,page:this.curPage,start:$('#beginTime').val()?+new Date($('#beginTime').val()):\"\", end: $('#endTime').val()?+new Date($('#endTime').val()):\"\"})\n            },\n            fetchData:function(_param){\n                var _param = {};\n                var navData = nav.getBatteryIds();\n                var ids;\n\n                if(this.ids && this.ids.sid){\n                    ids = this.ids.sid;\n                }else{\n                    ids = navData.ids.join(\",\");\n                }\n\n                if($('#beginTime').val() == \"\"){\n                    alert('请选择时间');\n                    return;\n                }\n                if($('#startTime').val() == \"\"){\n                    alert('请选择时间');\n                    return;\n                }\n                console.log('get batteryhistory');\n                API.getBatteryHistoryData({id:ids,page:this.curPage,start:$('#beginTime').val()?+new Date($('#beginTime').val()):\"\", end: $('#endTime').val()?+new Date($('#endTime').val()):\"\"})\n            },\n            refresh:function(){\n                this.fetchData();\n            },\n            downloadUrl:\"/api/index.php/query/batterymodule\",\n        }\n    })\n\n    //查询：数据报警查询\n    listConfig.qureyCaution = $.extend(true,{},listConfig.caution,{\n\n        extObj:{\n            fetchData:function(_param){\n                var _param = {};\n                var navData = nav.getBatteryIds();\n                var ids;\n\n                if(this.ids && this.ids.sid){\n                    ids = this.ids.sid;\n                }else{\n                    ids = navData.ids.join(\",\");\n                }\n\n                if($('#beginTime').val() == \"\"){\n                    alert('请选择时间');\n                    return;\n                }\n                if($('#startTime').val() == \"\"){\n                    alert('请选择时间');\n                    return;\n                }\n                var cautionType = $(\"#cationCategory\").val();\n                API.getCautionsHistoryData({cautionType:cautionType,type:1,id:ids,page:this.curPage,start:$('#beginTime').val()?+new Date($('#beginTime').val()):\"\", end: $('#endTime').val()?+new Date($('#endTime').val()):\"\"})\n            },\n            refresh:function(){\n                this.fetchData();\n            },\n            resove:function(e){\n                ui.showUnsolveDialog({\n                  id:$(e.currentTarget).attr('pid'),\n                  suggestion:$(e.currentTarget).attr('suggestion'),\n                  desc:$(e.currentTarget).attr('desc'),\n                 \n                  realtime: false\n                });\n            },\n            downloadUrl:\"/api/index.php/query/batterymodule\",\n            render:function(){\n                //this.destoryPlugin();\n                var _this = this;\n                //ui.resizeAutoListWidth();\n                if(_this.listPlugin && _this.listPlugin[0]){\n                    _this.updateList();\n                    _this.updateAtype()\n                }else{\n                    _this.updateAtype()\n                    this.listPlugin.push($('#auto table').DataTable( $.extend(true,{},dataTableDefaultOption,{\n                        \"data\": this.data,\n                        \"paging\":false,\n                        \"scrollX\":ui.getListHeight(),\n                        //\"scrollY\":ui.getListHeight(),\n                        \"columns\": [\n\n                            { \"data\": \"site_name\", \"title\":\"站名\",width:150,\"sClass\":\"site_name_left\",render:function(data,type,itemData){\n                                    return \"<div class='show_station_detail' style='color:blue;cursor:pointer;' id='\"+(itemData.sn_key.substring(0,10)+\"0000\")+\"'>\"+data+\"</div>\"\n                            }},\n                            { \"data\": \"sn_key\",title:\"站号\",width:80, render:function(data, type,itemData){\n                                return itemData.sid;\n                            }},\n                            { \"data\": \"sn_key\",title:\"组号\",width:80, render:function(data, type,itemData){\n                                if(itemData.type == \"battery\" || itemData.type == \"group\"){\n                                    return itemData.sn_key.substring(10,12);\n                                }else{\n                                    return \"\";\n                                }\n\n                            }  },//组序列号\n                            { \"data\": \"sn_key\",title:\"电池号\",width:80, render:function(data, type,itemData){\n                                if(itemData.type == \"battery\")\n                                    return itemData.sn_key.substring(12,14);\n                                else{\n                                    return \"\";\n                                }\n                            }},\n                            { \"data\": \"time\",title:\"时间\" ,width:200},\n                            { \"data\": \"desc\",title:\"警情内容\",width:200,render:function(data, type, itemData){\n                                var desc = itemData.desc;\n                                var color=\"\";\n                                if(desc.indexOf(\"橙\") > -1){\n                                    color=\"#e7691d\"\n                                }else if(desc.indexOf(\"黄\") > -1){\n                                    color=\"#fabd05\"\n                                }else{\n                                    color=\"#f20f0f\"\n                                }\n                                return \"<div style='color:\"+color+\"'>\"+data+\"</div>\";\n                            }},\n                            { \"data\": \"current\",title:\"数值\",width:80,render:function(data, type, itemData){\n                                var desc = itemData.desc;\n                                var color=\"\";\n                                if(desc.indexOf(\"橙\") > -1){\n                                    color=\"#e7691d\"\n                                }else if(desc.indexOf(\"黄\") > -1){\n                                    color=\"#fabd05\"\n                                }else{\n                                    color=\"#f20f0f\"\n                                }\n                                return \"<div style='font-weight:bold;color:\"+color+\"'>\"+data+\"</div>\";\n                            }},\n                            { \"data\": \"markup\",title:\"操作记录\",render:function(data,type,itemData){\n                                var a = data == null ? \"\": data;\n                                if(itemData.status == 2){\n                                    return '<div style=\"text-align:left;\">已忽略</div>';\n                                }\n                                return '<div style=\"text-align:left;\">'+a+'</div>';\n                            }},\n                            { \"data\": \"contact\",title:\"操作人\",width:80},\n                            { \"data\": \"markuptime\",title:\"操作时间\",width:200},\n                            {\n                                \"data\": \"id\",\n                                \"title\":\"操作\",\n                                \"width\":100,\n                                render: function (data,type,itemData) {\n                                    if(itemData.status != 0){\n                                      return \"已处理\";\n                                    }\n                                    return _.template('<a class=\"resolveBtn\" pid=\"<%=id%>\" suggestion=\"<%=suggest%>\" desc=\"<%=desc%>\">处理</a>')({\n                                        id:data,\n                                        suggest:itemData.suggest,\n                                        desc: itemData.desc\n                                    });\n                                }\n                            }\n                            //{ \"data\": \"alarm_process_and_memo\",title:\"处理过程、时间、管理员\" }\n                        ]\n                    })));\n                }\n\n                // _this.checkAllRows();\n                return this;\n            }\n        }\n    })\n\n\n\n    //查询：强采内阻\n    listConfig.IRCollect = $.extend(true,{},listConfig.station,{\n        extObj:{\n            fetchData:function(_param){\n                var _param = {};\n                _param.page=this.curPage;\n                API.getIRCollectData(_param);\n            },\n            downloadUrl:\"/api/index.php/query/groupmodule\",\n            extEvent:function(){\n                var _this = this;\n                this.listenTo(Backbone.Events,\"rCollect:start\",function(data){\n                    common.loadTips.show(\"正在与站点联系采集相关电池内阻，请稍后\");\n                    setTimeout(function(){\n                        common.loadTips.close();\n                    },5000);\n                    $('body').everyTime('2s','irc',function(){\n                        console.log('get IRCollect');\n                        _this.fetchData();\n                    });\n                });\n\n\n                this.listenTo(Backbone.Events,\"clear:start\",function(data){\n                    common.loadTips.show(\"清空强采内阻历史中，请稍等\");\n                    setTimeout(function(){\n                        common.loadTips.close();\n                        _this.fetchData();\n                    },5000);\n                });\n\n                this.listenTo(Backbone.Events,\"rCollect:start:fail\",function(data){\n                    common.loadTips.show(\"采集失败，请重试\");\n                    setTimeout(function(){\n                        common.loadTips.close();\n                    },5000)\n                });\n            },\n            render: function(){\n                var _this = this;\n                //_this.destoryPlugin();\n                if(_this.listPlugin && _this.listPlugin[0]){\n                    _this.updateList();\n                }else{\n                    __webpack_require__.e(/*! AMD require */ 18).then(function() { var __WEBPACK_AMD_REQUIRE_ARRAY__ = [__webpack_require__(/*! fixedColumn */ \"./libs/dataTables.fixedColumns.min.js\")]; (function () {\n                        _this.listPlugin.push($('#auto table').DataTable($.extend(true, {\n                            \"data\": _this.data,\n                            \"language\": {\n                                \"emptyTable\": \"采集内阻数据为空\"\n                            },\n                            \"scrollX\": ui.getListHeight(),\n                            \"scrollY\": ui.getListHeight(),\n                            \"fixedColumns\": {leftColumns: 1},\n                            \"columns\": [\n\n                                {\"data\": \"sid\", title: \"站号\", width: 100},\n                                {\"data\": \"site_name\", title: \"站点简称\", width: 200},\n                                {\"data\": \"stationid\", title: \"物理地址\"},\n                                {\"data\": \"groupid\", title: \"组号\"},\n                                {\"data\": \"batteryid\", title: \"电池号\"},\n                                {\"data\": \"R\", title: \"内阻值\"},\n                                {\"data\": \"collect_time\", title: \"完成时间\"}// ,\n                                //{\"data\": \"collect_endtime\", title: \"完成时间\"},\n                            ]\n                        }, dataTableDefaultOption)));\n                    }).apply(null, __WEBPACK_AMD_REQUIRE_ARRAY__);}).catch(__webpack_require__.oe);\n                }\n            }\n        }\n    })\n\n    //查询：强采内阻\n    listConfig.adminConfig = $.extend(true,{},listConfig.station,{\n        extObj:{\n            fetchData:function(_param){\n                        API.getPersonalsData(_param);\n                    },\n                    render:function(){\n                        var _this = this;\n                        this.destoryPlugin();\n                        //this.clearTables();\n                        $('#lock').hide();\n                        __webpack_require__.e(/*! AMD require */ 18).then(function() { var __WEBPACK_AMD_REQUIRE_ARRAY__ = [__webpack_require__(/*! fixedColumn */ \"./libs/dataTables.fixedColumns.min.js\")]; (function() {\n                            _this.listPlugin.push($('#auto table').DataTable($.extend(true, {}, dataTableDefaultOption, {\n                                \"data\": _this.data,\n                                \"scrollX\": ui.getListHeight(),\n                                \"scrollY\": ui.getListHeight(),\n                                \"fixedColumns\": {leftColumns: 1},\n                                \"columns\": [\n                                    {\"data\": \"unit\", title: \"单位名称\"},\n                                    {\"data\": \"name\", title: \"姓名\"},\n                                    {\"data\": \"username\", title: \"登陆名\"},\n                                    {\"data\": \"phone\", title: \"联系电话\"},\n                                    {\"data\": \"backup_phone\", title: \"备用电话\"},\n                                    {\"data\": \"email\", title: \"邮箱\"},\n                                    {\"data\": \"postname\", title: \"职位\"},\n                                    {\"data\": \"duty_num\", title: \"班次\"},\n                                    {\"data\": \"location\", title: \"住址\"},\n                                    {\"data\": \"areaname\", title: \"管理范围\", render:function(data){\n                                        var a = data.split(\" \");\n                                        if(a.length > 1)\n                                            a.shift();\n                                        return \"<div>\"+a.join(\" \")+\"</div>\";\n                                    }},\n                                    {\"data\": \"rolename\", title: \"角色\"}\n                                ]\n                            })));\n                            _this.checkAllRows();\n                        }).apply(null, __WEBPACK_AMD_REQUIRE_ARRAY__);}).catch(__webpack_require__.oe)\n                        return this;\n                    }\n        }\n    })\n\n\n    //查询：门限\n    listConfig.limitation = $.extend(true,{},listConfig.limitationSetting,{extObj:{\n\n        render:function() {\n            var _this = this;\n            _this.destoryPlugin();\n            __webpack_require__.e(/*! AMD require */ 18).then(function() { var __WEBPACK_AMD_REQUIRE_ARRAY__ = [__webpack_require__(/*! fixedColumn */ \"./libs/dataTables.fixedColumns.min.js\")]; (function () {\n                _this.listPlugin.push($('#auto table').DataTable($.extend(true, {\n                    \"data\": _this.data,\n                    \"language\": {\n                        \"emptyTable\": \"站点数据为空\"\n                    },\n                    \"scrollX\": ui.getListHeight(),\n                    \"scrollY\": ui.getListHeight(),\n                    \"fixedColumns\": {leftColumns: 1},\n                    \"columns\": [\n\n                        {\"data\": \"sid\", title: \"站号\", width: 100},\n                        {\"data\": \"site_name\", title: \"站点简称\", width: 200},\n                        {\"data\": \"serial_number\", title: \"物理地址\"}\n                    ]\n                }, dataTableDefaultOption)));\n\n            }).apply(null, __WEBPACK_AMD_REQUIRE_ARRAY__);}).catch(__webpack_require__.oe)\n        }\n    }})\n    //查询：基本信息：站\n    listConfig.baseinfo_queryStationSituation = $.extend(true,{},listConfig.stationInfo_stationSituation,{extObj:{\n        downloadUrl:\"/api/index.php/query\",\n        getNavData:function(){\n            return nav.getSites();\n        },\n        getNavData:function(){\n            return nav.getSites();\n        },\n        fetchData:function(_param){\n            var _param = {};\n            var navData = nav.getSites();\n            var ids;\n\n            if(this.ids && this.ids.sid){\n                ids = this.ids.sid;\n            }else{\n                ids = navData.ids.join(\",\");\n            }\n            console.log(navData);\n            $.extend(_param,{id:ids});\n            API.getStationsInfo(_param);\n        },\n        render:function(){\n            var _this = this;\n            _this.destoryPlugin();\n            __webpack_require__.e(/*! AMD require */ 18).then(function() { var __WEBPACK_AMD_REQUIRE_ARRAY__ = [__webpack_require__(/*! fixedColumn */ \"./libs/dataTables.fixedColumns.min.js\")]; (function() {\n                _this.listPlugin.push($('#auto table').DataTable( $.extend(true,{\n                    \"data\": _this.data,\n                    \"language\": {\n                        \"emptyTable\": \"站点数据为空\"\n                    },\n                    \"scrollX\": ui.getListHeight(),\n                    \"scrollY\": ui.getListHeight(),\n                    \"columns\": [\n                        { \"data\": \"sid\",title:\"站号\",width:80  },\n                        {\n                            \"data\": \"site_name\",\n                            title:\"站点简称\",\n                            width:100\n                        },\n                        { \"data\": \"serial_number\",title:\"物理地址\",width:100},\n\n                        {\n                            \"data\": \"site_name\",\n                            title:\"站点全称\",\n                            width:100\n                        },\n\n                        { \"data\": \"site_location\",title:\"站点地址\",width:100  },\n                        { \"data\": \"site_property\",title:\"站点性质\",width:150  },\n                        { \"data\": \"areaname\",title:\"隶属区域\",width:150  },\n                        { \"data\": \"fix_phone\",title:\"固定电话\"},\n                        { \"data\": \"functionary\",title:\"负责人\",width:120,render:function(data,_,allData){\n                            var html = [];\n                            if(allData.functionary_sms == 1){\n                                html.push('<span>')\n                                html.push('<img src=\"/images/sms.png\">');\n                                html.push(\"</span>\");\n                            }\n\n\n                            if(allData.functionary_mail){\n                                html.push('<span>')\n                                html.push('<img src=\"/images/email.png\">');\n                                html.push(\"</span>\");\n                            }\n\n                            return \"<span>\"+data+\"</span>\"+html.join(\"\");\n                        }},\n                        { \"data\": \"functionary_phone\",title:\"负责人电话\",width:120},\n                        { \"data\": \"device_owner\",title:\"设备负责人\",width:120},\n                        { \"data\": \"device_owner_phone\",title:\"设备负责人电话\",width:120},\n\n                        { \"data\": \"emergency_person\",title:\"紧急联系人姓名\",width:120 },\n                        { \"data\": \"emergency_phone\",title:\"紧急联系人手机\",width:120  },\n                        { \"data\": \"area_owner\",title:\"区域主管\",width:120,render:function(data,_,allData){\n                            var html = [];\n                            if(allData.area_owner_sms == 1){\n                                html.push('<span>')\n                                html.push('<img src=\"/images/sms.png\">');\n                                html.push(\"</span>\");\n                            }\n\n\n                            if(allData.area_owner_mail){\n                                html.push('<span>')\n                                html.push('<img src=\"/images/email.png\">');\n                                html.push(\"</span>\");\n                            }\n\n                            return \"<span>\"+data+\"</span>\"+html.join(\"\");\n                        }},\n                        { \"data\": \"area_owner_phone\",title:\"区域主管电话\",width:120},\n                        { \"data\": \"parent_owner\",title:\"上级主管\",width:120,render:function(data,_,allData){\n                            var html = [];\n                            if(allData.parent_owner_sms == 1){\n                                html.push('<span>')\n                                html.push('<img src=\"/images/sms.png\">');\n                                html.push(\"</span>\");\n                            }\n\n\n                            if(allData.parent_owner_mail){\n                                html.push('<span>')\n                                html.push('<img src=\"/images/email.png\">');\n                                html.push(\"</span>\");\n                            }\n\n                            return \"<span>\"+data+\"</span>\"+html.join(\"\");\n                        }},\n                        { \"data\": \"parent_owner_phone\",title:\"上级主管电话\"},\n                        { \"data\": \"groups\",title:\"电池组数\",width:100  },\n                        { \"data\": \"batteries\",title:\"每组电池数\",width:80  },\n                        { \"data\": \"postal_code\",title:\"邮政编码\",width:80  },\n                        { \"data\": \"site_latitude\",title:\"站点纬度\",width:80  },\n                        { \"data\": \"site_longitude\",title:\"站点经度\",width:80  },\n                        { \"data\": \"ipaddress\",title:\"IP地址\",width:100  },\n                        { \"data\": \"ipaddress_method\",title:\"控制器IP地址或方式\",width:150  },\n                        { \"data\": \"site_control_type\",title:\"站点控制器型号\",width:100  },\n                        { \"data\": \"bms_install_date\",title:\"BMS系统安装日期\",width:150  },\n                        { \"data\": \"group_collect_type\",title:\"组电流采集器型号\",width:150  },\n                        { \"data\": \"group_collect_num\",title:\"组电流采集器数量\",width:150  },\n                        { \"data\": \"inductor_brand\",title:\"互感器品牌\",width:150  },\n                        { \"data\": \"group_collect_install_type\",title:\"组电流采集器安装模式\",width:150  },\n                        { \"data\": \"battery_collect_type\",title:\"电池数据采集器型号\",width:150  },\n                        { \"data\": \"battery_collect_num\",title:\"电池数据采集器数量\",width:150  },\n                        { \"data\": \"humiture_type\",title:\"环境温湿度方式\",width:150  },\n                        { \"data\": \"has_light\",title:\"灯光报警\",width:80},\n                        { \"data\": \"has_speaker\",title:\"声音报警\",width:80},\n                        { \"data\": \"has_sms\",title:\"短信\",width:80},\n                        { \"data\": \"has_smart_control\",title:\"智能控制\",width:80},\n                        { \"data\": \"has_group_TH_control\",title:\"温湿度传感器\",width:150},\n                        { \"data\": \"has_group_HO_control\",title:\"氢氧气传感器\",width:150},\n                        { \"data\": \"device_mac\",title:\"网口MAC\",width:150},\n                        { \"data\": \"remark\",title:\"备注\",width:150 },\n                    ]\n                },dataTableDefaultOption)));\n\n            }).apply(null, __WEBPACK_AMD_REQUIRE_ARRAY__);}).catch(__webpack_require__.oe)\n            return this;\n        }\n    }})\n    //查询：基本信息：电池\n    listConfig.baseinfo_queryBatterys = $.extend(true,{},listConfig.stationInfo_batterys,{extObj:{\n        getNavData:function(){\n            return nav.getSites();\n        },\n        fetchData:function(_param){\n            var _param = {};\n            var navData = nav.getSites();\n            var ids;\n\n            if(this.ids && this.ids.sid){\n                ids = this.ids.sid;\n            }else{\n                ids = navData.ids.join(\",\");\n            }\n            console.log(navData);\n            $.extend(_param,{id:ids});\n            API.getBatteryInfosData(_param);\n        },\n        downloadUrl:\"/api/index.php/query/batterymodule\",\n        render:function(){\n            var _this = this;\n            _this.destoryPlugin();\n            __webpack_require__.e(/*! AMD require */ 18).then(function() { var __WEBPACK_AMD_REQUIRE_ARRAY__ = [__webpack_require__(/*! fixedColumn */ \"./libs/dataTables.fixedColumns.min.js\")]; (function() {\n                _this.listPlugin.push($('#auto table').DataTable( $.extend(true,{\n                    \"data\": _this.data,\n                    \"language\": {\n                        \"emptyTable\": \"电池数据为空\"\n                    },\n                    \"scrollX\": ui.getListHeight(),\n                    \"scrollY\": ui.getListHeight(),\n                    \"fixedColumns\": {leftColumns: 1},\n                    \"columns\": [\n                        { \"data\": \"sid\",title:\"站号\",width:100  },\n                        { \"data\": \"site_name\",title:\"站点简称\",width:100  },\n                        { \"data\": \"battery_factory\",title:\"生产厂家\",width:150  },\n                        { \"data\": \"battery_num\",title:\"电池型号\",width:150  },\n                        { \"data\": \"battery_date\",title:\"生产日期\",width:150  },\n                        { \"data\": \"battery_voltage\",title:\"标称电压（V）\",width:150  },\n                        { \"data\": \"battery_oum\",title:\"标称内阻（mΩ）\",width:150  },\n                        { \"data\": \"battery_dianrong\",title:\"电池标称容量（Ah）\",width:150  },\n                        { \"data\": \"battery_float_voltage\",title:\"浮充标准电压（V）\",width:150  },\n                        { \"data\": \"battery_max_current\",title:\"最大充电电流（A）\",width:150  },\n                        { \"data\": \"battery_max_discharge_current\",title:\"最大放电电流（A）\",width:150  },\n                        { \"data\": \"battery_float_up\",title:\"浮充电压上限（V）\",width:150  },\n                        { \"data\": \"battery_float_dow\",title:\"电池浮充电压下限（V）\",width:150  },\n                        { \"data\": \"battery_discharge_down\",title:\"放电电压下限（V）\",width:150  },\n                        { \"data\": \"battery_scrap_date\",title:\"强制报废日期\",width:150  },\n                        { \"data\": \"battery_life\",title:\"设计寿命（年）\",width:150  },\n                        { \"data\": \"battery_column_type\",title:\"电池级柱类型\",width:150  },\n                        { \"data\": \"battery_temperature\",title:\"温度要求（℃）\",width:150  },\n                        { \"data\": \"battery_humidity\",title:\"湿度要求（%）\",width:150  },\n                        { \"data\": \"battery_type\",title:\"电池种类\",width:150  },\n                        { \"data\": \"battery_factory_phone\",title:\"电池厂家联系电话\",width:150  },\n                        { \"data\": \"remark\",title:\"备注\",width:150 },\n                    ]\n                },dataTableDefaultOption)));\n\n            }).apply(null, __WEBPACK_AMD_REQUIRE_ARRAY__);}).catch(__webpack_require__.oe)\n            return this;\n        }\n    }})\n    //查询：基本信息：用户单位信息信息表\n    listConfig.baseinfo_queryInstitutions = $.extend(true,{},listConfig.stationInfo_institutions,{extObj:{\n        getNavData:function(){\n            return nav.getSites();\n        },\n        render:function(){\n            var _this = this;\n            _this.destoryPlugin();\n            $('#auto').width('100%');\n            __webpack_require__.e(/*! AMD require */ 18).then(function() { var __WEBPACK_AMD_REQUIRE_ARRAY__ = [__webpack_require__(/*! fixedColumn */ \"./libs/dataTables.fixedColumns.min.js\")]; (function() {\n                _this.listPlugin.push($('#auto table').DataTable( $.extend(true,{\n                    \"data\": _this.data,\n                    \"scrollX\":ui.getListHeight(),\n                    \"scrollY\":ui.getListHeight(),\n                    \"fixedColumns\": {leftColumns: 1},\n                    \"columns\": [\n                        {data:'company_name',title:'单位名称',width:150},\n                        {data:'company_address',title:'单位地址',width:300},\n                        {data:'area_name',title:'管辖'},\n                        {data:'parent_area',title:'隶属',width:100,},\n                        {data:'supervisor_name',title:'主管领导姓名',width:80},\n                        {data:'supervisor_phone',title:'主管领导电话',width:100},\n                        {data:'owner',title:'部门负责人',width:80},\n                        {data:'owner_phone',title:'部门负责人电话',width:100},\n                        {data:'longitude',title:'经度',width:80},\n                        {data:'latitude',title:'纬度',width:80},\n                        {data:'station_num',title:'所辖站点个数',width:80},\n                        {data:'area_level',title:'隶属层级',width:100},\n                        {data:'network_type',title:'联网方式',width:100},\n                        {data:'bandwidth',title:'网络带宽',width:100},\n                        {data:'ipaddr',title:'IP地址',width:100},\n                        {data:'computer_brand',title:'上位机品牌',width:100},\n                        {data:'computer_os',title:'上位机操作系统',width:100},\n                        {data:'computer_conf',title:'主机配置',width:100},\n                        {data:'browser_name',title:'浏览器名称',width:100},\n                        {data:'server_capacity',title:'服务器容量',width:100},\n                        {data:'server_type',title:'服务器型号',width:100},\n                        {data:'cloud_address',title:'云空间地址',width:100},\n                        {data:'backup_period',title:'数据备份周期',width:100},\n                        {data:'backup_type',title:'数据备份方式',width:100},\n                        {data:'supervisor_depname',title:'监控部门名称',width:100},\n                        {data:'monitor_name1',title:'监控部门负责人',width:100},\n                        {data:'monitor_phone1',title:'监控部门负责人电话',width:100},\n                        {data:'monitor_name2',title:'其他联系人',width:100},\n                        {data:'monitor_phone2',title:'其他联系人电话',width:100},\n                        {data:'monitor_name3',title:'其他联系人',width:100},\n                        {data:'monitor_phone3',title:'其他联系人电话',width:100},\n                        {data:'monitor_tel1',title:'监控部门固定电话1',width:100},\n                        {data:'monitor_tel2',title:'监控部门固定电话2',width:100},\n\n                        {data:'duty_status',title:'值守状态/班次',width:80},\n                        {data:'manage',title:'管理员',width:80},\n                        {data:'viewer',title:'观察员',width:80},\n\n                        { \"data\": \"remark\",title:\"备注\",width:150 },\n                    ]\n                },dataTableDefaultOption)));\n            }).apply(null, __WEBPACK_AMD_REQUIRE_ARRAY__);}).catch(__webpack_require__.oe)\n            return this;\n        }\n    }})\n    //查询：基本信息：BMS信息表\n    listConfig.baseinfo_queryMonitorSeller = $.extend(true,{},listConfig.stationInfo_monitorSeller,{extObj:{\n        render:function(){\n            var _this = this;\n            _this.destoryPlugin();\n            $('#auto').width('100%');\n            __webpack_require__.e(/*! AMD require */ 18).then(function() { var __WEBPACK_AMD_REQUIRE_ARRAY__ = [__webpack_require__(/*! fixedColumn */ \"./libs/dataTables.fixedColumns.min.js\")]; (function() {\n                _this.listPlugin.push($('#auto table').DataTable( $.extend(true,{\n                    \"data\": _this.data,\n                    \"scrollX\":ui.getListHeight(),\n                    \"scrollY\":ui.getListHeight(),\n                    \"fixedColumns\": {leftColumns: 1},\n                    \"columns\": [\n                        {data:'bms_company',title:'生产厂家',width:200},\n                        {data:'bms_device_addr',title:'厂家地址',width:200},\n                        {data:'bms_postcode',title:'邮编',width:200},\n                        {data:'bms_url',title:'支持网址',width:200},\n                        {data:'bms_tel',title:'支持固话',width:200},\n                        {data:'bms_phone',title:'手机',width:200},\n                        {data:'bms_service_phone',title:'服务商电话',width:200},\n                        {data:'bms_service_name',title:'服务商名称',width:200},\n                        {data:'bms_service_contact',title:'服务商联系人',width:200},\n                        {data:'bms_service_url',title:'服务商地址',width:300},\n                        {data:'bms_version',title:'软件版本号',width:150},\n                        {data:'bms_update_mark',title:'软件升级记录',width:170},\n                        {data:'bms_mark',title:'备注',width:300},\n                    ]\n                },dataTableDefaultOption)));\n            }).apply(null, __WEBPACK_AMD_REQUIRE_ARRAY__);}).catch(__webpack_require__.oe)\n            return this;\n        }\n    }})\n\n    //查询：基本信息：UPS信息表\n    listConfig.baseinfo_queryUpsInfo = $.extend(true,{},listConfig.stationInfo_upsInfo,{extObj:{\n        getNavData:function(){\n            return nav.getSites();\n        },\n        fetchData:function(_param){\n            var _param = {};\n            var navData = nav.getSites();\n            var ids;\n\n            if(this.ids && this.ids.sid){\n                ids = this.ids.sid;\n            }else{\n                ids = navData.ids.join(\",\");\n            }\n            console.log(navData);\n            $.extend(_param,{id:ids});\n            API.getUpsInfosData(_param);\n        },\n        render:function(){\n            var _this = this;\n            _this.destoryPlugin();\n            $('#auto').width('100%');\n            console.log(listConfig.stationInfo_upsInfo);\n            __webpack_require__.e(/*! AMD require */ 18).then(function() { var __WEBPACK_AMD_REQUIRE_ARRAY__ = [__webpack_require__(/*! fixedColumn */ \"./libs/dataTables.fixedColumns.min.js\")]; (function() {\n                _this.listPlugin.push($('#auto table').DataTable( $.extend(true,{\n                    \"data\": _this.data,\n                    \"scrollX\":ui.getListHeight(),\n                    \"scrollY\":ui.getListHeight(),\n                    \"fixedColumns\": {leftColumns: 1},\n                    \"columns\": [\n                        { \"data\": \"sid\",title:\"站号\",width:80 },\n                        { \"data\": \"site_name\",title:\"站名\",width:250 },\n                        { \"data\": \"ups_factory\",title:\"生产厂家\",width:250 },\n                        { \"data\": \"ups_type\",title:\"型号\",width:100 },\n                        { \"data\": \"ups_create_date\",title:\"生产日期\",width:150 },\n                        { \"data\": \"ups_install_date\",title:\"安装日期\",width:150 },\n                        { \"data\": \"ups_power\",title:\"功率/容量（V/A）\",width:150 },\n                        { \"data\": \"ups_power_in\",title:\"输入功率（V/A）\",width:150 },\n                        { \"data\": \"ups_power_out\",title:\"输出功率（V/A）\",width:150 },\n                        { \"data\": \"ups_battery_vol\",title:\"外接电池电压（V）\",width:150 },\n                        { \"data\": \"ups_battery_current\",title:\"外接电池电流（A）\",width:150 },\n                        { \"data\": \"ac_protect\",title:\"AC过流保护（V/A）\",width:150 },\n                        { \"data\": \"dc_protect\",title:\"DC过流保护（V/A）\",width:150 },\n                        { \"data\": \"on_net\",title:\"联网检测\",width:150 },\n                        { \"data\": \"alarm_content\",title:\"报警内容\",width:150 },\n                        { \"data\": \"discharge_protect\",title:\"放电保护值（%）\",width:150 },\n                        { \"data\": \"redundancy_num\",title:\"冗余数量(台)\",width:150 },\n                        { \"data\": \"floting_charge\",title:\"浮充电压（V）\",width:150 },\n                        { \"data\": \"ups_vdc\",title:\"电压范围(V)\",width:150 },\n                        { \"data\": \"ups_reserve_hour\",title:\"额定候备时间（W/H）\",width:250 },\n                        { \"data\": \"ups_charge_mode\",title:\"充电方式\",width:100 },\n                        { \"data\": \"ups_max_charge\",title:\"最大充电电流（A）\",width:150 },\n                        { \"data\": \"ups_max_discharge\",title:\"最大放电电流（A）\",width:150 },\n                        { \"data\": \"ups_period_days\",title:\"规定维护周期（天）\",width:150 },\n                        { \"data\": \"ups_discharge_time\",title:\"维护放电时长（分钟）\",width:150 },\n                        { \"data\": \"ups_discharge_capacity\",title:\"维护放电容量（%）\",width:150 },\n                        { \"data\": \"ups_maintain_date\",title:\"维护到期日\",width:150 },\n                        { \"data\": \"ups_vender_phone\",title:\"厂家联系电话\",width:120 },\n                        { \"data\": \"ups_service\",title:\"服务商名称\",width:120 },\n                        { \"data\": \"ups_vender\",title:\"联系人\",width:120 },\n                        { \"data\": \"ups_service_phone\",title:\"服务商电话\",width:100 },\n                        { \"data\": \"remark\",title:\"备注\",width:150 },\n                    ]\n                },dataTableDefaultOption)));\n            }).apply(null, __WEBPACK_AMD_REQUIRE_ARRAY__);}).catch(__webpack_require__.oe)\n            return this;\n        }\n    }})\n\n\n    //查询：参数：组\n    listConfig.option_groupOption = $.extend(true,{},listConfig.optionSetting_groupOption,{extObj:{\n        getNavData:function(){\n            return nav.getSites();\n        },\n        extEvent: function(){\n            var _this = this;\n            _this.listenTo(Backbone.Events,\"curstation:change\",function(data){\n                _this.ids = null;\n                if(!$(_this.el).length || !$(_this.el).is(\":visible\")){\n                    return;\n                }\n                var navData = _this.getNavData();\n                if(typeof navData == 'undefined' || !navData || !navData.ids.length){\n                    _this.data = [];\n                    _this.render();\n                }else{\n                    _this.fetchData();\n                }\n            });\n        },\n        fetchData:function(_param){\n            var _param = {};\n            var navData = nav.getSites();\n            var ids;\n\n            if(this.ids && this.ids.sid){\n                ids = this.ids.sid;\n            }else{\n                ids = navData.ids.join(\",\");\n            }\n            console.log(navData);\n            $.extend(_param,{id:ids});\n            API.getGroupOptionData(_param);\n        },\n        render:function(){\n            var _this = this;\n            this.destoryPlugin();\n            //this.clearTables();\n            $('#lock').hide();\n            __webpack_require__.e(/*! AMD require */ 18).then(function() { var __WEBPACK_AMD_REQUIRE_ARRAY__ = [__webpack_require__(/*! fixedColumn */ \"./libs/dataTables.fixedColumns.min.js\")]; (function() {\n                _this.listPlugin.push($('#auto table').DataTable($.extend(true, {}, dataTableDefaultOption, {\n                    \"data\": _this.data,\n                    \"scrollX\": ui.getListHeight(),\n                    \"scrollY\": ui.getListHeight(),\n                    \"fixedColumns\": {leftColumns: 1},\n                    \"columns\": [\n                            {\"data\": \"site_name\", title: \"站名称\",width:100},\n                            {\"data\": \"sid\", title: \"站号\",width:100},\n                            {\"data\": \"GroBatNum\", title: \"每组电池数\",width:100},\n                            {\"data\": \"CurRange\", title: \"组电流量程\",width:100},\n                            {\"data\": \"KI\", title: \"组电流系数\",width:100},\n                            {\"data\": \"ZeroCurADC\", title: \"组电流零位\",width:100},\n                            {\"data\": \"DisChaLim_R\", title: \"组放电电流超上限_红\",width:100},\n                            {\"data\": \"DisChaLim_O\", title: \"组放电电流将达上限_橙\",width:100},\n                            {\"data\": \"DisChaLim_Y\", title: \"组放电电流偏高_黄\",width:100},\n                            {\"data\": \"ChaLim_R\", title: \"组充电电流超上限_红\",width:100},\n                            {\"data\": \"ChaLim_O\", title: \"组充电电流将达上限_橙\",width:100},\n                            {\"data\": \"ChaLim_Y\", title: \"组充电电流偏高_黄\",width:100},\n                            {\"data\": \"MaxTem_R\", title: \"组温度超上限_红\",width:100},\n                            {\"data\": \"MaxTem_O\", title: \"组温度将达上限_橙\",width:100},\n                            {\"data\": \"MaxTem_Y\", title: \"组温度偏高_黄\",width:100},\n                            {\"data\": \"MinTem_R\", title: \"组温度超下限_红\",width:100},\n                            {\"data\": \"MinTem_O\", title: \"组温度将达下限_橙\",width:100},\n                            {\"data\": \"MinTem_Y\", title: \"组温度偏低_黄\",width:100},\n                            {\"data\": \"ChaCriterion\", title: \"组充放电判据\",width:100},\n                    ]\n                })));\n            }).apply(null, __WEBPACK_AMD_REQUIRE_ARRAY__);}).catch(__webpack_require__.oe)\n            return this;\n        }\n    }})\n    //查询：参数：站\n    listConfig.option_stationOption = $.extend(true,{},listConfig.optionSetting_stationOption,{extObj:{\n        getNavData:function(){\n            return nav.getSites();\n        },\n        extEvent: function(){\n            var _this = this;\n            _this.listenTo(Backbone.Events,\"curstation:change\",function(data){\n                _this.ids = null;\n                if(!$(_this.el).length || !$(_this.el).is(\":visible\")){\n                    return;\n                }\n                var navData = _this.getNavData();\n                if(typeof navData == 'undefined' || !navData || !navData.ids.length){\n                    _this.data = [];\n                    _this.render();\n                }else{\n                    _this.fetchData();\n                }\n            });\n        },\n        fetchData:function(_param){\n            var _param = {};\n            var navData = nav.getSites();\n            var ids;\n\n            if(this.ids && this.ids.sid){\n                ids = this.ids.sid;\n            }else{\n                ids = navData.ids.join(\",\");\n            }\n            console.log(navData);\n            $.extend(_param,{id:ids});\n            API.getSationOptionsData(_param);\n        },\n        render:function(){\n            var _this = this;\n            this.destoryPlugin();\n            //this.clearTables();\n            $('#lock').hide();\n            __webpack_require__.e(/*! AMD require */ 18).then(function() { var __WEBPACK_AMD_REQUIRE_ARRAY__ = [__webpack_require__(/*! fixedColumn */ \"./libs/dataTables.fixedColumns.min.js\")]; (function() {\n                _this.listPlugin.push($('#auto table').DataTable($.extend(true, {}, dataTableDefaultOption, {\n                    \"data\": _this.data,\n                    \"scrollX\": ui.getListHeight(),\n                    \"scrollY\": ui.getListHeight(),\n                    \"fixedColumns\": {leftColumns: 1},\n                    \"columns\": [\n                                    {\"data\": \"sn_key\", title: \"物理地址\",width:100},\n                                    {\"data\": \"site_name\", title: \"站名称\",width:100},\n                                    {\"data\": \"sid\", title: \"站号\",width:100},\n                                    {\"data\": \"Groups\", title: \"站内组数\",width:100},\n                                    {\"data\": \"GroBats\", title: \"每组电池数\",width:100},\n                                    {\"data\": \"CurSensor\", title: \"电流传感安装状态\",width:100},\n                                    {\"data\": \"Time_MR\", title: \"内阻测量间隔\",width:100},\n                                    {\"data\": \"SampleInt\", title: \"数据间隔\",width:100},\n                                    {\"data\": \"MaxTem_R\", title: \"高温报警_红\",width:100},\n                                    {\"data\": \"MaxTem_O\", title: \"高温报警_橙\",width:100},\n                                    {\"data\": \"MaxTem_Y\", title: \"高温报警_黄\",width:100},\n                                    {\"data\": \"MinTem_R\", title: \"低温报警_红\",width:100},\n                                    {\"data\": \"MinTem_O\", title: \"低温报警_橙\",width:100},\n                                    {\"data\": \"MinTem_Y\", title: \"低温报警_黄\",width:100},\n                                    {\"data\": \"MaxHum_R\", title: \"高湿报警_红\",width:100},\n                                    {\"data\": \"MaxHum_O\", title: \"高湿报警_橙\",width:100},\n                                    {\"data\": \"MaxHum_Y\", title: \"高湿报警_黄\",width:100},\n                                    {\"data\": \"MinHum_R\", title: \"低湿报警_红\",width:100},\n                                    {\"data\": \"MinHum_O\", title: \"低湿报警_橙\",width:100},\n                                    {\"data\": \"MinHum_Y\", title: \"低湿报警_黄\",width:100},\n                                    {\"data\": \"CurRange\", title: \"站电流量程\",width:100},\n                                    {\"data\": \"KI\", title: \"站电流系数\",width:100},\n                                    {\"data\": \"ZeroCurADC\", title: \"站电流零位\",width:100},\n                                    {\"data\": \"DisChaLim_R\", title: \"放电报警_红\",width:100},\n                                    {\"data\": \"DisChaLim_O\", title: \"放电报警_橙\",width:100},\n                                    {\"data\": \"DisChaLim_Y\", title: \"放电报警_黄\",width:100},\n                                    {\"data\": \"ChaLim_R\", title: \"充电报警_红\",width:100},\n                                    {\"data\": \"ChaLim_O\", title: \"充电报警_橙\",width:100},\n                                    {\"data\": \"ChaLim_Y\", title: \"充电报警_黄\",width:100},\n                                    {\"data\": \"HiVolLim_R\", title: \"高压报警_红\",width:100},\n                                    {\"data\": \"HiVolLim_O\", title: \"高压报警_橙\",width:100},\n                                    {\"data\": \"HiVolLim_Y\", title: \"高压报警_黄\",width:100},\n                                    {\"data\": \"LoVolLim_R\", title: \"低压报警_红\",width:100},\n                                    {\"data\": \"LoVolLim_O\", title: \"低压报警_橙\",width:100},\n                                    {\"data\": \"LoVolLim_Y\", title: \"低压报警_黄\",width:100},\n                                    {\"data\": \"ChaCriterion\", title: \"站充放电判据\",width:100}\n                    ]\n                })));\n            }).apply(null, __WEBPACK_AMD_REQUIRE_ARRAY__);}).catch(__webpack_require__.oe)\n            return this;\n        }\n    }})\n    //查询：参数：电池\n    listConfig.option_batteryOption = $.extend(true,{},listConfig.optionSetting_batteryOption,{extObj:{\n        getNavData:function(){\n            return nav.getSites();\n        },\n        extEvent: function(){\n            var _this = this;\n            _this.listenTo(Backbone.Events,\"curstation:change\",function(data){\n                _this.ids = null;\n                if(!$(_this.el).length || !$(_this.el).is(\":visible\")){\n                    return;\n                }\n                var navData = _this.getNavData();\n                if(typeof navData == 'undefined' || !navData || !navData.ids.length){\n                    _this.data = [];\n                    _this.render();\n                }else{\n                    _this.fetchData();\n                }\n            });\n        },\n        fetchData:function(_param){\n            var _param = {};\n            var navData = nav.getSites();\n            var ids;\n\n            if(this.ids && this.ids.sid){\n                ids = this.ids.sid;\n            }else{\n                ids = navData.ids.join(\",\");\n            }\n            console.log(navData);\n            $.extend(_param,{id:ids});\n            API.getBatteryOptionsData(_param);\n        },\n        render:function(){\n            var _this = this;\n            this.destoryPlugin();\n            $('#auto').width('100%');\n            __webpack_require__.e(/*! AMD require */ 18).then(function() { var __WEBPACK_AMD_REQUIRE_ARRAY__ = [__webpack_require__(/*! fixedColumn */ \"./libs/dataTables.fixedColumns.min.js\")]; (function() {\n                _this.listPlugin.push($('#auto table').DataTable($.extend(true, {}, dataTableDefaultOption, {\n                    \"data\": _this.data,\n                    \"scrollX\": ui.getListHeight(),\n                    \"scrollY\": ui.getListHeight(),\n                    \"fixedColumns\": {leftColumns: 2},\n                    \"columns\": [\n                        {\"data\": \"site_name\", title: \"站名称\",width:100},\n                        {\"data\": \"sid\", title: \"站号\",width:100},\n                        {\"data\": \"KV\", title: \"电压系数\",width:100},\n                        {\"data\": \"KT\", title: \"温度系数\",width:100},\n                        {\"data\": \"KI\", title: \"激励电流系数\",width:100},\n                        {\"data\": \"T0\", title: \"T0校准温度\",width:100},\n                        {\"data\": \"ADC_T0\", title: \"T0温度码\",width:100},\n                        {\"data\": \"T1\", title: \"T1校准温度\",width:100},\n                        {\"data\": \"ADC_T1\", title: \"T1温度码\",width:100},\n                        {\"data\": \"MaxU_R\", title: \"电池电压超上限_红\",width:100},\n                        {\"data\": \"MaxU_O\", title: \"电池电压将达上限_橙\",width:100},\n                        {\"data\": \"MaxU_Y\", title: \"电池电压偏高_黄\",width:100},\n                        {\"data\": \"MinU_R\", title: \"电池电压超下限_红\",width:100},\n                        {\"data\": \"MinU_O\", title: \"电池电压将达下限_橙\",width:100},\n                        {\"data\": \"MinU_Y\", title: \"电池电压偏低_黄\",width:100},\n                        {\"data\": \"MaxT_R\", title: \"电池温度超上限_红\",width:100},\n                        {\"data\": \"MaxT_O\", title: \"电池温度将达上限_橙\",width:100},\n                        {\"data\": \"MaxT_Y\", title: \"电池温度偏高_黄\",width:100},\n                        {\"data\": \"MinT_R\", title: \"电池温度超下限_红\",width:100},\n                        {\"data\": \"MinT_O\", title: \"电池温度将达下限_橙\",width:100},\n                        {\"data\": \"MinT_Y\", title: \"电池温度偏低_黄\",width:100},\n                        {\"data\": \"MaxR_R\", title: \"电池内阻超上限_红\",width:100},\n                        {\"data\": \"MaxR_O\", title: \"电池内阻将达上限_橙\",width:100},\n                        {\"data\": \"MaxR_Y\", title: \"电池内阻偏高_黄\",width:100},\n                        {\"data\": \"MaxDevU_R\", title: \"电池电压偏差_红\",width:100},\n                        {\"data\": \"MaxDevU_O\", title: \"电池电压偏差_橙\",width:100},\n                        {\"data\": \"MaxDevU_Y\", title: \"电池电压偏差_黄\",width:100},\n                        {\"data\": \"MaxDevT_R\", title: \"电池温度偏差_红\",width:100},\n                        {\"data\": \"MaxDevT_O\", title: \"电池温度偏差_橙\",width:100},\n                        {\"data\": \"MaxDevT_Y\", title: \"电池温度偏差_黄\",width:100},\n                        {\"data\": \"MaxDevR_R\", title: \"电池内阻偏差_红\",width:100},\n                        {\"data\": \"MaxDevR_O\", title: \"电池内阻偏差_橙\",width:100},\n                        {\"data\": \"MaxDevR_Y\", title: \"电池内阻偏差_黄\",width:100},\n                    ]\n                })));\n            }).apply(null, __WEBPACK_AMD_REQUIRE_ARRAY__);}).catch(__webpack_require__.oe)\n            return this;\n        }\n    }})\n    //查询：外控设备\n    listConfig.equipment = $.extend(true,{},listConfig.equipmentSetting,{extObj:{\n        render:function() {\n            var _this = this;\n            _this.destoryPlugin();\n            __webpack_require__.e(/*! AMD require */ 18).then(function() { var __WEBPACK_AMD_REQUIRE_ARRAY__ = [__webpack_require__(/*! fixedColumn */ \"./libs/dataTables.fixedColumns.min.js\")]; (function () {\n                _this.listPlugin.push($('#auto table').DataTable($.extend(true, {\n                    \"data\": _this.data,\n                    \"language\": {\n                        \"emptyTable\": \"站点数据为空\"\n                    },\n                    \"scrollX\": ui.getListHeight(),\n                    \"scrollY\": ui.getListHeight(),\n                    \"columns\": [\n\n                        {\"data\": \"sid\", title: \"站号\", width: 100},\n                        {\"data\": \"Device_name\", title: \"名称\", width: 100},\n                        {\"data\": \"Device_fun\", title: \"功能\", width: 100},\n                        {\"data\": \"Device_Factory_Name\", title: \"生产厂家\", width: 100},\n                        {\"data\": \"Device_Factory_Address\", title: \"厂家地址\", width: 200},\n                        {\"data\": \"Device_Factory_PostCode\", title: \"厂家邮编\", width: 100},\n                        {\"data\": \"Device_Factory_website\", title: \"技术支持网址\", width: 150},\n                        {\"data\": \"Device_Factory_Technology_cable_phone\", title: \"技术支持固话\", width: 100},\n                        {\"data\": \"Device_Factory_Technology_cellphone\", title: \"技术支持手机\"}\n                    ]\n                }, dataTableDefaultOption)));\n\n            }).apply(null, __WEBPACK_AMD_REQUIRE_ARRAY__);}).catch(__webpack_require__.oe)\n        }\n    }})\n\n\n\n    function initPage(listType,sub,ids){\n        if(listView){\n            listView.destroy();\n            listView = null;\n            // $('#beginTime').val('');\n            // $('#endTime').val('');\n            //$(\"#list\").html('');\n        }\n        var _listType = listType?listType+(sub?\"_\"+sub:\"\"):'defaultConfig';\n        var _listTpl = 'defaultListTpl';\n        var _extObj= listConfig[_listType]?listConfig[_listType].extObj:{};\n        _extObj = $.extend({},listConfig.defaultConfig.extObj,_extObj);\n        $(\"#list\").html($(\"#\"+_listTpl).html());\n        listView = new (Backbone.View.extend($.extend({},{el:$(\"#list\"),ids:ids},_extObj)))();\n        overFlag = false;\n        var queryAndReport = [\n            'qureyGroup',\n            'qureyStation',\n            'qureyBattery',\n            'reportCaution',\n            'deviationTrend',\n            'chargeOrDischarge',\n            'batteryLife',\n            'reportUilog',\n            'uilog'\n        ];\n        console.log('listType', listType);\n        $(\"#beginTime\").datetimepicker(\"setDate\", new Date((new Date()) - 7*24*60*60*1000));\n        $(\"#endTime\").datetimepicker(\"setDate\", new Date());\n        if(queryAndReport.indexOf(listType) > -1){\n            if(checkSelectDate()){\n                listView.fetchData();\n            }\n        }else{\n            listView.fetchData();\n        }\n    }\n\n    function checkSelectDate(){\n        var startTime = $('#beginTime').val();\n        var endTime = $(\"#endTime\").val();\n        if(startTime == \"\" || endTime == \"\"){\n            return false;\n        }\n        return true;\n    }\n\n    $(window).resize(function(){\n        if(listView && listView.listPlugin){\n            listView.fetchData();\n        }\n    })\n\n    function createCautionStatusHtml(code){\n        return code == '1'?'<label style=\"color:#ff0000\">是</label>':'<label style=\"color:#888\">否</label>';\n    }\n    function createHasOrNotHtml(code){\n        return code == '1'?'<label>是</label>':'<label>否</label>';\n    }\n    return {\n        init:function(sys,listType,sub,ids){\n            _sys = sys;\n            _listType = listType;\n            _sub = sub;\n\n            initPage(listType,sub,ids);\n            stationInfoDialog.init();\n\n            var html = '',shtml='';\n            $.each([\n                {\"data\": \"battery_sn_key\", title: \"电池序列号\",width:100},\n                {\"data\": \"sid\", title: \"站号\",width:50},\n                {\"data\": \"gid\", title: \"组号\",width:50},\n                {\"data\": \"bid\", title: \"电池号\",width:50},\n                {\"data\": \"CurrentAdjust_KV\", title: \"电压测量修正系数KV\",width:200},\n                {\"data\": \"TemperatureAdjust_KT\", title: \"温度测量修正系数KI\",width:200},\n                {\"data\": \"T0_ADC\", title: \"T0校准点ADC码\",width:200},\n                {\"data\": \"T0_Temperature\", title: \"T0校准点温度值（℃）\",width:200},\n                {\"data\": \"T1_ADC\", title: \"T1校准点ADC码\",width:200},\n                {\"data\": \"T1_Temperature\", title: \"T1校准点温度值（℃）\",width:200},\n                {\"data\": \"Rin_Span\", title: \"内阻测量量程\",width:200},\n                {\"data\": \"OSC\", title: \"OSC_Voltage\",width:200},\n                {\"data\": \"BatteryU_H\", title: \"电池电压高压限（V）\",width:200},\n                {\"data\": \"BaterryU_L\", title: \"电池电压低压限（V）\",width:200},\n                {\"data\": \"Electrode_T_H_Limit\", title: \"电极温度高温限（℃）\",width:200},\n                {\"data\": \"Electrode_T_L_Limit\", title: \"电极温度低温限（℃）\",width:200},\n                {\"data\": \"Rin_High_Limit\", title: \"电池内阻高限（mΩ）\",width:200},\n                {\"data\": \"Rin_Adjust_KR\", title: \"内阻测量修正系数KR\",width:200},\n                {\"data\": \"PreAmp_KA\", title: \"前置放大器修正系数KA\",width:200},\n                {\"data\": \"Rin_ExciteI_KI\", title: \"内阻测量激励电流修正系数KI\",width:200}\n            ],function(i,d){\n                shtml+= _.template('<label class=\"item-title\" for=\"name\"><%= title %>: </label> <input class=\"input-w-1\" type=\"text\" key=\"<%=data%>\"/>')(d)\n                if(i%2){\n                    html+= '<div class=\"rowElem\">'+shtml+'</div>';\n                    shtml='';\n                }\n            })\n            if(shtml){\n                html+= '<div class=\"rowElem\">'+shtml+'</div>';\n            }\n            //console.log(html);\n\n            return this;\n        },\n        isOver:function(value){\n            if(typeof value == 'undefined'){\n                return !!overFlag;\n            }else{\n                overFlag = !!value;\n            }\n        },\n        destory:function(){\n            if(listView){\n\n                listView.destroy();\n                listView = null;\n                $(\"#list\").html('');\n            }\n            return this;\n        }\n    };\n}).apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__),\n\t\t\t\t__WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__))\n\n/* WEBPACK VAR INJECTION */}.call(this, __webpack_require__(/*! ./libs/jquery.min.js */ \"./libs/jquery.min.js\")))\n\n//# sourceURL=webpack:///./js/blocks/list.js?");

/***/ }),

/***/ "./js/blocks/listSearch.js":
/*!*********************************!*\
  !*** ./js/blocks/listSearch.js ***!
  \*********************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

eval("/* WEBPACK VAR INJECTION */(function($) {var __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;!(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__,__webpack_require__(/*! api */ \"./js/api.js\"),__webpack_require__(/*! context */ \"./js/context_model.js\")], __WEBPACK_AMD_DEFINE_RESULT__ = (function(require,API,context){\n\treturn {\n\t\tinit:function(pageType) {\n\n\t\t\t$( \"#beginTime\" ).datetimepicker({\n\t\t\t\tchangeMonth: true,\n\t\t\t\tshowSecond:false,\n\t\t\t\tshowMillisec:false,\n\t\t\t\tshowMicrosec:false,\n\t\t\t\tmaxDate:new Date(),\n\t\t\t\tonClose: function( selectedDate ) {\n\t\t\t\t\t$( \"#endTime\" ).datetimepicker( \"option\", \"minDate\", selectedDate );\n\t\t\t\t}\n\t\t\t});\n\t\t\t$( \"#endTime\" ).datetimepicker({\n\t\t\t\t//defaultDate: \"+1w\",\n\t\t\t\tchangeMonth: true,\n\t\t\t\tshowSecond:false,\n\t\t\t\tshowMillisec:false,\n\t\t\t\tshowMicrosec:false,\n\t\t\t\tmaxDate:new Date(),\n\t\t\t\tonClose: function( selectedDate ) {\n\t\t\t\t\t$( \"#beginTime\" ).datetimepicker( \"option\", \"maxDate\", selectedDate );\n\t\t\t\t}\n\t\t\t});\n\t\t\t$(\"#beginTime\").datetimepicker(\"setDate\", new Date((new Date()) - 7*24*60*60*1000));\n\t\t\t$(\"#endTime\").datetimepicker(\"setDate\", new Date());\n\t\t\t$(\"#searchBtn\").click(function(){\n\n\t\t\t})\n\t\t},\n\t\tgetValue:function(){\n\n\t\t},\n\t\tisOver:function(){\n\t\t\treturn true;\n\t\t}\n\t}\n}).apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__),\n\t\t\t\t__WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__))\n/* WEBPACK VAR INJECTION */}.call(this, __webpack_require__(/*! ./libs/jquery.min.js */ \"./libs/jquery.min.js\")))\n\n//# sourceURL=webpack:///./js/blocks/listSearch.js?");

/***/ }),

/***/ "./js/blocks/nav.js":
/*!**************************!*\
  !*** ./js/blocks/nav.js ***!
  \**************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

eval("/* WEBPACK VAR INJECTION */(function($) {var __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;window.NavDatas = null;\n!(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__,__webpack_require__(/*! api */ \"./js/api.js\"),__webpack_require__(/*! backbone */ \"./libs/backbone-min.js\"),__webpack_require__(/*! context */ \"./js/context_model.js\"),__webpack_require__(/*! common */ \"./js/common.js\"),__webpack_require__(/*! zTreeExcheck */ \"./libs/jquery.ztree.excheck-3.5.js\")], __WEBPACK_AMD_DEFINE_RESULT__ = (function(require,API,Backbone,context,common){\n    var zTree,\n        overFlag = false,\n        setting = {\n            check: {\n                enable: true\n            },\n            data: {\n                key:{\n                    name:'title'\n                },\n                simpleData: {\n                    enable: true,\n                    pIdKey: 'pid'\n                }\n            },\n            callback:{\n                onCheck:function(){\n                    overFlag=false;\n                    context.setCurStations(navView.getCheckedData());\n                }\n            }\n        },\n        navView;\n    var nav_extobj = {\n        el:$(\"#nav\"),\n        name:\"nav\",\n        data:null,\n        tree:null,\n        navPlugin:null,\n        initialize:function(data){\n            var _this = this;\n            _this.listenTo(Backbone.Events,\"nav:update\",function(data){\n                if(NavDatas == JSON.stringify(data)){\n                    return;\n                }\n                NavDatas = JSON.stringify(data);\n                console.log('nav update', data);\n                _this.data = data.list;\n                _this.filterData().render();\n                overFlag = true;\n            });\n        },\n        /*selectFirst:function(){\n         if(this.tree){\n         var nodes = this.tree.getNodes();\n         if(nodes.length){\n         this.tree.checkNode(nodes[0],true,true,true);\n         }\n         }\n         },*/\n        filterData:function(){\n            return this;\n        },\n        getCheckedData:function(){\n            var checkedNodes = this.tree.getCheckedNodes(),\n                checkedData = {};\n            $.each(checkedNodes,function(i,node){\n                checkedData[node.id] = {\n                    id:node.id,\n                    pId:node.pId,\n                    name:node.name,\n                    level:node.level\n                }\n            })\n            return checkedData;\n        },\n        expandNode:function(){\n            var tree = this.tree;\n            var nodes = tree.transformToArray(tree.getNodes());\n            for(var i = 0 ; i < nodes.length ; i++){\n                var cnode = nodes[i];\n                if(cnode.leveltype == 3){\n                    tree.expandNode(cnode,false);\n                }else{\n                    tree.expandNode(cnode,true);\n                }\n            }\n        },\n        render:function(){\n            console.log('render tree now',this.ids);\n            $.fn.zTree.init($(\"#nav\"), setting, this.data);\n            this.tree = $.fn.zTree.getZTreeObj('nav');\n            // this.tree.expandAll(false);\n            this.expandNode();\n            var _this = this;\n            var hash = window.location.hash;\n            if(/^#\\/manage\\/station\\/[0-9]+$/.test(hash)){\n                this.ids = {\n                    sid: hash.match(/([0-9]+)/)[1]\n                }\n            }\n            if(this.ids){\n                if(this.ids.sid){\n\n                    var nodes = this.tree.getNodes();\n                    for (var i=0, l=nodes.length; i < l; i++) {\n                        if(nodes[i].leveltype === 1){\n                            var childrens = nodes[i].children;\n                            for(var j = 0 ; j < childrens.length ;j++){\n                                var subChildren = childrens[j].children;\n                                if(!subChildren){\n                                    continue;\n                                }\n\n                                for(var k = 0 ; k < subChildren.length ; k++){\n                                    subChildren[k].children.forEach(function(node){\n\n                                        if(node.leveltype === 2){\n                                            if(node.id === _this.ids.sid){\n\n                                                _this.tree.checkNode(node, true, true);\n                                            }\n                                            //this.tree.checkNode(node, true, true);\n                                        }\n                                    });\n\n                                }\n                            }\n\n                        }\n\n                    }\n                }\n            }else{\n                this.tree.checkAllNodes(true);\n            }\n            return this;\n        }\n    }\n\n    return {\n        init:function(sys,listType,sub,ids){\n            if(!navView){\n                navView = new (Backbone.View.extend($.extend(true,{},nav_extobj,{ids:ids})))();\n            }else{\n                // delete navView;\n            }\n\n\n            return this;\n        },\n        run:function(cb){\n            API.getNavData(cb);\n        },\n        isOver:function(value){\n            if(typeof value == 'undefined'){\n                return !!overFlag;\n            }else{\n                overFlag = !!value;\n            }\n        },\n        getSites:function(){\n            var ids={ids:[],map:{}, pids: []},selectedNode;\n            if(navView.tree){\n                var selectedNode = navView.tree.getCheckedNodes();\n                $.each(selectedNode,function(i,node){\n                    if(node.leveltype == \"2\"){\n                        ids.ids.push(node.id);\n                        ids.pids.push(node.pid);\n                        ids.map[node.id] = node;\n                    }\n                })\n            }\n            return ids;\n        },\n        getTrueSites: function(){\n            var ids={ids:[],map:{}, pids: []},selectedNode;\n            if(navView.tree){\n                var selectedNode = navView.tree.getCheckedNodes();\n                $.each(selectedNode,function(i,node){\n                    if(node.leveltype == \"2\" && node.children && node.children.length > 0){\n                        ids.ids.push(node.id);\n                        ids.pids.push(node.pid);\n                        ids.map[node.id] = node;\n                    }\n                })\n            }\n            return ids;  \n        },\n        getSelectedNodePid: function(){\n            var getSelectedNodeId = [];\n            if(navView.tree){\n                var nodes = navView.tree.getSelectedNodes();\n                $.each(nodes, function(i,node){\n                    getSelectedNodeId.push(node.pid);\n                })\n\n            }\n            return getSelectedNodeId;\n        },\n        getSelectedNodeId: function(){\n            var getSelectedNodeId = -1;\n            if(navView.tree){\n                var nodes = navView.tree.getSelectedNodes();\n                $.each(nodes, function(i,node){\n                    getSelectedNodeId = node.id;\n                })\n\n            }\n            return getSelectedNodeId\n        },\n        getGroups:function(){\n            var ids={ids:[],map:{}},selectedNode;\n            if(navView.tree){\n                selectedNode = navView.tree.getCheckedNodes();\n                $.each(selectedNode,function(i,node){\n                    if(node.leveltype == \"3\"){\n                        ids.ids.push(node.id);\n                        ids.map[node.id] = node;\n                    }\n                })\n            }\n            return ids;\n        },\n        getBatterys:function(siteid){\n            var ids={ids:[],map:{}},groups,groupids=[],selectedNode;\n\n            if(siteid){\n                groups = this.getGroups();\n                $.each(groups.ids,function(i,id){\n                    if(groups.map[id].pid == siteid){\n                        groupids.push(id);\n                    }\n                })\n            }\n            if(siteid && !groupids.length){return false}\n            if(navView.tree){\n                selectedNode = navView.tree.getCheckedNodes();\n                $.each(selectedNode,function(i,node){\n                    if(node.leveltype == \"4\"){\n                        if(groupids && groupids.length && !common.inArray(node.pid,groupids)){\n                            return;\n                        }\n                        // console.log(siteid, node.id)\n                        if(node.id.substring(0,10) == siteid){\n                            ids.ids.push(node.id);\n                            ids.map[node.id] = node;\n                        }\n                    }\n                })\n            }\n            \n            console.log('getBatterys', ids, siteid);\n            return ids;\n        },\n        getBatteryIds: function(){\n            var ids={ids:[],map:{}},selectedNode;\n            if(navView.tree){\n                selectedNode = navView.tree.getCheckedNodes();\n                $.each(selectedNode,function(i,node){\n                    if(node.leveltype == \"4\"){\n                        ids.ids.push(node.id);\n                        ids.map[node.id] = node;\n                    }\n                })\n            }\n            return ids;\n        }\n    };\n}).apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__),\n\t\t\t\t__WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__))\n\n/* WEBPACK VAR INJECTION */}.call(this, __webpack_require__(/*! ./libs/jquery.min.js */ \"./libs/jquery.min.js\")))\n\n//# sourceURL=webpack:///./js/blocks/nav.js?");

/***/ }),

/***/ "./js/main.js":
/*!********************!*\
  !*** ./js/main.js ***!
  \********************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

eval("/* WEBPACK VAR INJECTION */(function($) {var __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;!(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__,__webpack_require__(/*! backbone */ \"./libs/backbone-min.js\"),__webpack_require__(/*! context */ \"./js/context_model.js\"),__webpack_require__(/*! ui */ \"./js/ui.js\"),__webpack_require__(/*! common */ \"./js/common.js\"), __webpack_require__(/*! stationsinfoDialog */ \"./js/dialog-stationsinfo.js\"),__webpack_require__(/*! api */ \"./js/api.js\"),__webpack_require__(/*! stationsinfoDialog */ \"./js/dialog-stationsinfo.js\"),__webpack_require__(/*! map */ \"./js/map.js\"),__webpack_require__(/*! blocks/list */ \"./js/blocks/list.js\"),__webpack_require__(/*! blocks/nav */ \"./js/blocks/nav.js\"),__webpack_require__(/*! blocks/charts */ \"./js/blocks/charts.js\"),__webpack_require__(/*! blocks/listSearch */ \"./js/blocks/listSearch.js\"),__webpack_require__(/*! blocks/list */ \"./js/blocks/list.js\"),__webpack_require__(/*! blocks/nav */ \"./js/blocks/nav.js\")], __WEBPACK_AMD_DEFINE_RESULT__ = (function(require,Backbone,context,ui,common, stationsinfoDialog,API){\r\n    var curModules = [],\r\n        maxLoadingTime = 1000,\r\n        curLoadingTime = 0;\r\n    window.navTree = null;\r\n\r\n    function init(sys,pageType,sub,params){\r\n        $(\"#endTime\").datetimepicker(\"setDate\", new Date());\r\n        $(\"#beginTime\").datetimepicker(\"setDate\", new Date((new Date()) - 7*24*60*60*1000));\r\n        var $stationPop = $(\".stationPop\");\r\n        $(\"body\").stopTime('irc');\r\n        $stationPop.off('click').on('click',function(e){\r\n\r\n            var id = navTree.getSites().ids;\r\n\r\n            if(id < 0){\r\n                alert('请选择站点');\r\n                return;\r\n            }\r\n            for(var i = 0 ; i < id.length ; i++){\r\n                id[i] = id[i]+\"0000\";\r\n            }\r\n\r\n            stationsinfoDialog.show(id.join(\",\"));\r\n        });\r\n\r\n        $(\".exportdata\").hide();\r\n        var roleid = JSON.parse(localStorage.getItem('userinfo')).role;\r\n        var canedit = JSON.parse(localStorage.getItem('userinfo')).canedit;\r\n        var area = JSON.parse(localStorage.getItem(\"userinfo\")).area;\r\n        if(roleid == 2 && canedit != 1){\r\n            $(\".list-edit-btn\").hide();\r\n            $(\".list-del-btn\").hide();\r\n            $(\"#listBtns li.undis\").hide();\r\n        }\r\n        /**\r\n         * 1 超级管理员\r\n         * 2 管理员\r\n         * 3 观察员\r\n         */\r\n        if(roleid != 1){\r\n            $(\".manage.newstations\").hide();\r\n            $(\".manage.ignores\").hide();\r\n        }else{\r\n            if(sys == \"manage\"){\r\n                $(\".manage.newstations\").show();\r\n                $(\".manage.ignores\").show();\r\n            }else{\r\n                $(\".manage.newstations\").hide();\r\n                $(\".manage.ignores\").hide();\r\n            }\r\n        }\r\n        if(roleid == 3){\r\n            $(\".switch-btn.settings\").hide();//\r\n            $(\".option.stationOption\").hide();\r\n            $(\".option.groupOption\").hide();\r\n            $(\".option.batteryOption\").hide();\r\n            \r\n            //$(\".manage.newstations\").show();\r\n\r\n        }\r\n        if(roleid == 2){\r\n            $(\"#addBMS\").hide();\r\n            $(\"#addCompany\").hide();\r\n            $(\"#addBattery\").hide();\r\n            $(\"#addUps\").hide();\r\n            $(\"#addStation\").hide();\r\n\r\n            \r\n            $(\".settings.message\").hide();\r\n\r\n            $(\".option.stationOption\").hide();\r\n            $(\".option.groupOption\").hide();\r\n            $(\".option.batteryOption\").hide();\r\n\r\n\r\n        }\r\n\r\n        if(roleid == 2 && area != \"*\"){\r\n            $(\".optionSetting.otherOption\").hide();\r\n        }\r\n\r\n\r\n\r\n\r\n        Backbone.listenTo(Backbone.Events,\"stat\",function(data){\r\n            $(\"#stat_login_time\").html(data.loginTime);\r\n            $(\"#stat_sys_uptime\").html(data.startTime);\r\n            $(\"#stat_manager\").html(data.name);\r\n        })\r\n\r\n        API.stat();\r\n        $(\"#logout\").off(\"click\").bind(\"click\",function(){\r\n            if(confirm(\"确定要退出系统吗？\")){\r\n                $.ajax({\r\n                    url:\"/api/index.php/login/loginOut\",\r\n                    type:\"get\",\r\n                    success:function(){\r\n                        localStorage.removeItem('userinfo');\r\n                        window.location.href = \"/\";\r\n                    }\r\n                })\r\n            }\r\n\r\n        })\r\n\r\n        var _arg = arguments,\r\n            $navTreeWrap = $(\"#navTree\"),\r\n            $collectWrap = $(\"#collect\").hide(),\r\n            $collectIRWrap = $(\"#collectIRWrap\").hide(),\r\n            $durationWrap = $(\"#duration\").hide(),\r\n            $searchWrap = $(\".search-jqtransform\").hide();\r\n            $stationPop = $('.stationPop');\r\n\r\n        $('.cj-btn').click(function(){\r\n            // 查询\r\n\r\n        })\r\n\r\n\r\n\r\n        $stationPopDialog = null;\r\n        Promise.resolve(/*! AMD require */).then(function() { var __WEBPACK_AMD_REQUIRE_ARRAY__ = [__webpack_require__(/*! dialogstationsinfo */ \"./js/dialog-stationsinfo.js\")]; (function(dialog){\r\n            $stationPopDialog = dialog.init();\r\n            // dialog && dialog.show(id.join(\",\"));\r\n        }).apply(null, __WEBPACK_AMD_REQUIRE_ARRAY__);}).catch(__webpack_require__.oe)\r\n\r\n        $(\"#dataItem\").html('');\r\n\r\n        //ui.collectAuto();\r\n\r\n\r\n        if(\"map\" == sys){\r\n            Promise.resolve(/*! AMD require */).then(function() { var __WEBPACK_AMD_REQUIRE_ARRAY__ = [__webpack_require__(/*! map */ \"./js/map.js\")]; (function(map){\r\n                ui.resize();\r\n                map.init();\r\n            }).apply(null, __WEBPACK_AMD_REQUIRE_ARRAY__);}).catch(__webpack_require__.oe)\r\n            return;\r\n        }\r\n\r\n        setTimeout(function(){\r\n            var refreshpage = ['#/manage/station', '#/manage/group', '#/manage/battery', '#/manage/caution','#/manage/systemAlarm'];\r\n            var time = parseInt($(\"#collectDuration\").val());\r\n            // 判断是否在实时页面\r\n            var hash = window.location.hash;\r\n\r\n            if(refreshpage.indexOf(hash) > -1\r\n                    || hash.indexOf(\"manage/station\")>-1 ){\r\n\r\n                if(time\r\n                    && localStorage.getItem(\"collecting\") == 'true'){\r\n\r\n                    $(\"body\").addClass('collecting').everyTime(time+\"s\",'collect',API.collect);\r\n                    $(\"#startCollectBtn\").hide();\r\n                    $(\".tzcj\").css('display','block');\r\n                }else{\r\n                    $(\"body\").removeClass('collecting').stopTime('collect',API.collect);\r\n                    $(\"#startCollectBtn\").css('display','block');\r\n                    $(\".tzcj\").hide();\r\n                }\r\n\r\n            }else{\r\n                $(\"body\").removeClass('collecting').stopTime('collect',API.collect);\r\n                $(\"#startCollectBtn\").css('display','none');\r\n                $(\".tzcj\").hide();\r\n            }\r\n        },1000);\r\n\r\n\r\n        common.loadTips.show(\"系统加载中，请稍后...\");\r\n        if(/^caution$/.test(pageType)){\r\n\r\n            $(\"#dataItem\").html($(\"#listTpl\").html());\r\n            ui.downHide(true);\r\n            $(\".atype\").show();\r\n            $(\".stationPop\").show();\r\n            $collectWrap.show();\r\n            if(pageType == 'battery'){\r\n                $(\".list-bottom.undis\").show();\r\n            }else{\r\n                $(\".list-bottom.upage\").show();\r\n            }\r\n\r\n            ui.switchChartBtns(pageType);\r\n            Promise.resolve(/*! AMD require */).then(function() { var __WEBPACK_AMD_REQUIRE_ARRAY__ = [__webpack_require__(/*! blocks/list */ \"./js/blocks/list.js\"),__webpack_require__(/*! blocks/nav */ \"./js/blocks/nav.js\"),__webpack_require__(/*! api */ \"./js/api.js\")]; (function(list,nav,API){\r\n\r\n                afterInit(sys,pageType,sub);\r\n\r\n                if(!navTree){\r\n                    refreshModules([nav],_arg);\r\n                    nav.run(function(){\r\n                        navTree=nav;\r\n\r\n                        refreshModules([list],_arg);\r\n                    });\r\n\r\n                }else{\r\n\r\n                    refreshModules([list],_arg);\r\n                }\r\n\r\n                API.getLinkingStationNum().getParam({},'refresh:get');\r\n\r\n                isOver();\r\n            }).apply(null, __WEBPACK_AMD_REQUIRE_ARRAY__);}).catch(__webpack_require__.oe)\r\n        }\r\n\r\n        if(/^(newstations|ignores)$/.test(pageType)){\r\n\r\n            $(\"#dataItem\").html($(\"#listTpl\").html());\r\n            ui.downHide(true);\r\n            $collectWrap.show();\r\n            $(\".stationPop\").hide();\r\n            if(pageType == 'battery'){\r\n                $(\".list-bottom.undis\").show();\r\n            }else{\r\n                $(\".list-bottom.upage\").show();\r\n            }\r\n\r\n            ui.switchChartBtns(pageType);\r\n            Promise.resolve(/*! AMD require */).then(function() { var __WEBPACK_AMD_REQUIRE_ARRAY__ = [__webpack_require__(/*! blocks/list */ \"./js/blocks/list.js\"),__webpack_require__(/*! blocks/nav */ \"./js/blocks/nav.js\"),__webpack_require__(/*! api */ \"./js/api.js\")]; (function(list,nav,API){\r\n\r\n                afterInit(sys,pageType,sub);\r\n\r\n                if(!navTree){\r\n                    refreshModules([nav],_arg);\r\n                    nav.run(function(){\r\n                        navTree=nav;\r\n\r\n                        refreshModules([list],_arg);\r\n                    });\r\n\r\n                }else{\r\n\r\n                    refreshModules([list],_arg);\r\n                }\r\n\r\n                API.getLinkingStationNum().getParam({},'refresh:get');\r\n\r\n                isOver();\r\n            }).apply(null, __WEBPACK_AMD_REQUIRE_ARRAY__);}).catch(__webpack_require__.oe)\r\n        }\r\n\r\n        \r\n        \r\n\r\n        if(/^systemAlarm$/.test(pageType)){\r\n\r\n            $(\"#dataItem\").html($(\"#listTpl\").html());\r\n            ui.downHide(true);\r\n            $collectWrap.show();\r\n            $(\".stationPop\").show();\r\n            if(pageType == 'battery'){\r\n                $(\".list-bottom.undis\").show();\r\n            }else{\r\n                $(\".list-bottom.upage\").show();\r\n            }\r\n\r\n            ui.switchChartBtns(pageType);\r\n            Promise.resolve(/*! AMD require */).then(function() { var __WEBPACK_AMD_REQUIRE_ARRAY__ = [__webpack_require__(/*! blocks/list */ \"./js/blocks/list.js\"),__webpack_require__(/*! blocks/nav */ \"./js/blocks/nav.js\"),__webpack_require__(/*! api */ \"./js/api.js\")]; (function(list,nav,API){\r\n\r\n                afterInit(sys,pageType,sub);\r\n\r\n                if(!navTree){\r\n                    refreshModules([nav],_arg);\r\n                    nav.run(function(){\r\n                        navTree=nav;\r\n\r\n                        refreshModules([list],_arg);\r\n                    });\r\n\r\n                }else{\r\n\r\n                    refreshModules([list],_arg);\r\n                }\r\n\r\n                API.getLinkingStationNum().getParam({},'refresh:get');\r\n\r\n                isOver();\r\n            }).apply(null, __WEBPACK_AMD_REQUIRE_ARRAY__);}).catch(__webpack_require__.oe)\r\n        }\r\n\r\n\r\n\r\n        if (/^(station|group|battery)$/.test(pageType)) {\r\n            $(\"#dataItem\").html($(\"#listTpl\").html());\r\n            ui.downShow(true);\r\n        \t$collectWrap.show();\r\n            $(\".stationPop\").show();\r\n            if(pageType == 'battery'){\r\n                $(\".list-bottom.undis\").show();\r\n            }else{\r\n                $(\".list-bottom.upage\").show();\r\n            }\r\n\r\n            ui.switchChartBtns(pageType);\r\n            Promise.resolve(/*! AMD require */).then(function() { var __WEBPACK_AMD_REQUIRE_ARRAY__ = [__webpack_require__(/*! blocks/charts */ \"./js/blocks/charts.js\"),__webpack_require__(/*! blocks/list */ \"./js/blocks/list.js\"),__webpack_require__(/*! blocks/nav */ \"./js/blocks/nav.js\"),__webpack_require__(/*! api */ \"./js/api.js\")]; (function(chart,list,nav,API){\r\n\r\n                afterInit(sys,pageType,sub);\r\n                if(!navTree){\r\n                    refreshModules([nav],_arg);\r\n                    nav.run(function(){\r\n                        navTree=nav;\r\n\r\n                        refreshModules([list,chart],_arg);\r\n                    });\r\n\r\n                }else{\r\n\r\n                    refreshModules([list,chart],_arg);\r\n                }\r\n\r\n                API.getLinkingStationNum().getParam({},'refresh:get');\r\n\r\n                isOver();\r\n            }).apply(null, __WEBPACK_AMD_REQUIRE_ARRAY__);}).catch(__webpack_require__.oe)\r\n        }else if (/^(IRCollect)$/.test(pageType)) {\r\n            $(\".stationPop\").hide();\r\n            ui.downHide(true);\r\n            $(\".collect-jqtransform\").jqTransform();\r\n\r\n            $(\"#dataItem\").html($(\"#listTpl\").html());\r\n        \t$collectIRWrap.show();\r\n            // $(\".list-bottom.upage\").show();\r\n            Promise.resolve(/*! AMD require */).then(function() { var __WEBPACK_AMD_REQUIRE_ARRAY__ = [__webpack_require__(/*! blocks/list */ \"./js/blocks/list.js\"),__webpack_require__(/*! blocks/nav */ \"./js/blocks/nav.js\")]; (function(list,nav){\r\n                refreshModules([nav,list],_arg);\r\n                // collectPswdDialog.show();\r\n                afterInit(sys,pageType,sub);\r\n                if(!navTree){\r\n                    nav.run();\r\n                    navTree=nav;\r\n                }\r\n                \r\n                isOver();\r\n            }).apply(null, __WEBPACK_AMD_REQUIRE_ARRAY__);}).catch(__webpack_require__.oe)\r\n        }else if (/^(limitation|baseinfo|equipment|option|adminConfig)$/.test(pageType)) {\r\n            ui.downHide(true);\r\n            $(\".stationPop\").hide();\r\n            $(\"#dataItem\").html($(\"#listTpl\").html());\r\n        \t$durationWrap.show();\r\n\r\n            Promise.resolve(/*! AMD require */).then(function() { var __WEBPACK_AMD_REQUIRE_ARRAY__ = [__webpack_require__(/*! blocks/list */ \"./js/blocks/list.js\"),__webpack_require__(/*! blocks/nav */ \"./js/blocks/nav.js\")]; (function(list,nav){\r\n                refreshModules([nav,list],_arg);\r\n                afterInit(sys,pageType,sub);\r\n                if(!navTree){\r\n                    nav.run();\r\n                    navTree=nav;\r\n                }\r\n                \r\n                isOver();\r\n            }).apply(null, __WEBPACK_AMD_REQUIRE_ARRAY__);}).catch(__webpack_require__.oe)\r\n        }else if(/^(uilog)$/.test(pageType)){\r\n            $(\".stationPop\").hide();\r\n            $(\"#dataItem\").html($(\"#listTpl\").html());\r\n            ui.downHide(true);\r\n\r\n            $searchWrap.show();\r\n            $searchWrap.jqTransform();\r\n            $(\".exportdata\").hide();\r\n            //$durationWrap.show();\r\n            $(\".list-bottom.upage\").show();\r\n            $(\".report-caution-selector\",$searchWrap).parents('.jqTransformSelectWrapper').hide()\r\n            $(\".reportCaution\",$searchWrap).hide()\r\n            Promise.resolve(/*! AMD require */).then(function() { var __WEBPACK_AMD_REQUIRE_ARRAY__ = [__webpack_require__(/*! blocks/listSearch */ \"./js/blocks/listSearch.js\"),__webpack_require__(/*! blocks/list */ \"./js/blocks/list.js\"),__webpack_require__(/*! blocks/nav */ \"./js/blocks/nav.js\")]; (function(listSearch,list,nav){\r\n                afterInit(sys,pageType,sub);\r\n                if(!navTree){\r\n                    nav.run();\r\n                    navTree=nav;\r\n                }\r\n                refreshModules([nav,listSearch,list],_arg);\r\n                \r\n                isOver();\r\n            }).apply(null, __WEBPACK_AMD_REQUIRE_ARRAY__);}).catch(__webpack_require__.oe)\r\n        }else if(/^runlog$/.test(pageType)){\r\n            $(\"#dataItem\").html($(\"#listTpl\").html());\r\n            $(\".stationPop\").hide();\r\n            ui.downHide(true);\r\n            //$searchWrap.show();\r\n            //$searchWrap.jqTransform();\r\n            $(\".exportdata\").hide();\r\n\r\n            $(\".list-bottom.upage\").show();\r\n            $(\".report-caution-selector\",$searchWrap).parents('.jqTransformSelectWrapper').hide()\r\n            $(\".reportCaution\",$searchWrap).hide()\r\n                Promise.resolve(/*! AMD require */).then(function() { var __WEBPACK_AMD_REQUIRE_ARRAY__ = [__webpack_require__(/*! blocks/listSearch */ \"./js/blocks/listSearch.js\"),__webpack_require__(/*! blocks/list */ \"./js/blocks/list.js\"),__webpack_require__(/*! blocks/nav */ \"./js/blocks/nav.js\")]; (function(listSearch,list,nav){\r\n                    afterInit(sys,pageType,sub);    \r\n                    if(!navTree){\r\n                        refreshModules([nav],_arg);\r\n                        nav.run(function(){\r\n                            navTree=nav;\r\n                            refreshModules([listSearch,list],_arg);\r\n                                \r\n                        });\r\n                        \r\n                    }else{\r\n                        refreshModules([listSearch,list],_arg);\r\n                        \r\n                    }\r\n                    isOver();\r\n                }).apply(null, __WEBPACK_AMD_REQUIRE_ARRAY__);}).catch(__webpack_require__.oe)    \r\n\r\n        }else if (/^(qureyBattery|qureyStation|qureyGroup|qureyCaution)$/.test(pageType)) {\r\n            $(\"#dataItem\").html($(\"#listTpl\").html());\r\n            $(\".stationPop\").hide();\r\n            ui.downShow(false);\r\n            $searchWrap.show();\r\n            $searchWrap.jqTransform();\r\n            $(\".exportdata\").hide();\r\n\r\n            $(\".list-bottom.upage\").show();\r\n            $(\".report-caution-selector\",$searchWrap).parents('.jqTransformSelectWrapper').hide()\r\n            $(\".reportCaution\",$searchWrap).hide()\r\n            if(/^qureyCaution$/.test(pageType)){\r\n                $(\".report-caution-selector\",$searchWrap).parents('.jqTransformSelectWrapper').show()\r\n                $(\".reportCaution\",$searchWrap).show();\r\n                $searchWrap.jqTransform();\r\n                ui.downHide(true);\r\n                Promise.resolve(/*! AMD require */).then(function() { var __WEBPACK_AMD_REQUIRE_ARRAY__ = [__webpack_require__(/*! blocks/listSearch */ \"./js/blocks/listSearch.js\"),__webpack_require__(/*! blocks/list */ \"./js/blocks/list.js\"),__webpack_require__(/*! blocks/nav */ \"./js/blocks/nav.js\")]; (function(listSearch,list,nav){\r\n                    afterInit(sys,pageType,sub);\r\n                    if(!navTree){\r\n                        refreshModules([nav],_arg);\r\n                        nav.run(function(){\r\n                            navTree=nav;\r\n                            refreshModules([listSearch,list],_arg);\r\n                        });\r\n                        \r\n                    }else{\r\n                        refreshModules([listSearch,list],_arg);\r\n                    }\r\n                    isOver();\r\n                }).apply(null, __WEBPACK_AMD_REQUIRE_ARRAY__);}).catch(__webpack_require__.oe)\r\n            }else{\r\n                Promise.resolve(/*! AMD require */).then(function() { var __WEBPACK_AMD_REQUIRE_ARRAY__ = [__webpack_require__(/*! blocks/listSearch */ \"./js/blocks/listSearch.js\"),__webpack_require__(/*! blocks/list */ \"./js/blocks/list.js\"),__webpack_require__(/*! blocks/nav */ \"./js/blocks/nav.js\")]; (function(listSearch,list,nav){\r\n                    afterInit(sys,pageType,sub);    \r\n                    if(!navTree){\r\n                        refreshModules([nav],_arg);\r\n                        nav.run(function(){\r\n                            navTree=nav;\r\n                            refreshModules([listSearch,list],_arg);\r\n                                \r\n                        });\r\n                        \r\n                    }else{\r\n                        refreshModules([listSearch,list],_arg);\r\n                        \r\n                    }\r\n\r\n                    isOver();\r\n                }).apply(null, __WEBPACK_AMD_REQUIRE_ARRAY__);}).catch(__webpack_require__.oe)    \r\n            }\r\n            ui.downShow(false);\r\n            \r\n        }else if (/^(reportUilog|chargeOrDischarge|deviationTrend|batteryLife|reportCaution)$/.test(pageType)) {\r\n            ui.downHide(true);\r\n            $(\".stationPop\").hide();\r\n            $(\".exportdata\").show();\r\n            $(\"#dataItem\").html($(\"#listTpl\").html());\r\n            $searchWrap.show();\r\n            $searchWrap.jqTransform();\r\n            if(pageType != \"reportCaution\"){\r\n                $(\".report-caution-selector\",$searchWrap).parents('.jqTransformSelectWrapper').hide()\r\n                $(\".reportCaution\",$searchWrap).hide()\r\n            }else{\r\n                $(\".report-caution-selector\",$searchWrap).parents('.jqTransformSelectWrapper').show()\r\n                $(\".reportCaution\",$searchWrap).show()\r\n            }\r\n\r\n            $(\".list-bottom.upage\").show();\r\n\r\n            Promise.resolve(/*! AMD require */).then(function() { var __WEBPACK_AMD_REQUIRE_ARRAY__ = [__webpack_require__(/*! blocks/listSearch */ \"./js/blocks/listSearch.js\"),__webpack_require__(/*! blocks/list */ \"./js/blocks/list.js\"),__webpack_require__(/*! blocks/nav */ \"./js/blocks/nav.js\")]; (function(listSearch,list,nav){\r\n                refreshModules([nav,listSearch,list],_arg);\r\n                afterInit(sys,pageType,sub);\r\n                if(!navTree){\r\n                    nav.run();\r\n                    navTree=nav;\r\n                }\r\n\r\n                isOver();\r\n            }).apply(null, __WEBPACK_AMD_REQUIRE_ARRAY__);}).catch(__webpack_require__.oe)\r\n        }else if(/^(stationOption)$/.test(pageType)) {\r\n            $(\".stationPop\").hide();\r\n            $(\"#dataItem\").html($(\"#listTpl\").html());\r\n            ui.downHide(true);\r\n\r\n            $searchWrap.show();\r\n            $searchWrap.jqTransform();\r\n            $(\".exportdata\").show();\r\n            $(\".list-bottom.upage\").show();\r\n            $(\".report-caution-selector\",$searchWrap).parents('.jqTransformSelectWrapper').hide()\r\n            $(\".reportCaution\",$searchWrap).hide()\r\n            Promise.resolve(/*! AMD require */).then(function() { var __WEBPACK_AMD_REQUIRE_ARRAY__ = [__webpack_require__(/*! blocks/listSearch */ \"./js/blocks/listSearch.js\"),__webpack_require__(/*! blocks/list */ \"./js/blocks/list.js\"),__webpack_require__(/*! blocks/nav */ \"./js/blocks/nav.js\")]; (function(listSearch,list,nav){\r\n                \r\n                afterInit(sys,pageType,sub);\r\n                if(!navTree){\r\n                    refreshModules([nav],_arg);\r\n                    nav.run(function(){\r\n                        navTree=nav;   \r\n                        refreshModules([listSearch,list],_arg); \r\n                    });\r\n                    \r\n                }else{\r\n                    refreshModules([listSearch,list],_arg); \r\n                }\r\n\r\n                isOver();\r\n            }).apply(null, __WEBPACK_AMD_REQUIRE_ARRAY__);}).catch(__webpack_require__.oe)\r\n        \r\n        }else if(/^(manager|message|optionSetting|cautionEquipmentSetting|equipmentSetting|update|limitationSetting)$/.test(pageType)) {\r\n            ui.downHide(true);\r\n            $(\".stationPop\").hide();\r\n            if(\"otherOption\" == sub){\r\n                Promise.resolve(/*! AMD require */).then(function() { var __WEBPACK_AMD_REQUIRE_ARRAY__ = [__webpack_require__(/*! blocks/nav */ \"./js/blocks/nav.js\"),__webpack_require__(/*! api */ \"./js/api.js\")]; (function(nav,API) {\r\n                    $(\"#dataItem\").html($(\"#otherOptionEditTpl-tpl\").html());\r\n                    refreshModules([nav],_arg);\r\n                    afterInit(sys,pageType,sub);\r\n                    if(!navTree){\r\n                        nav.run();\r\n                        navTree=nav;\r\n                    }\r\n                    API.getParam({},\"otherOption:get\");\r\n\r\n                    isOver();\r\n                }).apply(null, __WEBPACK_AMD_REQUIRE_ARRAY__);}).catch(__webpack_require__.oe)\r\n            }else{\r\n                Promise.resolve(/*! AMD require */).then(function() { var __WEBPACK_AMD_REQUIRE_ARRAY__ = [__webpack_require__(/*! blocks/list */ \"./js/blocks/list.js\"),__webpack_require__(/*! blocks/nav */ \"./js/blocks/nav.js\")]; (function(list,nav) {\r\n                    $(\"#dataItem\").html($(\"#listTpl\").html());\r\n                    \r\n                    afterInit(sys,pageType,sub);\r\n                    if(!navTree){\r\n                        refreshModules([nav],_arg);\r\n                        nav.run(function(){\r\n                            navTree=nav;\r\n                            refreshModules([list],_arg);\r\n                        });\r\n                        \r\n                    }else{\r\n                        refreshModules([list],_arg);\r\n                    }\r\n\r\n                    isOver();\r\n                }).apply(null, __WEBPACK_AMD_REQUIRE_ARRAY__);}).catch(__webpack_require__.oe)\r\n            }\r\n\r\n        }else if(/^(stationInfo)$/.test(pageType)) {\r\n            $(\".stationPop\").hide();\r\n            ui.downHide(true);\r\n            if(sub==\"tree\"){//树形结构图\r\n                __webpack_require__.e(/*! AMD require */ 17).then(function() { var __WEBPACK_AMD_REQUIRE_ARRAY__ = [__webpack_require__(/*! blocks/customTree */ \"./js/blocks/customTree.js\"),__webpack_require__(/*! blocks/nav */ \"./js/blocks/nav.js\")]; (function(tree,nav) {\r\n                    \r\n                    afterInit(sys,pageType,sub);\r\n                    if(!navTree){\r\n                        refreshModules([nav],_arg);\r\n                        nav.run(function(){\r\n                            navTree=nav;   \r\n                            refreshModules([tree],_arg); \r\n                        });\r\n                        \r\n                    }else{\r\n                        refreshModules([tree],_arg); \r\n                    }\r\n\r\n                    isOver();\r\n                }).apply(null, __WEBPACK_AMD_REQUIRE_ARRAY__);}).catch(__webpack_require__.oe)\r\n            }else{\r\n                Promise.resolve(/*! AMD require */).then(function() { var __WEBPACK_AMD_REQUIRE_ARRAY__ = [__webpack_require__(/*! blocks/listSearch */ \"./js/blocks/listSearch.js\"),__webpack_require__(/*! blocks/list */ \"./js/blocks/list.js\"),__webpack_require__(/*! blocks/nav */ \"./js/blocks/nav.js\")]; (function(listSearch,list,nav) {\r\n                    $(\"#dataItem\").html($(\"#listTpl\").html());\r\n                    \r\n                    afterInit(sys,pageType,sub);\r\n                    if(!navTree){\r\n                        refreshModules([nav],_arg);\r\n                        nav.run(function(){\r\n                            navTree=nav;\r\n                            refreshModules([listSearch,list],_arg);\r\n                        });\r\n                        \r\n                    }else{\r\n                        refreshModules([listSearch,list],_arg);\r\n                    }\r\n\r\n                    isOver();\r\n\r\n                }).apply(null, __WEBPACK_AMD_REQUIRE_ARRAY__);}).catch(__webpack_require__.oe)\r\n            }\r\n        }\r\n\r\n        /*switch (pageType){\r\n            case 'station'://实时：站数据\r\n            case 'group'://实时：组数据\r\n            case 'battery'://实时：电池数据\r\n            case 'caution'://实时：报警数据\r\n\r\n\r\n                break;\r\n\r\n            case 'qureyStation'://查询：站数据\r\n            case 'qureyGroup'://查询：组数据\r\n            case 'qureyBattery'://查询：电池数据\r\n            case 'qureyCaution'://查询：报警数据\r\n            case 'uilog'://查询：UI日志\r\n            case 'baseinfo'://查询：基本信息\r\n            case 'limitation'://查询：门限\r\n            case 'runlog'://查询：运行日志\r\n            case 'option'://查询：参数\r\n            case 'adminConfig'://查询：管理员配置\r\n            case 'equipment'://查询：外空设备\r\n            case 'IRCollect'://查询：内阻采集\r\n\r\n            case 'reportCaution'://报表：报警数据\r\n            case 'batteryLife'://报表：电池使用年限\r\n            case 'chargeOrDischarge'://报表：充放电统计\r\n            case 'reportUilog'://报表：UI日志\r\n            case 'deviationTrend'://报表：偏离趋势\r\n\r\n            case 'stationInfo'://设置：站信息\r\n            case 'manager'://设置：管理员\r\n            case 'stationTree'://设置：树形结构图\r\n            case 'message'://设置：短信\r\n            case 'optionSetting'://设置：参数\r\n            case 'limitationSetting'://设置：门限\r\n            case 'cautionEquipmentSetting'://设置：报警设备\r\n            case 'systemInfo'://设置：基本信息\r\n            case 'chargeOrDischargevSetting'://设置：充放电维护信息\r\n            case 'equipmentSetting'://设置：外控设备\r\n            case 'update'://设置：升级\r\n        }*/\r\n    }\r\n    //页面是否加载完毕\r\n    function isOver(){\r\n        var over = !!curModules.length;\r\n        $.each(curModules,function(i,m){\r\n            if(!m.isOver()){\r\n                over = false;\r\n                return false;\r\n            }\r\n        })\r\n        if(over || curLoadingTime>maxLoadingTime){\r\n            common.loadTips.close();\r\n            curLoadingTime = 0;\r\n        }else{\r\n            curLoadingTime+=200;\r\n            $('body').oneTime('0.2s',function(){\r\n                isOver();\r\n            });\r\n        }\r\n        var ctotals_array = [\r\n            '#/settings/stationInfo/batterys',\r\n            '#/settings/stationInfo/stationSituation',\r\n            '#/settings/stationInfo/upsInfo',\r\n            '#/settings/optionSetting/stationOption',\r\n            '#/settings/optionSetting/groupOption',\r\n            '#/settings/optionSetting/batteryOption'\r\n        ];\r\n        if(ctotals_array.indexOf(window.location.hash) > -1){\r\n            $(\".list-bottom.ctotals\").show();\r\n        \r\n        }else{\r\n            $(\".list-bottom.ctotals\").hide();\r\n        }\r\n    }\r\n    function refreshModules(modules,arg){\r\n    \tvar adds = [];\r\n        destoryModules();\r\n        addModules(modules,arg);\r\n    }\r\n    function destoryModules(){\r\n        $.each(curModules,function(i,m){\r\n            m && m.destory && m.destory();\r\n        })\r\n        curModules = [];\r\n    }\r\n    function addModules(modules,arg){\r\n        var c = modules.shift();\r\n        if(c&&c.init){\r\n            c.init.apply(c,arg);\r\n            curModules.push(c);\r\n            addModules(modules,arg);\r\n        }\r\n        // $.each(modules,function(i,m){\r\n        //     if( m && m.init ){\r\n        //         m.init.apply(m,arg);\r\n        //         curModules.push(m);\r\n        //     }\r\n        // })\r\n    }\r\n\r\n    function afterInit(sys,pageType,sub){\r\n        ui.resize().switchNav(sys,pageType,sub);\r\n    }\r\n    return {\r\n        init:function(sys,pageType,sub,ids){\r\n            pagetype = pageType;\r\n            init(sys,pageType,sub,ids);\r\n            if(ids){\r\n\r\n            }\r\n            stationsinfoDialog.init();\r\n            return this;\r\n        },\r\n        refresh:function(sys,pageType,sub){\r\n            pagetype = pageType;\r\n            init(sys,pageType,sub);\r\n        }\r\n    };\r\n}).apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__),\n\t\t\t\t__WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__))\r\n\n/* WEBPACK VAR INJECTION */}.call(this, __webpack_require__(/*! ./libs/jquery.min.js */ \"./libs/jquery.min.js\")))\n\n//# sourceURL=webpack:///./js/main.js?");

/***/ }),

/***/ "./libs/dataTables.fixedHeader.min.js":
/*!********************************************!*\
  !*** ./libs/dataTables.fixedHeader.min.js ***!
  \********************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

eval("var __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;/*!\n FixedHeader 3.1.0\n ©2009-2015 SpryMedia Ltd - datatables.net/license\n*/\n\n(function(e){ true?!(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__(/*! jquery */ \"./libs/jquery.min.js\"),__webpack_require__(/*! table */ \"./libs/jquery.dataTables.js\")], __WEBPACK_AMD_DEFINE_RESULT__ = (function(t){return e(t,window,document)}).apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__),\n\t\t\t\t__WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__)):undefined})(function(e,t,n,r){var i=e.fn.dataTable,s=0,o=function(n,r){if(!(this instanceof o))throw\"FixedHeader must be initialised with the 'new' keyword.\";!0===r&&(r={}),n=new i.Api(n),this.c=e.extend(!0,{},o.defaults,r),this.s={dt:n,position:{theadTop:0,tbodyTop:0,tfootTop:0,tfootBottom:0,width:0,left:0,tfootHeight:0,theadHeight:0,windowHeight:e(t).height(),visible:!0},headerMode:null,footerMode:null,autoWidth:n.settings()[0].oFeatures.bAutoWidth,namespace:\".dtfc\"+s++,scrollLeft:{header:-1,footer:-1},enable:!0},this.dom={floatingHeader:null,thead:e(n.table().header()),tbody:e(n.table().body()),tfoot:e(n.table().footer()),header:{host:null,floating:null,placeholder:null},footer:{host:null,floating:null,placeholder:null}},this.dom.header.host=this.dom.thead.parent(),this.dom.footer.host=this.dom.tfoot.parent();var u=n.settings()[0];if(u._fixedHeader)throw\"FixedHeader already initialised on table \"+u.nTable.id;u._fixedHeader=this,this._constructor()};return e.extend(o.prototype,{enable:function(e){this.s.enable=e,this.c.header&&this._modeChange(\"in-place\",\"header\",!0),this.c.footer&&this.dom.tfoot.length&&this._modeChange(\"in-place\",\"footer\",!0),this.update()},headerOffset:function(e){return e!==r&&(this.c.headerOffset=e,this.update()),this.c.headerOffset},footerOffset:function(e){return e!==r&&(this.c.footerOffset=e,this.update()),this.c.footerOffset},update:function(){this._positions(),this._scroll(!0)},_constructor:function(){var n=this,r=this.s.dt;e(t).on(\"scroll\"+this.s.namespace,function(){n._scroll()}).on(\"resize\"+this.s.namespace,function(){n.s.position.windowHeight=e(t).height(),n.update()}),r.on(\"column-reorder.dt.dtfc column-visibility.dt.dtfc draw.dt.dtfc\",function(){n.update()}),r.on(\"destroy.dtfc\",function(){r.off(\".dtfc\"),e(t).off(n.s.namespace)}),this._positions(),this._scroll()},_clone:function(t,n){var r=this.s.dt,i=this.dom[t],s=\"header\"===t?this.dom.thead:this.dom.tfoot;!n&&i.floating?i.floating.removeClass(\"fixedHeader-floating fixedHeader-locked\"):(i.floating&&(i.placeholder.remove(),i.floating.children().detach(),i.floating.remove()),i.floating=e(r.table().node().cloneNode(!1)).removeAttr(\"id\").append(s).appendTo(\"body\"),i.placeholder=s.clone(!1),i.host.append(i.placeholder),this._matchWidths(i.placeholder,i.floating))},_matchWidths:function(t,n){var r=function(r){var i=e(r,t).map(function(){return e(this).width()}).toArray();e(r,n).each(function(t){e(this).width(i[t]).css(\"min-width\",i[t])})};r(\"th\"),r(\"td\")},_unsize:function(t){var n=this.dom[t].floating;n&&(\"footer\"===t||\"header\"===t&&!this.s.autoWidth)&&e(\"th, td\",n).css(\"width\",\"\")},_horizontal:function(e,t){var n=this.dom[e],r=this.s.position,i=this.s.scrollLeft;n.floating&&i[e]!==t&&(n.floating.css(\"left\",r.left-t),i[e]=t)},_modeChange:function(e,t,n){var r=this.dom[t],i=this.s.position;if(\"in-place\"===e){if(r.placeholder&&(r.placeholder.remove(),r.placeholder=null),this._unsize(t),r.host.append(\"header\"===t?this.dom.thead:this.dom.tfoot),r.floating)r.floating.remove(),r.floating=null}else\"in\"===e?(this._clone(t,n),r.floating.addClass(\"fixedHeader-floating\").css(\"header\"===t?\"top\":\"bottom\",this.c[t+\"Offset\"]).css(\"left\",i.left+\"px\").css(\"width\",i.width+\"px\"),\"footer\"===t&&r.floating.css(\"top\",\"\")):\"below\"===e?(this._clone(t,n),r.floating.addClass(\"fixedHeader-locked\").css(\"top\",i.tfootTop-i.theadHeight).css(\"left\",i.left+\"px\").css(\"width\",i.width+\"px\")):\"above\"===e&&(this._clone(t,n),r.floating.addClass(\"fixedHeader-locked\").css(\"top\",i.tbodyTop).css(\"left\",i.left+\"px\").css(\"width\",i.width+\"px\"));this.s.scrollLeft.header=-1,this.s.scrollLeft.footer=-1,this.s[t+\"Mode\"]=e},_positions:function(){var t=this.s.dt.table(),n=this.s.position,r=this.dom,t=e(t.node()),i=t.children(\"thead\"),s=t.children(\"tfoot\"),r=r.tbody;n.visible=t.is(\":visible\"),n.width=t.outerWidth(),n.left=t.offset().left,n.theadTop=i.offset().top,n.tbodyTop=r.offset().top,n.theadHeight=n.tbodyTop-n.theadTop,s.length?(n.tfootTop=s.offset().top,n.tfootBottom=n.tfootTop+s.outerHeight(),n.tfootHeight=n.tfootBottom-n.tfootTop):(n.tfootTop=n.tbodyTop+r.outerHeight(),n.tfootBottom=n.tfootTop,n.tfootHeight=n.tfootTop)},_scroll:function(t){var r=e(n).scrollTop(),i=e(n).scrollLeft(),s=this.s.position,o;this.s.enable&&(this.c.header&&(o=!s.visible||r<=s.theadTop-this.c.headerOffset?\"in-place\":r<=s.tfootTop-s.theadHeight-this.c.headerOffset?\"in\":\"below\",(t||o!==this.s.headerMode)&&this._modeChange(o,\"header\",t),this._horizontal(\"header\",i)),this.c.footer&&this.dom.tfoot.length)&&(r=!s.visible||r+s.windowHeight>=s.tfootBottom+this.c.footerOffset?\"in-place\":s.windowHeight+r>s.tbodyTop+s.tfootHeight+this.c.footerOffset?\"in\":\"above\",(t||r!==this.s.footerMode)&&this._modeChange(r,\"footer\",t),this._horizontal(\"footer\",i))}}),o.version=\"3.1.0\",o.defaults={header:!0,footer:!1,headerOffset:0,footerOffset:0},e.fn.dataTable.FixedHeader=o,e.fn.DataTable.FixedHeader=o,e(n).on(\"init.dt.dtb\",function(e,t){if(\"dt\"===e.namespace){var n=t.oInit.fixedHeader||i.defaults.fixedHeader;n&&!t._fixedHeader&&new o(t,n)}}),i.Api.register(\"fixedHeader()\",function(){}),i.Api.register(\"fixedHeader.adjust()\",function(){return this.iterator(\"table\",function(e){(e=e._fixedHeader)&&e.update()})}),i.Api.register(\"fixedHeader.enable()\",function(e){return this.iterator(\"table\",function(t){(t=t._fixedHeader)&&t.enable(e!==r?e:!0)})}),i.Api.register(\"fixedHeader.disable()\",function(){return this.iterator(\"table\",function(e){(e=e._fixedHeader)&&e.enable(!1)})}),e.each([\"header\",\"footer\"],function(e,t){i.Api.register(\"fixedHeader.\"+t+\"Offset()\",function(e){var n=this.context;return e===r?n.length&&n[0]._fixedHeader?n[0]._fixedHeader[t+\"Offset\"]():r:this.iterator(\"table\",function(n){(n=n._fixedHeader)&&n[t+\"Offset\"](e)})})}),o});\n\n//# sourceURL=webpack:///./libs/dataTables.fixedHeader.min.js?");

/***/ })

}]);