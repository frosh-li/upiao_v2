(window["webpackJsonp"] = window["webpackJsonp"] || []).push([[3],{

/***/ "./js/dialog-login.js":
/*!****************************!*\
  !*** ./js/dialog-login.js ***!
  \****************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

eval("/* WEBPACK VAR INJECTION */(function($) {var __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;!(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__,__webpack_require__(/*! api */ \"./js/api.js\"),__webpack_require__(/*! common */ \"./js/common.js\")], __WEBPACK_AMD_DEFINE_RESULT__ = (function(require,API,common){\n    var view = null,\n        deviceId,\n        config = {\n            extobj : {\n                data:null,\n                listPlugin:[],\n                el:'#loginTpl-dialog',\n                events:{\n                    \"click .loginsubmit\":\"onsubmit\",\n                    \"click .cancel-btn\":\"oncancel\",\n                    \"click .chanagepwd\":\"chanagepwd\"\n                },\n                initialize:function(data){\n                    var _this = this;\n                    _this.listenTo(Backbone.Events,\"login:box\",function(data){\n                        console.log(data);\n                        localStorage.setItem('userinfo', JSON.stringify(data));\n                        window.location.href=\"#/manage/station\";\n                        window.location.reload();\n                        _this.oncancel();\n                    })\n                    _this.listenTo(Backbone.Events,\"login:box:fail\",function(data){\n                        alert('登录失败，请重试');\n                    })\n                    _this.listenTo(Backbone.Events,\"login:cpwd\",function(data){\n                        alert('密码修改成功');\n                        _this.oncancel();\n                    })\n                    _this.listenTo(Backbone.Events,\"login:cpwd:fail\",function(data){\n                        alert('密码修改失败');\n                    })\n                },\n                setValue:function(){\n                },\n                getParam:function(){\n                    return common.getFormValue(this.el,true);\n                },\n                showErrTips:function(tips){\n                    alert(tips);\n                    return false;\n                },\n                validate:function(param){\n                    \n                    return true;\n                },\n                onsubmit:function(){\n                    var _this = this,\n                        _param = _this.getParam();\n                    _param.refresh = 1;\n                    if(_this.validate(_param)){\n                        API.login(_param);\n                    }\n                },\n                chanagepwd:function(){\n                    // this.stopListening();\n                    var _this = this,\n                        _param = _this.getParam();\n                    _param.chanagepwd = 1;\n                    if(_this.validate(_param)){\n                        API.login(_param);\n                    }\n                },\n                oncancel:function(){\n                    this.stopListening();\n                    this.dialogObj.dialog( \"destroy\" );\n                    $(\".ui-dialog,.ui-widget-overlay\").remove();\n                    deviceId=\"\";\n                }\n            }\n        };\n    return {\n        show:function(){\n            var $dialogWrap = $(\"#loginTpl-dialog\").length?$(\"#loginTpl-dialog\").replaceWith($($(\"#loginTpl\").html())):$($(\"#loginTpl\").html());\n            $dialogWrap.dialog({\n                modal:true,\n                show:300,\n                height:250,\n                width:500,\n                title:\"切换用户\",\n                close:function(evt,ui){\n                    view.oncancel();\n                },\n                open:function(){\n                    $(\"form.jqtransform\").jqTransform();\n                    view = new (Backbone.View.extend(config.extobj))();\n                    view.dialogObj = $(this);\n                }\n            });\n\n        },\n        detroy:function(){\n            view.oncancel();\n        }\n    };\n}).apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__),\n\t\t\t\t__WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__))\n/* WEBPACK VAR INJECTION */}.call(this, __webpack_require__(/*! ./libs/jquery.min.js */ \"./libs/jquery.min.js\")))\n\n//# sourceURL=webpack:///./js/dialog-login.js?");

/***/ })

}]);