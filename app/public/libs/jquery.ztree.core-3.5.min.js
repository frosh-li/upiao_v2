/*
 * JQuery zTree core v3.5.19.2
 * http://zTree.me/
 *
 * Copyright (c) 2010 Hunter.z
 *
 * Licensed same as jquery - MIT License
 * http://www.opensource.org/licenses/mit-license.php
 *
 * email: hunter.z@263.net
 * Date: 2015-11-15
 */

(function(q){var I,J,K,L,M,N,v,s={},w={},x={},O={treeId:"",treeObj:null,view:{addDiyDom:null,autoCancelSelected:!0,dblClickExpand:!0,expandSpeed:"fast",fontCss:{},nameIsHTML:!1,selectedMulti:!0,showIcon:!0,showLine:!0,showTitle:!0,txtSelectedEnable:!1},data:{key:{children:"children",name:"name",title:"",url:"url",icon:"icon"},simpleData:{enable:!1,idKey:"id",pIdKey:"pId",rootPId:null},keep:{parent:!1,leaf:!1}},async:{enable:!1,contentType:"application/x-www-form-urlencoded",type:"post",dataType:"text",url:"",autoParam:[],otherParam:[],dataFilter:null},callback:{beforeAsync:null,beforeClick:null,beforeDblClick:null,beforeRightClick:null,beforeMouseDown:null,beforeMouseUp:null,beforeExpand:null,beforeCollapse:null,beforeRemove:null,onAsyncError:null,onAsyncSuccess:null,onNodeCreated:null,onClick:null,onDblClick:null,onRightClick:null,onMouseDown:null,onMouseUp:null,onExpand:null,onCollapse:null,onRemove:null}},y=[function(e){var t=e.treeObj,n=f.event;t.bind(n.NODECREATED,function(t,n,r){j.apply(e.callback.onNodeCreated,[t,n,r])}),t.bind(n.CLICK,function(t,n,r,i,s){j.apply(e.callback.onClick,[n,r,i,s])}),t.bind(n.EXPAND,function(t,n,r){j.apply(e.callback.onExpand,[t,n,r])}),t.bind(n.COLLAPSE,function(t,n,r){j.apply(e.callback.onCollapse,[t,n,r])}),t.bind(n.ASYNC_SUCCESS,function(t,n,r,i){j.apply(e.callback.onAsyncSuccess,[t,n,r,i])}),t.bind(n.ASYNC_ERROR,function(t,n,r,i,s,o){j.apply(e.callback.onAsyncError,[t,n,r,i,s,o])}),t.bind(n.REMOVE,function(t,n,r){j.apply(e.callback.onRemove,[t,n,r])}),t.bind(n.SELECTED,function(t,n,r){j.apply(e.callback.onSelected,[n,r])}),t.bind(n.UNSELECTED,function(t,n,r){j.apply(e.callback.onUnSelected,[n,r])})}],z=[function(e){var t=f.event;e.treeObj.unbind(t.NODECREATED).unbind(t.CLICK).unbind(t.EXPAND).unbind(t.COLLAPSE).unbind(t.ASYNC_SUCCESS).unbind(t.ASYNC_ERROR).unbind(t.REMOVE).unbind(t.SELECTED).unbind(t.UNSELECTED)}],A=[function(e){var t=h.getCache(e);t||(t={},h.setCache(e,t)),t.nodes=[],t.doms=[]}],B=[function(e,t,n,r,i,s){if(n){var o=h.getRoot(e),u=e.data.key.children;n.level=t,n.tId=e.treeId+"_"+ ++o.zId,n.parentTId=r?r.tId:null,n.open=typeof n.open=="string"?j.eqs(n.open,"true"):!!n.open,n[u]&&n[u].length>0?(n.isParent=!0,n.zAsync=!0):(n.isParent=typeof n.isParent=="string"?j.eqs(n.isParent,"true"):!!n.isParent,n.open=n.isParent&&!e.async.enable?n.open:!1,n.zAsync=!n.isParent),n.isFirstNode=i,n.isLastNode=s,n.getParentNode=function(){return h.getNodeCache(e,n.parentTId)},n.getPreNode=function(){return h.getPreNode(e,n)},n.getNextNode=function(){return h.getNextNode(e,n)},n.getIndex=function(){return h.getNodeIndex(e,n)},n.getPath=function(){return h.getNodePath(e,n)},n.isAjaxing=!1,h.fixPIdKeyValue(e,n)}}],u=[function(e){var t=e.target,n=h.getSetting(e.data.treeId),r="",i=null,s="",o="",u=null,a=null,l=null;if(j.eqs(e.type,"mousedown"))o="mousedown";else if(j.eqs(e.type,"mouseup"))o="mouseup";else if(j.eqs(e.type,"contextmenu"))o="contextmenu";else if(j.eqs(e.type,"click")){if(j.eqs(t.tagName,"span")&&t.getAttribute("treeNode"+f.id.SWITCH)!==null)r=j.getNodeMainDom(t).id,s="switchNode";else if(l=j.getMDom(n,t,[{tagName:"a",attrName:"treeNode"+f.id.A}]))r=j.getNodeMainDom(l).id,s="clickNode"}else j.eqs(e.type,"dblclick")&&(o="dblclick",l=j.getMDom(n,t,[{tagName:"a",attrName:"treeNode"+f.id.A}]))&&(r=j.getNodeMainDom(l).id,s="switchNode");o.length>0&&r.length==0&&(l=j.getMDom(n,t,[{tagName:"a",attrName:"treeNode"+f.id.A}]))&&(r=j.getNodeMainDom(l).id);if(r.length>0)switch(i=h.getNodeCache(n,r),s){case"switchNode":i.isParent?j.eqs(e.type,"click")||j.eqs(e.type,"dblclick")&&j.apply(n.view.dblClickExpand,[n.treeId,i],n.view.dblClickExpand)?u=I:s="":s="";break;case"clickNode":u=J}switch(o){case"mousedown":a=K;break;case"mouseup":a=L;break;case"dblclick":a=M;break;case"contextmenu":a=N}return{stop:!1,node:i,nodeEventType:s,nodeEventCallback:u,treeEventType:o,treeEventCallback:a}}],C=[function(e){var t=h.getRoot(e);t||(t={},h.setRoot(e,t)),t[e.data.key.children]=[],t.expandTriggerFlag=!1,t.curSelectedList=[],t.noSelection=!0,t.createdNodes=[],t.zId=0,t._ver=(new Date).getTime()}],D=[],E=[],F=[],G=[],H=[],h={addNodeCache:function(e,t){h.getCache(e).nodes[h.getNodeCacheId(t.tId)]=t},getNodeCacheId:function(e){return e.substring(e.lastIndexOf("_")+1)},addAfterA:function(e){E.push(e)},addBeforeA:function(e){D.push(e)},addInnerAfterA:function(e){G.push(e)},addInnerBeforeA:function(e){F.push(e)},addInitBind:function(e){y.push(e)},addInitUnBind:function(e){z.push(e)},addInitCache:function(e){A.push(e)},addInitNode:function(e){B.push(e)},addInitProxy:function(e,t){t?u.splice(0,0,e):u.push(e)},addInitRoot:function(e){C.push(e)},addNodesData:function(e,t,n,r){var s=e.data.key.children;t[s]?n>=t[s].length&&(n=-1):(t[s]=[],n=-1),t[s].length>0&&n===0?(t[s][0].isFirstNode=!1,i.setNodeLineIcos(e,t[s][0])):t[s].length>0&&n<0&&(t[s][t[s].length-1].isLastNode=!1,i.setNodeLineIcos(e,t[s][t[s].length-1])),t.isParent=!0,n<0?t[s]=t[s].concat(r):(e=[n,0].concat(r),t[s].splice.apply(t[s],e))},addSelectedNode:function(e,t){var n=h.getRoot(e);h.isSelectedNode(e,t)||n.curSelectedList.push(t)},addCreatedNode:function(e,t){(e.callback.onNodeCreated||e.view.addDiyDom)&&h.getRoot(e).createdNodes.push(t)},addZTreeTools:function(e){H.push(e)},exSetting:function(e){q.extend(!0,O,e)},fixPIdKeyValue:function(e,t){e.data.simpleData.enable&&(t[e.data.simpleData.pIdKey]=t.parentTId?t.getParentNode()[e.data.simpleData.idKey]:e.data.simpleData.rootPId)},getAfterA:function(e,t,n){for(var r=0,i=E.length;r<i;r++)E[r].apply(this,arguments)},getBeforeA:function(e,t,n){for(var r=0,i=D.length;r<i;r++)D[r].apply(this,arguments)},getInnerAfterA:function(e,t,n){for(var r=0,i=G.length;r<i;r++)G[r].apply(this,arguments)},getInnerBeforeA:function(e,t,n){for(var r=0,i=F.length;r<i;r++)F[r].apply(this,arguments)},getCache:function(e){return x[e.treeId]},getNodeIndex:function(e,t){if(!t)return null;for(var n=e.data.key.children,r=t.parentTId?t.getParentNode():h.getRoot(e),i=0,s=r[n].length-1;i<=s;i++)if(r[n][i]===t)return i;return-1},getNextNode:function(e,t){if(!t)return null;for(var n=e.data.key.children,r=t.parentTId?t.getParentNode():h.getRoot(e),i=0,s=r[n].length-1;i<=s;i++)if(r[n][i]===t)return i==s?null:r[n][i+1];return null},getNodeByParam:function(e,t,n,r){if(!t||!n)return null;for(var i=e.data.key.children,s=0,o=t.length;s<o;s++){if(t[s][n]==r)return t[s];var u=h.getNodeByParam(e,t[s][i],n,r);if(u)return u}return null},getNodeCache:function(e,t){if(!t)return null;var n=x[e.treeId].nodes[h.getNodeCacheId(t)];return n?n:null},getNodeName:function(e,t){return""+t[e.data.key.name]},getNodePath:function(e,t){if(!t)return null;var n;return(n=t.parentTId?t.getParentNode().getPath():[])&&n.push(t),n},getNodeTitle:function(e,t){return""+t[e.data.key.title===""?e.data.key.name:e.data.key.title]},getNodes:function(e){return h.getRoot(e)[e.data.key.children]},getNodesByParam:function(e,t,n,r){if(!t||!n)return[];for(var i=e.data.key.children,s=[],o=0,u=t.length;o<u;o++)t[o][n]==r&&s.push(t[o]),s=s.concat(h.getNodesByParam(e,t[o][i],n,r));return s},getNodesByParamFuzzy:function(e,t,n,r){if(!t||!n)return[];for(var i=e.data.key.children,s=[],r=r.toLowerCase(),o=0,u=t.length;o<u;o++)typeof t[o][n]=="string"&&t[o][n].toLowerCase().indexOf(r)>-1&&s.push(t[o]),s=s.concat(h.getNodesByParamFuzzy(e,t[o][i],n,r));return s},getNodesByFilter:function(e,t,n,r,i){if(!t)return r?null:[];for(var s=e.data.key.children,o=r?null:[],u=0,a=t.length;u<a;u++){if(j.apply(n,[t[u],i],!1)){if(r)return t[u];o.push(t[u])}var f=h.getNodesByFilter(e,t[u][s],n,r,i);if(r&&f)return f;o=r?f:o.concat(f)}return o},getPreNode:function(e,t){if(!t)return null;for(var n=e.data.key.children,r=t.parentTId?t.getParentNode():h.getRoot(e),i=0,s=r[n].length;i<s;i++)if(r[n][i]===t)return i==0?null:r[n][i-1];return null},getRoot:function(e){return e?w[e.treeId]:null},getRoots:function(){return w},getSetting:function(e){return s[e]},getSettings:function(){return s},getZTreeTools:function(e){return(e=this.getRoot(this.getSetting(e)))?e.treeTools:null},initCache:function(e){for(var t=0,n=A.length;t<n;t++)A[t].apply(this,arguments)},initNode:function(e,t,n,r,i,s){for(var o=0,u=B.length;o<u;o++)B[o].apply(this,arguments)},initRoot:function(e){for(var t=0,n=C.length;t<n;t++)C[t].apply(this,arguments)},isSelectedNode:function(e,t){for(var n=h.getRoot(e),r=0,i=n.curSelectedList.length;r<i;r++)if(t===n.curSelectedList[r])return!0;return!1},removeNodeCache:function(e,t){var n=e.data.key.children;if(t[n])for(var r=0,i=t[n].length;r<i;r++)arguments.callee(e,t[n][r]);h.getCache(e).nodes[h.getNodeCacheId(t.tId)]=null},removeSelectedNode:function(e,t){for(var n=h.getRoot(e),r=0,i=n.curSelectedList.length;r<i;r++)if(t===n.curSelectedList[r]||!h.getNodeCache(e,n.curSelectedList[r].tId))n.curSelectedList.splice(r,1),e.treeObj.trigger(f.event.UNSELECTED,[e.treeId,t]),r--,i--},setCache:function(e,t){x[e.treeId]=t},setRoot:function(e,t){w[e.treeId]=t},setZTreeTools:function(e,t){for(var n=0,r=H.length;n<r;n++)H[n].apply(this,arguments)},transformToArrayFormat:function(e,t){if(!t)return[];var n=e.data.key.children,r=[];if(j.isArray(t))for(var i=0,s=t.length;i<s;i++)r.push(t[i]),t[i][n]&&(r=r.concat(h.transformToArrayFormat(e,t[i][n])));else r.push(t),t[n]&&(r=r.concat(h.transformToArrayFormat(e,t[n])));return r},transformTozTreeFormat:function(e,t){var n,r,i=e.data.simpleData.idKey,s=e.data.simpleData.pIdKey,o=e.data.key.children;if(!i||i==""||!t)return[];if(j.isArray(t)){var u=[],a=[];for(n=0,r=t.length;n<r;n++)a[t[n][i]]=t[n];for(n=0,r=t.length;n<r;n++)a[t[n][s]]&&t[n][i]!=t[n][s]?(a[t[n][s]][o]||(a[t[n][s]][o]=[]),a[t[n][s]][o].push(t[n])):u.push(t[n]);return u}return[t]}},l={bindEvent:function(e){for(var t=0,n=y.length;t<n;t++)y[t].apply(this,arguments)},unbindEvent:function(e){for(var t=0,n=z.length;t<n;t++)z[t].apply(this,arguments)},bindTree:function(e){var t={treeId:e.treeId},n=e.treeObj;e.view.txtSelectedEnable||n.bind("selectstart",v).css({"-moz-user-select":"-moz-none"}),n.bind("click",t,l.proxy),n.bind("dblclick",t,l.proxy),n.bind("mouseover",t,l.proxy),n.bind("mouseout",t,l.proxy),n.bind("mousedown",t,l.proxy),n.bind("mouseup",t,l.proxy),n.bind("contextmenu",t,l.proxy)},unbindTree:function(e){e.treeObj.unbind("selectstart",v).unbind("click",l.proxy).unbind("dblclick",l.proxy).unbind("mouseover",l.proxy).unbind("mouseout",l.proxy).unbind("mousedown",l.proxy).unbind("mouseup",l.proxy).unbind("contextmenu",l.proxy)},doProxy:function(e){for(var t=[],n=0,r=u.length;n<r;n++){var i=u[n].apply(this,arguments);t.push(i);if(i.stop)break}return t},proxy:function(e){var t=h.getSetting(e.data.treeId);if(!j.uCanDo(t,e))return!0;for(var t=l.doProxy(e),n=!0,r=0,i=t.length;r<i;r++){var s=t[r];s.nodeEventCallback&&(n=s.nodeEventCallback.apply(s,[e,s.node])&&n),s.treeEventCallback&&(n=s.treeEventCallback.apply(s,[e,s.node])&&n)}return n}};I=function(e,t){var n=h.getSetting(e.data.treeId);if(t.open){if(j.apply(n.callback.beforeCollapse,[n.treeId,t],!0)==0)return!0}else if(j.apply(n.callback.beforeExpand,[n.treeId,t],!0)==0)return!0;return h.getRoot(n).expandTriggerFlag=!0,i.switchNode(n,t),!0},J=function(e,t){var n=h.getSetting(e.data.treeId),r=n.view.autoCancelSelected&&(e.ctrlKey||e.metaKey)&&h.isSelectedNode(n,t)?0:n.view.autoCancelSelected&&(e.ctrlKey||e.metaKey)&&n.view.selectedMulti?2:1;return j.apply(n.callback.beforeClick,[n.treeId,t,r],!0)==0?!0:(r===0?i.cancelPreSelectedNode(n,t):i.selectNode(n,t,r===2),n.treeObj.trigger(f.event.CLICK,[e,n.treeId,t,r]),!0)},K=function(e,t){var n=h.getSetting(e.data.treeId);return j.apply(n.callback.beforeMouseDown,[n.treeId,t],!0)&&j.apply(n.callback.onMouseDown,[e,n.treeId,t]),!0},L=function(e,t){var n=h.getSetting(e.data.treeId);return j.apply(n.callback.beforeMouseUp,[n.treeId,t],!0)&&j.apply(n.callback.onMouseUp,[e,n.treeId,t]),!0},M=function(e,t){var n=h.getSetting(e.data.treeId);return j.apply(n.callback.beforeDblClick,[n.treeId,t],!0)&&j.apply(n.callback.onDblClick,[e,n.treeId,t]),!0},N=function(e,t){var n=h.getSetting(e.data.treeId);return j.apply(n.callback.beforeRightClick,[n.treeId,t],!0)&&j.apply(n.callback.onRightClick,[e,n.treeId,t]),typeof n.callback.onRightClick!="function"},v=function(e){return e=e.originalEvent.srcElement.nodeName.toLowerCase(),e==="input"||e==="textarea"};var j={apply:function(e,t,n){return typeof e=="function"?e.apply(P,t?t:[]):n},canAsync:function(e,t){var n=e.data.key.children;return e.async.enable&&t&&t.isParent&&!(t.zAsync||t[n]&&t[n].length>0)},clone:function(e){if(e===null)return null;var t=j.isArray(e)?[]:{},n;for(n in e)t[n]=e[n]instanceof Date?new Date(e[n].getTime()):typeof e[n]=="object"?arguments.callee(e[n]):e[n];return t},eqs:function(e,t){return e.toLowerCase()===t.toLowerCase()},isArray:function(e){return Object.prototype.toString.apply(e)==="[object Array]"},$:function(e,t,n){return t&&typeof t!="string"&&(n=t,t=""),typeof e=="string"?q(e,n?n.treeObj.get(0).ownerDocument:null):q("#"+e.tId+t,n?n.treeObj:null)},getMDom:function(e,t,n){if(!t)return null;for(;t&&t.id!==e.treeId;){for(var r=0,i=n.length;t.tagName&&r<i;r++)if(j.eqs(t.tagName,n[r].tagName)&&t.getAttribute(n[r].attrName)!==null)return t;t=t.parentNode}return null},getNodeMainDom:function(e){return q(e).parent("li").get(0)||q(e).parentsUntil("li").parent().get(0)},isChildOrSelf:function(e,t){return q(e).closest("#"+t).length>0},uCanDo:function(){return!0}},i={addNodes:function(e,t,n,r,s){if(!e.data.keep.leaf||!t||t.isParent)if(j.isArray(r)||(r=[r]),e.data.simpleData.enable&&(r=h.transformTozTreeFormat(e,r)),t){var o=k(t,f.id.SWITCH,e),u=k(t,f.id.ICON,e),a=k(t,f.id.UL,e);t.open||(i.replaceSwitchClass(t,o,f.folder.CLOSE),i.replaceIcoClass(t,u,f.folder.CLOSE),t.open=!1,a.css({display:"none"})),h.addNodesData(e,t,n,r),i.createNodes(e,t.level+1,r,t,n),s||i.expandCollapseParentNode(e,t,!0)}else h.addNodesData(e,h.getRoot(e),n,r),i.createNodes(e,0,r,null,n)},appendNodes:function(e,t,n,r,s,o,u){if(!n)return[];var a=[],f=e.data.key.children,l=(r?r:h.getRoot(e))[f],c,p;if(!l||s>=l.length)s=-1;for(var d=0,v=n.length;d<v;d++){var m=n[d];o&&(c=(s===0||l.length==n.length)&&d==0,p=s<0&&d==n.length-1,h.initNode(e,t,m,r,c,p,u),h.addNodeCache(e,m)),c=[],m[f]&&m[f].length>0&&(c=i.appendNodes(e,t+1,m[f],m,-1,o,u&&m.open)),u&&(i.makeDOMNodeMainBefore(a,e,m),i.makeDOMNodeLine(a,e,m),h.getBeforeA(e,m,a),i.makeDOMNodeNameBefore(a,e,m),h.getInnerBeforeA(e,m,a),i.makeDOMNodeIcon(a,e,m),h.getInnerAfterA(e,m,a),i.makeDOMNodeNameAfter(a,e,m),h.getAfterA(e,m,a),m.isParent&&m.open&&i.makeUlHtml(e,m,a,c.join("")),i.makeDOMNodeMainAfter(a,e,m),h.addCreatedNode(e,m))}return a},appendParentULDom:function(e,t){var n=[],r=k(t,e);!r.get(0)&&t.parentTId&&(i.appendParentULDom(e,t.getParentNode()),r=k(t,e));var s=k(t,f.id.UL,e);s.get(0)&&s.remove(),s=i.appendNodes(e,t.level+1,t[e.data.key.children],t,-1,!1,!0),i.makeUlHtml(e,t,n,s.join("")),r.append(n.join(""))},asyncNode:function(b,a,c,d){var e,g;if(a&&!a.isParent)return j.apply(d),!1;if(a&&a.isAjaxing)return!1;if(j.apply(b.callback.beforeAsync,[b.treeId,a],!0)==0)return j.apply(d),!1;a&&(a.isAjaxing=!0,k(a,f.id.ICON,b).attr({style:"","class":f.className.BUTTON+" "+f.className.ICO_LOADING}));var n={};for(e=0,g=b.async.autoParam.length;a&&e<g;e++){var o=b.async.autoParam[e].split("="),m=o;o.length>1&&(m=o[1],o=o[0]),n[m]=a[o]}if(j.isArray(b.async.otherParam))for(e=0,g=b.async.otherParam.length;e<g;e+=2)n[b.async.otherParam[e]]=b.async.otherParam[e+1];else for(var l in b.async.otherParam)n[l]=b.async.otherParam[l];var r=h.getRoot(b)._ver;return q.ajax({contentType:b.async.contentType,cache:!1,type:b.async.type,url:j.apply(b.async.url,[b.treeId,a],b.async.url),data:n,dataType:b.async.dataType,success:function(e){if(r==h.getRoot(b)._ver){var g=[];try{g=!e||e.length==0?[]:typeof e=="string"?eval("("+e+")"):e}catch(n){g=e}a&&(a.isAjaxing=null,a.zAsync=!0),i.setNodeLineIcos(b,a),g&&g!==""?(g=j.apply(b.async.dataFilter,[b.treeId,a,g],g),i.addNodes(b,a,-1,g?j.clone(g):[],!!c)):i.addNodes(b,a,-1,[],!!c),b.treeObj.trigger(f.event.ASYNC_SUCCESS,[b.treeId,a,e]),j.apply(d)}},error:function(e,t,n){r==h.getRoot(b)._ver&&(a&&(a.isAjaxing=null),i.setNodeLineIcos(b,a),b.treeObj.trigger(f.event.ASYNC_ERROR,[b.treeId,a,e,t,n]))}}),!0},cancelPreSelectedNode:function(e,t,n){var r=h.getRoot(e).curSelectedList,i,s;for(i=r.length-1;i>=0;i--)if(s=r[i],t===s||!t&&(!n||n!==s)){if(k(s,f.id.A,e).removeClass(f.node.CURSELECTED),t){h.removeSelectedNode(e,t);break}r.splice(i,1),e.treeObj.trigger(f.event.UNSELECTED,[e.treeId,s])}},createNodeCallback:function(e){if(e.callback.onNodeCreated||e.view.addDiyDom)for(var t=h.getRoot(e);t.createdNodes.length>0;){var n=t.createdNodes.shift();j.apply(e.view.addDiyDom,[e.treeId,n]),e.callback.onNodeCreated&&e.treeObj.trigger(f.event.NODECREATED,[e.treeId,n])}},createNodes:function(e,t,n,r,s){if(n&&n.length!=0){var o=h.getRoot(e),u=e.data.key.children,u=!r||r.open||!!k(r[u][0],e).get(0);o.createdNodes=[];var t=i.appendNodes(e,t,n,r,s,!0,u),a,l;r?(r=k(r,f.id.UL,e),r.get(0)&&(a=r)):a=e.treeObj,a&&(s>=0&&(l=a.children()[s]),s>=0&&l?q(l).before(t.join("")):a.append(t.join(""))),i.createNodeCallback(e)}},destroy:function(e){e&&(h.initCache(e),h.initRoot(e),l.unbindTree(e),l.unbindEvent(e),e.treeObj.empty(),delete s[e.treeId])},expandCollapseNode:function(e,t,n,r,s){var o=h.getRoot(e),u=e.data.key.children;if(t){if(o.expandTriggerFlag){var a=s,s=function(){a&&a(),t.open?e.treeObj.trigger(f.event.EXPAND,[e.treeId,t]):e.treeObj.trigger(f.event.COLLAPSE,[e.treeId,t])};o.expandTriggerFlag=!1}!t.open&&t.isParent&&(!k(t,f.id.UL,e).get(0)||t[u]&&t[u].length>0&&!k(t[u][0],e).get(0))&&(i.appendParentULDom(e,t),i.createNodeCallback(e));if(t.open==n)j.apply(s,[]);else{var n=k(t,f.id.UL,e),o=k(t,f.id.SWITCH,e),l=k(t,f.id.ICON,e);t.isParent?(t.open=!t.open,t.iconOpen&&t.iconClose&&l.attr("style",i.makeNodeIcoStyle(e,t)),t.open?(i.replaceSwitchClass(t,o,f.folder.OPEN),i.replaceIcoClass(t,l,f.folder.OPEN),r==0||e.view.expandSpeed==""?(n.show(),j.apply(s,[])):t[u]&&t[u].length>0?n.slideDown(e.view.expandSpeed,s):(n.show(),j.apply(s,[]))):(i.replaceSwitchClass(t,o,f.folder.CLOSE),i.replaceIcoClass(t,l,f.folder.CLOSE),r==0||e.view.expandSpeed==""||!(t[u]&&t[u].length>0)?(n.hide(),j.apply(s,[])):n.slideUp(e.view.expandSpeed,s))):j.apply(s,[])}}else j.apply(s,[])},expandCollapseParentNode:function(e,t,n,r,s){t&&(t.parentTId?(i.expandCollapseNode(e,t,n,r),t.parentTId&&i.expandCollapseParentNode(e,t.getParentNode(),n,r,s)):i.expandCollapseNode(e,t,n,r,s))},expandCollapseSonNode:function(e,t,n,r,s){var o=h.getRoot(e),u=e.data.key.children,o=t?t[u]:o[u],u=t?!1:r,a=h.getRoot(e).expandTriggerFlag;h.getRoot(e).expandTriggerFlag=!1;if(o)for(var f=0,l=o.length;f<l;f++)o[f]&&i.expandCollapseSonNode(e,o[f],n,u);h.getRoot(e).expandTriggerFlag=a,i.expandCollapseNode(e,t,n,r,s)},isSelectedNode:function(e,t){if(!t)return!1;var n=h.getRoot(e).curSelectedList,r;for(r=n.length-1;r>=0;r--)if(t===n[r])return!0;return!1},makeDOMNodeIcon:function(e,t,n){var r=h.getNodeName(t,n),r=t.view.nameIsHTML?r:r.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;");e.push("<span id='",n.tId,f.id.ICON,"' title='' treeNode",f.id.ICON," class='",i.makeNodeIcoClass(t,n),"' style='",i.makeNodeIcoStyle(t,n),"'></span><span id='",n.tId,f.id.SPAN,"' class='",f.className.NAME,"'>",r,"</span>")},makeDOMNodeLine:function(e,t,n){e.push("<span id='",n.tId,f.id.SWITCH,"' title='' class='",i.makeNodeLineClass(t,n),"' treeNode",f.id.SWITCH,"></span>")},makeDOMNodeMainAfter:function(e){e.push("</li>")},makeDOMNodeMainBefore:function(e,t,n){e.push("<li id='",n.tId,"' class='",f.className.LEVEL,n.level,"' tabindex='0' hidefocus='true' treenode>")},makeDOMNodeNameAfter:function(e){e.push("</a>")},makeDOMNodeNameBefore:function(e,t,n){var r=h.getNodeTitle(t,n),s=i.makeNodeUrl(t,n),o=i.makeNodeFontCss(t,n),u=[],a;for(a in o)u.push(a,":",o[a],";");e.push("<a id='",n.tId,f.id.A,"' class='",f.className.LEVEL,n.level,"' treeNode",f.id.A,' onclick="',n.click||"",'" ',s!=null&&s.length>0?"href='"+s+"'":""," target='",i.makeNodeTarget(n),"' style='",u.join(""),"'"),j.apply(t.view.showTitle,[t.treeId,n],t.view.showTitle)&&r&&e.push("title='",r.replace(/'/g,"&#39;").replace(/</g,"&lt;").replace(/>/g,"&gt;"),"'"),e.push(">")},makeNodeFontCss:function(e,t){var n=j.apply(e.view.fontCss,[e.treeId,t],e.view.fontCss);return n&&typeof n!="function"?n:{}},makeNodeIcoClass:function(e,t){var n=["ico"];return t.isAjaxing||(n[0]=(t.iconSkin?t.iconSkin+"_":"")+n[0],t.isParent?n.push(t.open?f.folder.OPEN:f.folder.CLOSE):n.push(f.folder.DOCU)),f.className.BUTTON+" "+n.join("_")},makeNodeIcoStyle:function(e,t){var n=[];if(!t.isAjaxing){var r=t.isParent&&t.iconOpen&&t.iconClose?t.open?t.iconOpen:t.iconClose:t[e.data.key.icon];r&&n.push("background:url(",r,") 0 0 no-repeat;"),(e.view.showIcon==0||!j.apply(e.view.showIcon,[e.treeId,t],!0))&&n.push("width:0px;height:0px;")}return n.join("")},makeNodeLineClass:function(e,t){var n=[];return e.view.showLine?t.level==0&&t.isFirstNode&&t.isLastNode?n.push(f.line.ROOT):t.level==0&&t.isFirstNode?n.push(f.line.ROOTS):t.isLastNode?n.push(f.line.BOTTOM):n.push(f.line.CENTER):n.push(f.line.NOLINE),t.isParent?n.push(t.open?f.folder.OPEN:f.folder.CLOSE):n.push(f.folder.DOCU),i.makeNodeLineClassEx(t)+n.join("_")},makeNodeLineClassEx:function(e){return f.className.BUTTON+" "+f.className.LEVEL+e.level+" "+f.className.SWITCH+" "},makeNodeTarget:function(e){return e.target||"_blank"},makeNodeUrl:function(e,t){var n=e.data.key.url;return t[n]?t[n]:null},makeUlHtml:function(e,t,n,r){n.push("<ul id='",t.tId,f.id.UL,"' class='",f.className.LEVEL,t.level," ",i.makeUlLineClass(e,t),"' style='display:",t.open?"block":"none","'>"),n.push(r),n.push("</ul>")},makeUlLineClass:function(e,t){return e.view.showLine&&!t.isLastNode?f.line.LINE:""},removeChildNodes:function(e,t){if(t){var n=e.data.key.children,r=t[n];if(r){for(var s=0,o=r.length;s<o;s++)h.removeNodeCache(e,r[s]);h.removeSelectedNode(e),delete t[n],e.data.keep.parent?k(t,f.id.UL,e).empty():(t.isParent=!1,t.open=!1,n=k(t,f.id.SWITCH,e),r=k(t,f.id.ICON,e),i.replaceSwitchClass(t,n,f.folder.DOCU),i.replaceIcoClass(t,r,f.folder.DOCU),k(t,f.id.UL,e).remove())}}},setFirstNode:function(e,t){var n=e.data.key.children;t[n].length>0&&(t[n][0].isFirstNode=!0)},setLastNode:function(e,t){var n=e.data.key.children,r=t[n].length;r>0&&(t[n][r-1].isLastNode=!0)},removeNode:function(e,t){var n=h.getRoot(e),r=e.data.key.children,s=t.parentTId?t.getParentNode():n;t.isFirstNode=!1,t.isLastNode=!1,t.getPreNode=function(){return null},t.getNextNode=function(){return null};if(h.getNodeCache(e,t.tId)){k(t,e).remove(),h.removeNodeCache(e,t),h.removeSelectedNode(e,t);for(var o=0,u=s[r].length;o<u;o++)if(s[r][o].tId==t.tId){s[r].splice(o,1);break}i.setFirstNode(e,s),i.setLastNode(e,s);var a,o=s[r].length;if(!e.data.keep.parent&&o==0)s.isParent=!1,s.open=!1,o=k(s,f.id.UL,e),u=k(s,f.id.SWITCH,e),a=k(s,f.id.ICON,e),i.replaceSwitchClass(s,u,f.folder.DOCU),i.replaceIcoClass(s,a,f.folder.DOCU),o.css("display","none");else if(e.view.showLine&&o>0){var l=s[r][o-1],o=k(l,f.id.UL,e),u=k(l,f.id.SWITCH,e);a=k(l,f.id.ICON,e),s==n?s[r].length==1?i.replaceSwitchClass(l,u,f.line.ROOT):(n=k(s[r][0],f.id.SWITCH,e),i.replaceSwitchClass(s[r][0],n,f.line.ROOTS),i.replaceSwitchClass(l,u,f.line.BOTTOM)):i.replaceSwitchClass(l,u,f.line.BOTTOM),o.removeClass(f.line.LINE)}}},replaceIcoClass:function(e,t,n){if(t&&!e.isAjaxing&&(e=t.attr("class"),e!=void 0)){e=e.split("_");switch(n){case f.folder.OPEN:case f.folder.CLOSE:case f.folder.DOCU:e[e.length-1]=n}t.attr("class",e.join("_"))}},replaceSwitchClass:function(e,t,n){if(t){var r=t.attr("class");if(r!=void 0){r=r.split("_");switch(n){case f.line.ROOT:case f.line.ROOTS:case f.line.CENTER:case f.line.BOTTOM:case f.line.NOLINE:r[0]=i.makeNodeLineClassEx(e)+n;break;case f.folder.OPEN:case f.folder.CLOSE:case f.folder.DOCU:r[1]=n}t.attr("class",r.join("_")),n!==f.folder.DOCU?t.removeAttr("disabled"):t.attr("disabled","disabled")}}},selectNode:function(e,t,n){n||i.cancelPreSelectedNode(e,null,t),k(t,f.id.A,e).addClass(f.node.CURSELECTED),h.addSelectedNode(e,t),e.treeObj.trigger(f.event.SELECTED,[e.treeId,t])},setNodeFontCss:function(e,t){var n=k(t,f.id.A,e),r=i.makeNodeFontCss(e,t);r&&n.css(r)},setNodeLineIcos:function(e,t){if(t){var n=k(t,f.id.SWITCH,e),r=k(t,f.id.UL,e),s=k(t,f.id.ICON,e),o=i.makeUlLineClass(e,t);o.length==0?r.removeClass(f.line.LINE):r.addClass(o),n.attr("class",i.makeNodeLineClass(e,t)),t.isParent?n.removeAttr("disabled"):n.attr("disabled","disabled"),s.removeAttr("style"),s.attr("style",i.makeNodeIcoStyle(e,t)),s.attr("class",i.makeNodeIcoClass(e,t))}},setNodeName:function(e,t){var n=h.getNodeTitle(e,t),r=k(t,f.id.SPAN,e);r.empty(),e.view.nameIsHTML?r.html(h.getNodeName(e,t)):r.text(h.getNodeName(e,t)),j.apply(e.view.showTitle,[e.treeId,t],e.view.showTitle)&&k(t,f.id.A,e).attr("title",n?n:"")},setNodeTarget:function(e,t){k(t,f.id.A,e).attr("target",i.makeNodeTarget(t))},setNodeUrl:function(e,t){var n=k(t,f.id.A,e),r=i.makeNodeUrl(e,t);r==null||r.length==0?n.removeAttr("href"):n.attr("href",r)},switchNode:function(e,t){t.open||!j.canAsync(e,t)?i.expandCollapseNode(e,t,!t.open):e.async.enable?i.asyncNode(e,t)||i.expandCollapseNode(e,t,!t.open):t&&i.expandCollapseNode(e,t,!t.open)}};q.fn.zTree={consts:{className:{BUTTON:"button",LEVEL:"level",ICO_LOADING:"ico_loading",SWITCH:"switch",NAME:"node_name"},event:{NODECREATED:"ztree_nodeCreated",CLICK:"ztree_click",EXPAND:"ztree_expand",COLLAPSE:"ztree_collapse",ASYNC_SUCCESS:"ztree_async_success",ASYNC_ERROR:"ztree_async_error",REMOVE:"ztree_remove",SELECTED:"ztree_selected",UNSELECTED:"ztree_unselected"},id:{A:"_a",ICON:"_ico",SPAN:"_span",SWITCH:"_switch",UL:"_ul"},line:{ROOT:"root",ROOTS:"roots",CENTER:"center",BOTTOM:"bottom",NOLINE:"noline",LINE:"line"},folder:{OPEN:"open",CLOSE:"close",DOCU:"docu"},node:{CURSELECTED:"curSelectedNode"}},_z:{tools:j,view:i,event:l,data:h},getZTreeObj:function(e){return(e=h.getZTreeTools(e))?e:null},destroy:function(e){if(e&&e.length>0)i.destroy(h.getSetting(e));else for(var t in s)i.destroy(s[t])},init:function(e,t,n){var r=j.clone(O);return q.extend(!0,r,t),r.treeId=e.attr("id"),r.treeObj=e,r.treeObj.empty(),s[r.treeId]=r,typeof document.body.style.maxHeight=="undefined"&&(r.view.expandSpeed=""),h.initRoot(r),e=h.getRoot(r),t=r.data.key.children,n=n?j.clone(j.isArray(n)?n:[n]):[],e[t]=r.data.simpleData.enable?h.transformTozTreeFormat(r,n):n,h.initCache(r),l.unbindTree(r),l.bindTree(r),l.unbindEvent(r),l.bindEvent(r),n={setting:r,addNodes:function(e,t,n,s){function o(){i.addNodes(r,e,t,a,s==1)}e||(e=null);if(e&&!e.isParent&&r.data.keep.leaf)return null;var u=parseInt(t,10);isNaN(u)?(s=!!n,n=t,t=-1):t=u;if(!n)return null;var a=j.clone(j.isArray(n)?n:[n]);return j.canAsync(r,e)?i.asyncNode(r,e,s,o):o(),a},cancelSelectedNode:function(e){i.cancelPreSelectedNode(r,e)},destroy:function(){i.destroy(r)},expandAll:function(e){return e=!!e,i.expandCollapseSonNode(r,null,e,!0),e},expandNode:function(e,t,n,s,o){if(!e||!e.isParent)return null;t!==!0&&t!==!1&&(t=!e.open);if((o=!!o)&&t&&j.apply(r.callback.beforeExpand,[r.treeId,e],!0)==0)return null;if(o&&!t&&j.apply(r.callback.beforeCollapse,[r.treeId,e],!0)==0)return null;t&&e.parentTId&&i.expandCollapseParentNode(r,e.getParentNode(),t,!1);if(t===e.open&&!n)return null;h.getRoot(r).expandTriggerFlag=o;if(!j.canAsync(r,e)&&n)i.expandCollapseSonNode(r,e,t,!0,function(){if(s!==!1)try{k(e,r).focus().blur()}catch(t){}});else if(e.open=!t,i.switchNode(this.setting,e),s!==!1)try{k(e,r).focus().blur()}catch(u){}return t},getNodes:function(){return h.getNodes(r)},getNodeByParam:function(e,t,n){return e?h.getNodeByParam(r,n?n[r.data.key.children]:h.getNodes(r),e,t):null},getNodeByTId:function(e){return h.getNodeCache(r,e)},getNodesByParam:function(e,t,n){return e?h.getNodesByParam(r,n?n[r.data.key.children]:h.getNodes(r),e,t):null},getNodesByParamFuzzy:function(e,t,n){return e?h.getNodesByParamFuzzy(r,n?n[r.data.key.children]:h.getNodes(r),e,t):null},getNodesByFilter:function(e,t,n,i){return t=!!t,!e||typeof e!="function"?t?null:[]:h.getNodesByFilter(r,n?n[r.data.key.children]:h.getNodes(r),e,t,i)},getNodeIndex:function(e){if(!e)return null;for(var t=r.data.key.children,n=e.parentTId?e.getParentNode():h.getRoot(r),i=0,s=n[t].length;i<s;i++)if(n[t][i]==e)return i;return-1},getSelectedNodes:function(){for(var e=[],t=h.getRoot(r).curSelectedList,n=0,i=t.length;n<i;n++)e.push(t[n]);return e},isSelectedNode:function(e){return h.isSelectedNode(r,e)},reAsyncChildNodes:function(e,t,n){if(this.setting.async.enable){var s=!e;s&&(e=h.getRoot(r));if(t=="refresh"){for(var t=this.setting.data.key.children,o=0,u=e[t]?e[t].length:0;o<u;o++)h.removeNodeCache(r,e[t][o]);h.removeSelectedNode(r),e[t]=[],s?this.setting.treeObj.empty():k(e,f.id.UL,r).empty()}i.asyncNode(this.setting,s?null:e,!!n)}},refresh:function(){this.setting.treeObj.empty();var e=h.getRoot(r),t=e[r.data.key.children];h.initRoot(r),e[r.data.key.children]=t,h.initCache(r),i.createNodes(r,0,e[r.data.key.children],null,-1)},removeChildNodes:function(e){if(!e)return null;var t=e[r.data.key.children];return i.removeChildNodes(r,e),t?t:null},removeNode:function(e,t){e&&(t=!!t,t&&j.apply(r.callback.beforeRemove,[r.treeId,e],!0)==0||(i.removeNode(r,e),t&&this.setting.treeObj.trigger(f.event.REMOVE,[r.treeId,e])))},selectNode:function(e,t){if(e&&j.uCanDo(r)){t=r.view.selectedMulti&&t;if(e.parentTId)i.expandCollapseParentNode(r,e.getParentNode(),!0,!1,function(){try{k(e,r).focus().blur()}catch(t){}});else try{k(e,r).focus().blur()}catch(n){}i.selectNode(r,e,t)}},transformTozTreeNodes:function(e){return h.transformTozTreeFormat(r,e)},transformToArray:function(e){return h.transformToArrayFormat(r,e)},updateNode:function(e){e&&k(e,r).get(0)&&j.uCanDo(r)&&(i.setNodeName(r,e),i.setNodeTarget(r,e),i.setNodeUrl(r,e),i.setNodeLineIcos(r,e),i.setNodeFontCss(r,e))}},e.treeTools=n,h.setZTreeTools(r,n),e[t]&&e[t].length>0?i.createNodes(r,0,e[t],null,-1):r.async.enable&&r.async.url&&r.async.url!==""&&i.asyncNode(r),n}};var P=q.fn.zTree,k=j.$,f=P.consts})(jQuery);